var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},e={},n={},r=t.parcelRequire0894;null==r&&((r=function(t){if(t in e)return e[t].exports;if(t in n){var r=n[t];delete n[t];var o={id:t,exports:{}};return e[t]=o,r.call(o.exports,o,o.exports),o.exports}var i=new Error("Cannot find module '"+t+"'");throw i.code="MODULE_NOT_FOUND",i}).register=function(t,e){n[t]=e},t.parcelRequire0894=r),r.register("cVm5l",(function(e,n){var r;self,r=()=>(()=>{var r={227:(t,e,n)=>{var r=n(155);e.formatArgs=function(e){if(e[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+e[0]+(this.useColors?"%c ":" ")+"+"+t.exports.humanize(this.diff),!this.useColors)return;const n="color: "+this.color;e.splice(1,0,n,"color: inherit");let r=0,o=0;e[0].replace(/%[a-zA-Z%]/g,(t=>{"%%"!==t&&(r++,"%c"===t&&(o=r))})),e.splice(o,0,n)},e.save=function(t){try{t?e.storage.setItem("debug",t):e.storage.removeItem("debug")}catch(t){}},e.load=function(){let t;try{t=e.storage.getItem("debug")}catch(t){}return!t&&void 0!==r&&"env"in r&&(t=r.env.DEBUG),t},e.useColors=function(){return!("undefined"==typeof window||!window.process||"renderer"!==window.process.type&&!window.process.__nwjs)||("undefined"==typeof navigator||!navigator.userAgent||!navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&("undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))},e.storage=function(){try{return localStorage}catch(t){}}(),e.destroy=(()=>{let t=!1;return()=>{t||(t=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),e.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],e.log=console.debug||console.log||(()=>{}),t.exports=n(447)(e);const{formatters:o}=t.exports;o.j=function(t){try{return JSON.stringify(t)}catch(t){return"[UnexpectedJSONParseError]: "+t.message}}},447:(t,e,n)=>{t.exports=function(t){function e(t){let n,o,i,s=null;function a(...t){if(!a.enabled)return;const r=a,o=Number(new Date),i=o-(n||o);r.diff=i,r.prev=n,r.curr=o,n=o,t[0]=e.coerce(t[0]),"string"!=typeof t[0]&&t.unshift("%O");let s=0;t[0]=t[0].replace(/%([a-zA-Z%])/g,((n,o)=>{if("%%"===n)return"%";s++;const i=e.formatters[o];if("function"==typeof i){const e=t[s];n=i.call(r,e),t.splice(s,1),s--}return n})),e.formatArgs.call(r,t),(r.log||e.log).apply(r,t)}return a.namespace=t,a.useColors=e.useColors(),a.color=e.selectColor(t),a.extend=r,a.destroy=e.destroy,Object.defineProperty(a,"enabled",{enumerable:!0,configurable:!1,get:()=>null!==s?s:(o!==e.namespaces&&(o=e.namespaces,i=e.enabled(t)),i),set:t=>{s=t}}),"function"==typeof e.init&&e.init(a),a}function r(t,n){const r=e(this.namespace+(void 0===n?":":n)+t);return r.log=this.log,r}function o(t){return t.toString().substring(2,t.toString().length-2).replace(/\.\*\?$/,"*")}return e.debug=e,e.default=e,e.coerce=function(t){return t instanceof Error?t.stack||t.message:t},e.disable=function(){const t=[...e.names.map(o),...e.skips.map(o).map((t=>"-"+t))].join(",");return e.enable(""),t},e.enable=function(t){let n;e.save(t),e.namespaces=t,e.names=[],e.skips=[];const r=("string"==typeof t?t:"").split(/[\s,]+/),o=r.length;for(n=0;n<o;n++)r[n]&&("-"===(t=r[n].replace(/\*/g,".*?"))[0]?e.skips.push(new RegExp("^"+t.slice(1)+"$")):e.names.push(new RegExp("^"+t+"$")))},e.enabled=function(t){if("*"===t[t.length-1])return!0;let n,r;for(n=0,r=e.skips.length;n<r;n++)if(e.skips[n].test(t))return!1;for(n=0,r=e.names.length;n<r;n++)if(e.names[n].test(t))return!0;return!1},e.humanize=n(824),e.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(t).forEach((n=>{e[n]=t[n]})),e.names=[],e.skips=[],e.formatters={},e.selectColor=function(t){let n=0;for(let e=0;e<t.length;e++)n=(n<<5)-n+t.charCodeAt(e),n|=0;return e.colors[Math.abs(n)%e.colors.length]},e.enable(e.load()),e}},856:function(t){t.exports=function(){function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function e(t,n){return e=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},e(t,n)}function n(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}function r(t,o,i){return r=n()?Reflect.construct:function(t,n,r){var o=[null];o.push.apply(o,n);var i=new(Function.bind.apply(t,o));return r&&e(i,r.prototype),i},r.apply(null,arguments)}function o(t){return function(t){if(Array.isArray(t))return i(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return i(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var s=Object.hasOwnProperty,a=Object.setPrototypeOf,c=Object.isFrozen,l=Object.getPrototypeOf,u=Object.getOwnPropertyDescriptor,f=Object.freeze,h=Object.seal,p=Object.create,d="undefined"!=typeof Reflect&&Reflect,g=d.apply,m=d.construct;g||(g=function(t,e,n){return t.apply(e,n)}),f||(f=function(t){return t}),h||(h=function(t){return t}),m||(m=function(t,e){return r(t,o(e))});var y=S(Array.prototype.forEach),v=S(Array.prototype.pop),b=S(Array.prototype.push),w=S(String.prototype.toLowerCase),_=S(String.prototype.match),E=S(String.prototype.replace),x=S(String.prototype.indexOf),C=S(String.prototype.trim),A=S(RegExp.prototype.test),O=function(t){return function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return m(t,n)}}(TypeError);function S(t){return function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];return g(t,e,r)}}function I(t,e){a&&a(t,null);for(var n=e.length;n--;){var r=e[n];if("string"==typeof r){var o=w(r);o!==r&&(c(e)||(e[n]=o),r=o)}t[r]=!0}return t}function k(t){var e,n=p(null);for(e in t)g(s,t,[e])&&(n[e]=t[e]);return n}function T(t,e){for(;null!==t;){var n=u(t,e);if(n){if(n.get)return S(n.get);if("function"==typeof n.value)return S(n.value)}t=l(t)}return function(t){return console.warn("fallback value for",t),null}}var j=f(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),L=f(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),R=f(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),U=f(["animate","color-profile","cursor","discard","fedropshadow","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),F=f(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover"]),M=f(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),B=f(["#text"]),N=f(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),$=f(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),P=f(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),D=f(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),z=h(/\{\{[\w\W]*|[\w\W]*\}\}/gm),q=h(/<%[\w\W]*|[\w\W]*%>/gm),H=h(/^data-[\-\w.\u00B7-\uFFFF]/),W=h(/^aria-[\-\w]+$/),G=h(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),J=h(/^(?:\w+script|data):/i),V=h(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),Y=h(/^html$/i),Z=function(){return"undefined"==typeof window?null:window},K=function(e,n){if("object"!==t(e)||"function"!=typeof e.createPolicy)return null;var r=null,o="data-tt-policy-suffix";n.currentScript&&n.currentScript.hasAttribute(o)&&(r=n.currentScript.getAttribute(o));var i="dompurify"+(r?"#"+r:"");try{return e.createPolicy(i,{createHTML:function(t){return t}})}catch(t){return console.warn("TrustedTypes policy "+i+" could not be created."),null}};return function e(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Z(),r=function(t){return e(t)};if(r.version="2.3.8",r.removed=[],!n||!n.document||9!==n.document.nodeType)return r.isSupported=!1,r;var i=n.document,s=n.document,a=n.DocumentFragment,c=n.HTMLTemplateElement,l=n.Node,u=n.Element,h=n.NodeFilter,p=n.NamedNodeMap,d=void 0===p?n.NamedNodeMap||n.MozNamedAttrMap:p,g=n.HTMLFormElement,m=n.DOMParser,S=n.trustedTypes,Q=u.prototype,X=T(Q,"cloneNode"),tt=T(Q,"nextSibling"),et=T(Q,"childNodes"),nt=T(Q,"parentNode");if("function"==typeof c){var rt=s.createElement("template");rt.content&&rt.content.ownerDocument&&(s=rt.content.ownerDocument)}var ot=K(S,i),it=ot?ot.createHTML(""):"",st=s,at=st.implementation,ct=st.createNodeIterator,lt=st.createDocumentFragment,ut=st.getElementsByTagName,ft=i.importNode,ht={};try{ht=k(s).documentMode?s.documentMode:{}}catch(t){}var pt={};r.isSupported="function"==typeof nt&&at&&void 0!==at.createHTMLDocument&&9!==ht;var dt,gt,mt=z,yt=q,vt=H,bt=W,wt=J,_t=V,Et=G,xt=null,Ct=I({},[].concat(o(j),o(L),o(R),o(F),o(B))),At=null,Ot=I({},[].concat(o(N),o($),o(P),o(D))),St=Object.seal(Object.create(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),It=null,kt=null,Tt=!0,jt=!0,Lt=!1,Rt=!1,Ut=!1,Ft=!1,Mt=!1,Bt=!1,Nt=!1,$t=!1,Pt=!0,Dt=!0,zt=!1,qt={},Ht=null,Wt=I({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]),Gt=null,Jt=I({},["audio","video","img","source","image","track"]),Vt=null,Yt=I({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),Zt="http://www.w3.org/1998/Math/MathML",Kt="http://www.w3.org/2000/svg",Qt="http://www.w3.org/1999/xhtml",Xt=Qt,te=!1,ee=["application/xhtml+xml","text/html"],ne="text/html",re=null,oe=s.createElement("form"),ie=function(t){return t instanceof RegExp||t instanceof Function},se=function(e){re&&re===e||(e&&"object"===t(e)||(e={}),e=k(e),xt="ALLOWED_TAGS"in e?I({},e.ALLOWED_TAGS):Ct,At="ALLOWED_ATTR"in e?I({},e.ALLOWED_ATTR):Ot,Vt="ADD_URI_SAFE_ATTR"in e?I(k(Yt),e.ADD_URI_SAFE_ATTR):Yt,Gt="ADD_DATA_URI_TAGS"in e?I(k(Jt),e.ADD_DATA_URI_TAGS):Jt,Ht="FORBID_CONTENTS"in e?I({},e.FORBID_CONTENTS):Wt,It="FORBID_TAGS"in e?I({},e.FORBID_TAGS):{},kt="FORBID_ATTR"in e?I({},e.FORBID_ATTR):{},qt="USE_PROFILES"in e&&e.USE_PROFILES,Tt=!1!==e.ALLOW_ARIA_ATTR,jt=!1!==e.ALLOW_DATA_ATTR,Lt=e.ALLOW_UNKNOWN_PROTOCOLS||!1,Rt=e.SAFE_FOR_TEMPLATES||!1,Ut=e.WHOLE_DOCUMENT||!1,Bt=e.RETURN_DOM||!1,Nt=e.RETURN_DOM_FRAGMENT||!1,$t=e.RETURN_TRUSTED_TYPE||!1,Mt=e.FORCE_BODY||!1,Pt=!1!==e.SANITIZE_DOM,Dt=!1!==e.KEEP_CONTENT,zt=e.IN_PLACE||!1,Et=e.ALLOWED_URI_REGEXP||Et,Xt=e.NAMESPACE||Qt,e.CUSTOM_ELEMENT_HANDLING&&ie(e.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(St.tagNameCheck=e.CUSTOM_ELEMENT_HANDLING.tagNameCheck),e.CUSTOM_ELEMENT_HANDLING&&ie(e.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(St.attributeNameCheck=e.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),e.CUSTOM_ELEMENT_HANDLING&&"boolean"==typeof e.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements&&(St.allowCustomizedBuiltInElements=e.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),dt=dt=-1===ee.indexOf(e.PARSER_MEDIA_TYPE)?ne:e.PARSER_MEDIA_TYPE,gt="application/xhtml+xml"===dt?function(t){return t}:w,Rt&&(jt=!1),Nt&&(Bt=!0),qt&&(xt=I({},o(B)),At=[],!0===qt.html&&(I(xt,j),I(At,N)),!0===qt.svg&&(I(xt,L),I(At,$),I(At,D)),!0===qt.svgFilters&&(I(xt,R),I(At,$),I(At,D)),!0===qt.mathMl&&(I(xt,F),I(At,P),I(At,D))),e.ADD_TAGS&&(xt===Ct&&(xt=k(xt)),I(xt,e.ADD_TAGS)),e.ADD_ATTR&&(At===Ot&&(At=k(At)),I(At,e.ADD_ATTR)),e.ADD_URI_SAFE_ATTR&&I(Vt,e.ADD_URI_SAFE_ATTR),e.FORBID_CONTENTS&&(Ht===Wt&&(Ht=k(Ht)),I(Ht,e.FORBID_CONTENTS)),Dt&&(xt["#text"]=!0),Ut&&I(xt,["html","head","body"]),xt.table&&(I(xt,["tbody"]),delete It.tbody),f&&f(e),re=e)},ae=I({},["mi","mo","mn","ms","mtext"]),ce=I({},["foreignobject","desc","title","annotation-xml"]),le=I({},["title","style","font","a","script"]),ue=I({},L);I(ue,R),I(ue,U);var fe=I({},F);I(fe,M);var he=function(t){var e=nt(t);e&&e.tagName||(e={namespaceURI:Qt,tagName:"template"});var n=w(t.tagName),r=w(e.tagName);return t.namespaceURI===Kt?e.namespaceURI===Qt?"svg"===n:e.namespaceURI===Zt?"svg"===n&&("annotation-xml"===r||ae[r]):Boolean(ue[n]):t.namespaceURI===Zt?e.namespaceURI===Qt?"math"===n:e.namespaceURI===Kt?"math"===n&&ce[r]:Boolean(fe[n]):t.namespaceURI===Qt&&!(e.namespaceURI===Kt&&!ce[r])&&!(e.namespaceURI===Zt&&!ae[r])&&!fe[n]&&(le[n]||!ue[n])},pe=function(t){b(r.removed,{element:t});try{t.parentNode.removeChild(t)}catch(e){try{t.outerHTML=it}catch(e){t.remove()}}},de=function(t,e){try{b(r.removed,{attribute:e.getAttributeNode(t),from:e})}catch(t){b(r.removed,{attribute:null,from:e})}if(e.removeAttribute(t),"is"===t&&!At[t])if(Bt||Nt)try{pe(e)}catch(t){}else try{e.setAttribute(t,"")}catch(t){}},ge=function(t){var e,n;if(Mt)t="<remove></remove>"+t;else{var r=_(t,/^[\r\n\t ]+/);n=r&&r[0]}"application/xhtml+xml"===dt&&(t='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+t+"</body></html>");var o=ot?ot.createHTML(t):t;if(Xt===Qt)try{e=(new m).parseFromString(o,dt)}catch(t){}if(!e||!e.documentElement){e=at.createDocument(Xt,"template",null);try{e.documentElement.innerHTML=te?"":o}catch(t){}}var i=e.body||e.documentElement;return t&&n&&i.insertBefore(s.createTextNode(n),i.childNodes[0]||null),Xt===Qt?ut.call(e,Ut?"html":"body")[0]:Ut?e.documentElement:i},me=function(t){return ct.call(t.ownerDocument||t,t,h.SHOW_ELEMENT|h.SHOW_COMMENT|h.SHOW_TEXT,null,!1)},ye=function(t){return t instanceof g&&("string"!=typeof t.nodeName||"string"!=typeof t.textContent||"function"!=typeof t.removeChild||!(t.attributes instanceof d)||"function"!=typeof t.removeAttribute||"function"!=typeof t.setAttribute||"string"!=typeof t.namespaceURI||"function"!=typeof t.insertBefore)},ve=function(e){return"object"===t(l)?e instanceof l:e&&"object"===t(e)&&"number"==typeof e.nodeType&&"string"==typeof e.nodeName},be=function(t,e,n){pt[t]&&y(pt[t],(function(t){t.call(r,e,n,re)}))},we=function(t){var e;if(be("beforeSanitizeElements",t,null),ye(t))return pe(t),!0;if(A(/[\u0080-\uFFFF]/,t.nodeName))return pe(t),!0;var n=gt(t.nodeName);if(be("uponSanitizeElement",t,{tagName:n,allowedTags:xt}),t.hasChildNodes()&&!ve(t.firstElementChild)&&(!ve(t.content)||!ve(t.content.firstElementChild))&&A(/<[/\w]/g,t.innerHTML)&&A(/<[/\w]/g,t.textContent))return pe(t),!0;if("select"===n&&A(/<template/i,t.innerHTML))return pe(t),!0;if(!xt[n]||It[n]){if(!It[n]&&Ee(n)){if(St.tagNameCheck instanceof RegExp&&A(St.tagNameCheck,n))return!1;if(St.tagNameCheck instanceof Function&&St.tagNameCheck(n))return!1}if(Dt&&!Ht[n]){var o=nt(t)||t.parentNode,i=et(t)||t.childNodes;if(i&&o)for(var s=i.length-1;s>=0;--s)o.insertBefore(X(i[s],!0),tt(t))}return pe(t),!0}return t instanceof u&&!he(t)?(pe(t),!0):"noscript"!==n&&"noembed"!==n||!A(/<\/no(script|embed)/i,t.innerHTML)?(Rt&&3===t.nodeType&&(e=t.textContent,e=E(e,mt," "),e=E(e,yt," "),t.textContent!==e&&(b(r.removed,{element:t.cloneNode()}),t.textContent=e)),be("afterSanitizeElements",t,null),!1):(pe(t),!0)},_e=function(t,e,n){if(Pt&&("id"===e||"name"===e)&&(n in s||n in oe))return!1;if(jt&&!kt[e]&&A(vt,e));else if(Tt&&A(bt,e));else if(!At[e]||kt[e]){if(!(Ee(t)&&(St.tagNameCheck instanceof RegExp&&A(St.tagNameCheck,t)||St.tagNameCheck instanceof Function&&St.tagNameCheck(t))&&(St.attributeNameCheck instanceof RegExp&&A(St.attributeNameCheck,e)||St.attributeNameCheck instanceof Function&&St.attributeNameCheck(e))||"is"===e&&St.allowCustomizedBuiltInElements&&(St.tagNameCheck instanceof RegExp&&A(St.tagNameCheck,n)||St.tagNameCheck instanceof Function&&St.tagNameCheck(n))))return!1}else if(Vt[e]);else if(A(Et,E(n,_t,"")));else if("src"!==e&&"xlink:href"!==e&&"href"!==e||"script"===t||0!==x(n,"data:")||!Gt[t])if(Lt&&!A(wt,E(n,_t,"")));else if(n)return!1;return!0},Ee=function(t){return t.indexOf("-")>0},xe=function(t){var e,n,o,i;be("beforeSanitizeAttributes",t,null);var s=t.attributes;if(s){var a={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:At};for(i=s.length;i--;){var c=e=s[i],l=c.name,u=c.namespaceURI;if(n="value"===l?e.value:C(e.value),o=gt(l),a.attrName=o,a.attrValue=n,a.keepAttr=!0,a.forceKeepAttr=void 0,be("uponSanitizeAttribute",t,a),n=a.attrValue,!a.forceKeepAttr&&(de(l,t),a.keepAttr))if(A(/\/>/i,n))de(l,t);else{Rt&&(n=E(n,mt," "),n=E(n,yt," "));var f=gt(t.nodeName);if(_e(f,o,n))try{u?t.setAttributeNS(u,l,n):t.setAttribute(l,n),v(r.removed)}catch(t){}}}be("afterSanitizeAttributes",t,null)}},Ce=function t(e){var n,r=me(e);for(be("beforeSanitizeShadowDOM",e,null);n=r.nextNode();)be("uponSanitizeShadowNode",n,null),we(n)||(n.content instanceof a&&t(n.content),xe(n));be("afterSanitizeShadowDOM",e,null)};return r.sanitize=function(e,o){var s,c,u,f,h;if((te=!e)&&(e="\x3c!--\x3e"),"string"!=typeof e&&!ve(e)){if("function"!=typeof e.toString)throw O("toString is not a function");if("string"!=typeof(e=e.toString()))throw O("dirty is not a string, aborting")}if(!r.isSupported){if("object"===t(n.toStaticHTML)||"function"==typeof n.toStaticHTML){if("string"==typeof e)return n.toStaticHTML(e);if(ve(e))return n.toStaticHTML(e.outerHTML)}return e}if(Ft||se(o),r.removed=[],"string"==typeof e&&(zt=!1),zt){if(e.nodeName){var p=gt(e.nodeName);if(!xt[p]||It[p])throw O("root node is forbidden and cannot be sanitized in-place")}}else if(e instanceof l)1===(c=(s=ge("\x3c!----\x3e")).ownerDocument.importNode(e,!0)).nodeType&&"BODY"===c.nodeName||"HTML"===c.nodeName?s=c:s.appendChild(c);else{if(!Bt&&!Rt&&!Ut&&-1===e.indexOf("<"))return ot&&$t?ot.createHTML(e):e;if(!(s=ge(e)))return Bt?null:$t?it:""}s&&Mt&&pe(s.firstChild);for(var d=me(zt?e:s);u=d.nextNode();)3===u.nodeType&&u===f||we(u)||(u.content instanceof a&&Ce(u.content),xe(u),f=u);if(f=null,zt)return e;if(Bt){if(Nt)for(h=lt.call(s.ownerDocument);s.firstChild;)h.appendChild(s.firstChild);else h=s;return At.shadowroot&&(h=ft.call(i,h,!0)),h}var g=Ut?s.outerHTML:s.innerHTML;return Ut&&xt["!doctype"]&&s.ownerDocument&&s.ownerDocument.doctype&&s.ownerDocument.doctype.name&&A(Y,s.ownerDocument.doctype.name)&&(g="<!DOCTYPE "+s.ownerDocument.doctype.name+">\n"+g),Rt&&(g=E(g,mt," "),g=E(g,yt," ")),ot&&$t?ot.createHTML(g):g},r.setConfig=function(t){se(t),Ft=!0},r.clearConfig=function(){re=null,Ft=!1},r.isValidAttribute=function(t,e,n){re||se({});var r=gt(t),o=gt(e);return _e(r,o,n)},r.addHook=function(t,e){"function"==typeof e&&(pt[t]=pt[t]||[],b(pt[t],e))},r.removeHook=function(t){if(pt[t])return v(pt[t])},r.removeHooks=function(t){pt[t]&&(pt[t]=[])},r.removeAllHooks=function(){pt={}},r}()}()},729:t=>{var e=Object.prototype.hasOwnProperty,n="~";function r(){}function o(t,e,n){this.fn=t,this.context=e,this.once=n||!1}function i(t,e,r,i,s){if("function"!=typeof r)throw new TypeError("The listener must be a function");var a=new o(r,i||t,s),c=n?n+e:e;return t._events[c]?t._events[c].fn?t._events[c]=[t._events[c],a]:t._events[c].push(a):(t._events[c]=a,t._eventsCount++),t}function s(t,e){0==--t._eventsCount?t._events=new r:delete t._events[e]}function a(){this._events=new r,this._eventsCount=0}Object.create&&(r.prototype=Object.create(null),(new r).__proto__||(n=!1)),a.prototype.eventNames=function(){var t,r,o=[];if(0===this._eventsCount)return o;for(r in t=this._events)e.call(t,r)&&o.push(n?r.slice(1):r);return Object.getOwnPropertySymbols?o.concat(Object.getOwnPropertySymbols(t)):o},a.prototype.listeners=function(t){var e=n?n+t:t,r=this._events[e];if(!r)return[];if(r.fn)return[r.fn];for(var o=0,i=r.length,s=new Array(i);o<i;o++)s[o]=r[o].fn;return s},a.prototype.listenerCount=function(t){var e=n?n+t:t,r=this._events[e];return r?r.fn?1:r.length:0},a.prototype.emit=function(t,e,r,o,i,s){var a=n?n+t:t;if(!this._events[a])return!1;var c,l,u=this._events[a],f=arguments.length;if(u.fn){switch(u.once&&this.removeListener(t,u.fn,void 0,!0),f){case 1:return u.fn.call(u.context),!0;case 2:return u.fn.call(u.context,e),!0;case 3:return u.fn.call(u.context,e,r),!0;case 4:return u.fn.call(u.context,e,r,o),!0;case 5:return u.fn.call(u.context,e,r,o,i),!0;case 6:return u.fn.call(u.context,e,r,o,i,s),!0}for(l=1,c=new Array(f-1);l<f;l++)c[l-1]=arguments[l];u.fn.apply(u.context,c)}else{var h,p=u.length;for(l=0;l<p;l++)switch(u[l].once&&this.removeListener(t,u[l].fn,void 0,!0),f){case 1:u[l].fn.call(u[l].context);break;case 2:u[l].fn.call(u[l].context,e);break;case 3:u[l].fn.call(u[l].context,e,r);break;case 4:u[l].fn.call(u[l].context,e,r,o);break;default:if(!c)for(h=1,c=new Array(f-1);h<f;h++)c[h-1]=arguments[h];u[l].fn.apply(u[l].context,c)}}return!0},a.prototype.on=function(t,e,n){return i(this,t,e,n,!1)},a.prototype.once=function(t,e,n){return i(this,t,e,n,!0)},a.prototype.removeListener=function(t,e,r,o){var i=n?n+t:t;if(!this._events[i])return this;if(!e)return s(this,i),this;var a=this._events[i];if(a.fn)a.fn!==e||o&&!a.once||r&&a.context!==r||s(this,i);else{for(var c=0,l=[],u=a.length;c<u;c++)(a[c].fn!==e||o&&!a[c].once||r&&a[c].context!==r)&&l.push(a[c]);l.length?this._events[i]=1===l.length?l[0]:l:s(this,i)}return this},a.prototype.removeAllListeners=function(t){var e;return t?(e=n?n+t:t,this._events[e]&&s(this,e)):(this._events=new r,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=n,a.EventEmitter=a,t.exports=a},717:t=>{"function"==typeof Object.create?t.exports=function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(t,e){t.super_=e;var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t}},824:t=>{var e=1e3,n=60*e,r=60*n,o=24*r;function i(t,e,n,r){var o=e>=1.5*n;return Math.round(t/n)+" "+r+(o?"s":"")}t.exports=function(t,s){s=s||{};var a=typeof t;if("string"===a&&t.length>0)return function(t){if(!((t=String(t)).length>100)){var i=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(t);if(i){var s=parseFloat(i[1]);switch((i[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*s;case"weeks":case"week":case"w":return 6048e5*s;case"days":case"day":case"d":return s*o;case"hours":case"hour":case"hrs":case"hr":case"h":return s*r;case"minutes":case"minute":case"mins":case"min":case"m":return s*n;case"seconds":case"second":case"secs":case"sec":case"s":return s*e;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return s;default:return}}}}(t);if("number"===a&&isFinite(t))return s.long?function(t){var s=Math.abs(t);return s>=o?i(t,s,o,"day"):s>=r?i(t,s,r,"hour"):s>=n?i(t,s,n,"minute"):s>=e?i(t,s,e,"second"):t+" ms"}(t):function(t){var i=Math.abs(t);return i>=o?Math.round(t/o)+"d":i>=r?Math.round(t/r)+"h":i>=n?Math.round(t/n)+"m":i>=e?Math.round(t/e)+"s":t+"ms"}(t);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))}},520:(t,e,n)=>{var r=n(155),o="win32"===r.platform,i=n(539);function s(t,e){for(var n=[],r=0;r<t.length;r++){var o=t[r];o&&"."!==o&&(".."===o?n.length&&".."!==n[n.length-1]?n.pop():e&&n.push(".."):n.push(o))}return n}function a(t){for(var e=t.length-1,n=0;n<=e&&!t[n];n++);for(var r=e;r>=0&&!t[r];r--);return 0===n&&r===e?t:n>r?[]:t.slice(n,r+1)}var c=/^([a-zA-Z]:|[\\\/]{2}[^\\\/]+[\\\/]+[^\\\/]+)?([\\\/])?([\s\S]*?)$/,l=/^([\s\S]*?)((?:\.{1,2}|[^\\\/]+?|)(\.[^.\/\\]*|))(?:[\\\/]*)$/,u={};function f(t){var e=c.exec(t),n=(e[1]||"")+(e[2]||""),r=e[3]||"",o=l.exec(r);return[n,o[1],o[2],o[3]]}function h(t){var e=c.exec(t),n=e[1]||"",r=!!n&&":"!==n[1];return{device:n,isUnc:r,isAbsolute:r||!!e[2],tail:e[3]}}function p(t){return"\\\\"+t.replace(/^[\\\/]+/,"").replace(/[\\\/]+/g,"\\")}u.resolve=function(){for(var t="",e="",n=!1,o=arguments.length-1;o>=-1;o--){var a;if(o>=0?a=arguments[o]:t?(a=r.env["="+t])&&a.substr(0,3).toLowerCase()===t.toLowerCase()+"\\"||(a=t+"\\"):a=r.cwd(),!i.isString(a))throw new TypeError("Arguments to path.resolve must be strings");if(a){var c=h(a),l=c.device,u=c.isUnc,f=c.isAbsolute,d=c.tail;if((!l||!t||l.toLowerCase()===t.toLowerCase())&&(t||(t=l),n||(e=d+"\\"+e,n=f),t&&n))break}}return u&&(t=p(t)),t+(n?"\\":"")+(e=s(e.split(/[\\\/]+/),!n).join("\\"))||"."},u.normalize=function(t){var e=h(t),n=e.device,r=e.isUnc,o=e.isAbsolute,i=e.tail,a=/[\\\/]$/.test(i);return(i=s(i.split(/[\\\/]+/),!o).join("\\"))||o||(i="."),i&&a&&(i+="\\"),r&&(n=p(n)),n+(o?"\\":"")+i},u.isAbsolute=function(t){return h(t).isAbsolute},u.join=function(){for(var t=[],e=0;e<arguments.length;e++){var n=arguments[e];if(!i.isString(n))throw new TypeError("Arguments to path.join must be strings");n&&t.push(n)}var r=t.join("\\");return/^[\\\/]{2}[^\\\/]/.test(t[0])||(r=r.replace(/^[\\\/]{2,}/,"\\")),u.normalize(r)},u.relative=function(t,e){t=u.resolve(t),e=u.resolve(e);for(var n=t.toLowerCase(),r=e.toLowerCase(),o=a(e.split("\\")),i=a(n.split("\\")),s=a(r.split("\\")),c=Math.min(i.length,s.length),l=c,f=0;f<c;f++)if(i[f]!==s[f]){l=f;break}if(0==l)return e;var h=[];for(f=l;f<i.length;f++)h.push("..");return(h=h.concat(o.slice(l))).join("\\")},u._makeLong=function(t){if(!i.isString(t))return t;if(!t)return"";var e=u.resolve(t);return/^[a-zA-Z]\:\\/.test(e)?"\\\\?\\"+e:/^\\\\[^?.]/.test(e)?"\\\\?\\UNC\\"+e.substring(2):t},u.dirname=function(t){var e=f(t),n=e[0],r=e[1];return n||r?(r&&(r=r.substr(0,r.length-1)),n+r):"."},u.basename=function(t,e){var n=f(t)[2];return e&&n.substr(-1*e.length)===e&&(n=n.substr(0,n.length-e.length)),n},u.extname=function(t){return f(t)[3]},u.format=function(t){if(!i.isObject(t))throw new TypeError("Parameter 'pathObject' must be an object, not "+typeof t);var e=t.root||"";if(!i.isString(e))throw new TypeError("'pathObject.root' must be a string or undefined, not "+typeof t.root);var n=t.dir,r=t.base||"";return n?n[n.length-1]===u.sep?n+r:n+u.sep+r:r},u.parse=function(t){if(!i.isString(t))throw new TypeError("Parameter 'pathString' must be a string, not "+typeof t);var e=f(t);if(!e||4!==e.length)throw new TypeError("Invalid path '"+t+"'");return{root:e[0],dir:e[0]+e[1].slice(0,-1),base:e[2],ext:e[3],name:e[2].slice(0,e[2].length-e[3].length)}},u.sep="\\",u.delimiter=";";var d=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,g={};function m(t){return d.exec(t).slice(1)}g.resolve=function(){for(var t="",e=!1,n=arguments.length-1;n>=-1&&!e;n--){var o=n>=0?arguments[n]:r.cwd();if(!i.isString(o))throw new TypeError("Arguments to path.resolve must be strings");o&&(t=o+"/"+t,e="/"===o[0])}return(e?"/":"")+(t=s(t.split("/"),!e).join("/"))||"."},g.normalize=function(t){var e=g.isAbsolute(t),n=t&&"/"===t[t.length-1];return(t=s(t.split("/"),!e).join("/"))||e||(t="."),t&&n&&(t+="/"),(e?"/":"")+t},g.isAbsolute=function(t){return"/"===t.charAt(0)},g.join=function(){for(var t="",e=0;e<arguments.length;e++){var n=arguments[e];if(!i.isString(n))throw new TypeError("Arguments to path.join must be strings");n&&(t+=t?"/"+n:n)}return g.normalize(t)},g.relative=function(t,e){t=g.resolve(t).substr(1),e=g.resolve(e).substr(1);for(var n=a(t.split("/")),r=a(e.split("/")),o=Math.min(n.length,r.length),i=o,s=0;s<o;s++)if(n[s]!==r[s]){i=s;break}var c=[];for(s=i;s<n.length;s++)c.push("..");return(c=c.concat(r.slice(i))).join("/")},g._makeLong=function(t){return t},g.dirname=function(t){var e=m(t),n=e[0],r=e[1];return n||r?(r&&(r=r.substr(0,r.length-1)),n+r):"."},g.basename=function(t,e){var n=m(t)[2];return e&&n.substr(-1*e.length)===e&&(n=n.substr(0,n.length-e.length)),n},g.extname=function(t){return m(t)[3]},g.format=function(t){if(!i.isObject(t))throw new TypeError("Parameter 'pathObject' must be an object, not "+typeof t);var e=t.root||"";if(!i.isString(e))throw new TypeError("'pathObject.root' must be a string or undefined, not "+typeof t.root);return(t.dir?t.dir+g.sep:"")+(t.base||"")},g.parse=function(t){if(!i.isString(t))throw new TypeError("Parameter 'pathString' must be a string, not "+typeof t);var e=m(t);if(!e||4!==e.length)throw new TypeError("Invalid path '"+t+"'");return e[1]=e[1]||"",e[2]=e[2]||"",e[3]=e[3]||"",{root:e[0],dir:e[0]+e[1].slice(0,-1),base:e[2],ext:e[3],name:e[2].slice(0,e[2].length-e[3].length)}},g.sep="/",g.delimiter=":",t.exports=o?u:g,t.exports.posix=g,t.exports.win32=u},155:t=>{var e,n,r=t.exports={};function o(){throw new Error("setTimeout has not been defined")}function i(){throw new Error("clearTimeout has not been defined")}function s(t){if(e===setTimeout)return setTimeout(t,0);if((e===o||!e)&&setTimeout)return e=setTimeout,setTimeout(t,0);try{return e(t,0)}catch(n){try{return e.call(null,t,0)}catch(n){return e.call(this,t,0)}}}!function(){try{e="function"==typeof setTimeout?setTimeout:o}catch(t){e=o}try{n="function"==typeof clearTimeout?clearTimeout:i}catch(t){n=i}}();var a,c=[],l=!1,u=-1;function f(){l&&a&&(l=!1,a.length?c=a.concat(c):u=-1,c.length&&h())}function h(){if(!l){var t=s(f);l=!0;for(var e=c.length;e;){for(a=c,c=[];++u<e;)a&&a[u].run();u=-1,e=c.length}a=null,l=!1,function(t){if(n===clearTimeout)return clearTimeout(t);if((n===i||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(t);try{n(t)}catch(e){try{return n.call(null,t)}catch(e){return n.call(this,t)}}}(t)}}function p(t,e){this.fun=t,this.array=e}function d(){}r.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];c.push(new p(t,e)),1!==c.length||l||s(h)},p.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={},r.on=d,r.addListener=d,r.once=d,r.off=d,r.removeListener=d,r.removeAllListeners=d,r.emit=d,r.prependListener=d,r.prependOnceListener=d,r.listeners=function(t){return[]},r.binding=function(t){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(t){throw new Error("process.chdir is not supported")},r.umask=function(){return 0}},384:t=>{t.exports=function(t){return t&&"object"==typeof t&&"function"==typeof t.copy&&"function"==typeof t.fill&&"function"==typeof t.readUInt8}},539:(t,e,n)=>{var r=n(155),o=/%[sdj%]/g;e.format=function(t){if(!y(t)){for(var e=[],n=0;n<arguments.length;n++)e.push(a(arguments[n]));return e.join(" ")}n=1;for(var r=arguments,i=r.length,s=String(t).replace(o,(function(t){if("%%"===t)return"%";if(n>=i)return t;switch(t){case"%s":return String(r[n++]);case"%d":return Number(r[n++]);case"%j":try{return JSON.stringify(r[n++])}catch(t){return"[Circular]"}default:return t}})),c=r[n];n<i;c=r[++n])g(c)||!w(c)?s+=" "+c:s+=" "+a(c);return s},e.deprecate=function(t,o){if(v(n.g.process))return function(){return e.deprecate(t,o).apply(this,arguments)};if(!0===r.noDeprecation)return t;var i=!1;return function(){if(!i){if(r.throwDeprecation)throw new Error(o);r.traceDeprecation?console.trace(o):console.error(o),i=!0}return t.apply(this,arguments)}};var i,s={};function a(t,n){var r={seen:[],stylize:l};return arguments.length>=3&&(r.depth=arguments[2]),arguments.length>=4&&(r.colors=arguments[3]),d(n)?r.showHidden=n:n&&e._extend(r,n),v(r.showHidden)&&(r.showHidden=!1),v(r.depth)&&(r.depth=2),v(r.colors)&&(r.colors=!1),v(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=c),u(r,t,r.depth)}function c(t,e){var n=a.styles[e];return n?"["+a.colors[n][0]+"m"+t+"["+a.colors[n][1]+"m":t}function l(t,e){return t}function u(t,n,r){if(t.customInspect&&n&&x(n.inspect)&&n.inspect!==e.inspect&&(!n.constructor||n.constructor.prototype!==n)){var o=n.inspect(r,t);return y(o)||(o=u(t,o,r)),o}var i=function(t,e){if(v(e))return t.stylize("undefined","undefined");if(y(e)){var n="'"+JSON.stringify(e).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return t.stylize(n,"string")}return m(e)?t.stylize(""+e,"number"):d(e)?t.stylize(""+e,"boolean"):g(e)?t.stylize("null","null"):void 0}(t,n);if(i)return i;var s=Object.keys(n),a=function(t){var e={};return t.forEach((function(t,n){e[t]=!0})),e}(s);if(t.showHidden&&(s=Object.getOwnPropertyNames(n)),E(n)&&(s.indexOf("message")>=0||s.indexOf("description")>=0))return f(n);if(0===s.length){if(x(n)){var c=n.name?": "+n.name:"";return t.stylize("[Function"+c+"]","special")}if(b(n))return t.stylize(RegExp.prototype.toString.call(n),"regexp");if(_(n))return t.stylize(Date.prototype.toString.call(n),"date");if(E(n))return f(n)}var l,w="",C=!1,A=["{","}"];return p(n)&&(C=!0,A=["[","]"]),x(n)&&(w=" [Function"+(n.name?": "+n.name:"")+"]"),b(n)&&(w=" "+RegExp.prototype.toString.call(n)),_(n)&&(w=" "+Date.prototype.toUTCString.call(n)),E(n)&&(w=" "+f(n)),0!==s.length||C&&0!=n.length?r<0?b(n)?t.stylize(RegExp.prototype.toString.call(n),"regexp"):t.stylize("[Object]","special"):(t.seen.push(n),l=C?function(t,e,n,r,o){for(var i=[],s=0,a=e.length;s<a;++s)I(e,String(s))?i.push(h(t,e,n,r,String(s),!0)):i.push("");return o.forEach((function(o){o.match(/^\d+$/)||i.push(h(t,e,n,r,o,!0))})),i}(t,n,r,a,s):s.map((function(e){return h(t,n,r,a,e,C)})),t.seen.pop(),function(t,e,n){return t.reduce((function(t,e){return e.indexOf("\n"),t+e.replace(/\u001b\[\d\d?m/g,"").length+1}),0)>60?n[0]+(""===e?"":e+"\n ")+" "+t.join(",\n  ")+" "+n[1]:n[0]+e+" "+t.join(", ")+" "+n[1]}(l,w,A)):A[0]+w+A[1]}function f(t){return"["+Error.prototype.toString.call(t)+"]"}function h(t,e,n,r,o,i){var s,a,c;if((c=Object.getOwnPropertyDescriptor(e,o)||{value:e[o]}).get?a=c.set?t.stylize("[Getter/Setter]","special"):t.stylize("[Getter]","special"):c.set&&(a=t.stylize("[Setter]","special")),I(r,o)||(s="["+o+"]"),a||(t.seen.indexOf(c.value)<0?(a=g(n)?u(t,c.value,null):u(t,c.value,n-1)).indexOf("\n")>-1&&(a=i?a.split("\n").map((function(t){return"  "+t})).join("\n").substr(2):"\n"+a.split("\n").map((function(t){return"   "+t})).join("\n")):a=t.stylize("[Circular]","special")),v(s)){if(i&&o.match(/^\d+$/))return a;(s=JSON.stringify(""+o)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(s=s.substr(1,s.length-2),s=t.stylize(s,"name")):(s=s.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),s=t.stylize(s,"string"))}return s+": "+a}function p(t){return Array.isArray(t)}function d(t){return"boolean"==typeof t}function g(t){return null===t}function m(t){return"number"==typeof t}function y(t){return"string"==typeof t}function v(t){return void 0===t}function b(t){return w(t)&&"[object RegExp]"===C(t)}function w(t){return"object"==typeof t&&null!==t}function _(t){return w(t)&&"[object Date]"===C(t)}function E(t){return w(t)&&("[object Error]"===C(t)||t instanceof Error)}function x(t){return"function"==typeof t}function C(t){return Object.prototype.toString.call(t)}function A(t){return t<10?"0"+t.toString(10):t.toString(10)}e.debuglog=function(t){if(v(i)&&(i=r.env.NODE_DEBUG||""),t=t.toUpperCase(),!s[t])if(new RegExp("\\b"+t+"\\b","i").test(i)){var n=r.pid;s[t]=function(){var r=e.format.apply(e,arguments);console.error("%s %d: %s",t,n,r)}}else s[t]=function(){};return s[t]},e.inspect=a,a.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},a.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},e.isArray=p,e.isBoolean=d,e.isNull=g,e.isNullOrUndefined=function(t){return null==t},e.isNumber=m,e.isString=y,e.isSymbol=function(t){return"symbol"==typeof t},e.isUndefined=v,e.isRegExp=b,e.isObject=w,e.isDate=_,e.isError=E,e.isFunction=x,e.isPrimitive=function(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||void 0===t},e.isBuffer=n(384);var O=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function S(){var t=new Date,e=[A(t.getHours()),A(t.getMinutes()),A(t.getSeconds())].join(":");return[t.getDate(),O[t.getMonth()],e].join(" ")}function I(t,e){return Object.prototype.hasOwnProperty.call(t,e)}e.log=function(){console.log("%s - %s",S(),e.format.apply(e,arguments))},e.inherits=n(717),e._extend=function(t,e){if(!e||!w(e))return t;for(var n=Object.keys(e),r=n.length;r--;)t[n[r]]=e[n[r]];return t}}},o={};function i(t){var e=o[t];if(void 0!==e)return e.exports;var n=o[t]={exports:{}};return r[t].call(n.exports,n,n.exports,i),n.exports}i.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return i.d(e,{a:e}),e},i.d=(t,e)=>{for(var n in e)i.o(e,n)&&!i.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},i.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),i.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),i.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};var s={};return(()=>{i.r(s),i.d(s,{LSPluginUser:()=>wr,setupPluginUserInstance:()=>_r});var r=i(520);i(856);const o=function(t,e){return t===e||t!=t&&e!=e},a=function(t,e){for(var n=t.length;n--;)if(o(t[n][0],e))return n;return-1};var c=Array.prototype.splice;function l(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}l.prototype.clear=function(){this.__data__=[],this.size=0},l.prototype.delete=function(t){var e=this.__data__,n=a(e,t);return!(n<0||(n==e.length-1?e.pop():c.call(e,n,1),--this.size,0))},l.prototype.get=function(t){var e=this.__data__,n=a(e,t);return n<0?void 0:e[n][1]},l.prototype.has=function(t){return a(this.__data__,t)>-1},l.prototype.set=function(t,e){var n=this.__data__,r=a(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this};const u=l,f="object"==typeof t&&t&&t.Object===Object&&t;var h="object"==typeof self&&self&&self.Object===Object&&self;const p=f||h||Function("return this")(),d=p.Symbol;var g=Object.prototype,m=g.hasOwnProperty,y=g.toString,v=d?d.toStringTag:void 0,b=Object.prototype.toString,w=d?d.toStringTag:void 0;const _=function(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":w&&w in Object(t)?function(t){var e=m.call(t,v),n=t[v];try{t[v]=void 0;var r=!0}catch(t){}var o=y.call(t);return r&&(e?t[v]=n:delete t[v]),o}(t):function(t){return b.call(t)}(t)},E=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)},x=function(t){if(!E(t))return!1;var e=_(t);return"[object Function]"==e||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e},C=p["__core-js_shared__"];var A,O=(A=/[^.]+$/.exec(C&&C.keys&&C.keys.IE_PROTO||""))?"Symbol(src)_1."+A:"",S=Function.prototype.toString;const I=function(t){if(null!=t){try{return S.call(t)}catch(t){}try{return t+""}catch(t){}}return""};var k=/^\[object .+?Constructor\]$/,T=Function.prototype,j=Object.prototype,L=T.toString,R=j.hasOwnProperty,U=RegExp("^"+L.call(R).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");const F=function(t){return!(!E(t)||function(t){return!!O&&O in t}(t))&&(x(t)?U:k).test(I(t))},M=function(t,e){var n=function(t,e){return null==t?void 0:t[e]}(t,e);return F(n)?n:void 0},B=M(p,"Map"),N=M(Object,"create");var $=Object.prototype.hasOwnProperty,P=Object.prototype.hasOwnProperty;function D(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}D.prototype.clear=function(){this.__data__=N?N(null):{},this.size=0},D.prototype.delete=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},D.prototype.get=function(t){var e=this.__data__;if(N){var n=e[t];return"__lodash_hash_undefined__"===n?void 0:n}return $.call(e,t)?e[t]:void 0},D.prototype.has=function(t){var e=this.__data__;return N?void 0!==e[t]:P.call(e,t)},D.prototype.set=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=N&&void 0===e?"__lodash_hash_undefined__":e,this};const z=D,q=function(t,e){var n=t.__data__;return function(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}(e)?n["string"==typeof e?"string":"hash"]:n.map};function H(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}H.prototype.clear=function(){this.size=0,this.__data__={hash:new z,map:new(B||u),string:new z}},H.prototype.delete=function(t){var e=q(this,t).delete(t);return this.size-=e?1:0,e},H.prototype.get=function(t){return q(this,t).get(t)},H.prototype.has=function(t){return q(this,t).has(t)},H.prototype.set=function(t,e){var n=q(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this};const W=H;function G(t){var e=this.__data__=new u(t);this.size=e.size}G.prototype.clear=function(){this.__data__=new u,this.size=0},G.prototype.delete=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n},G.prototype.get=function(t){return this.__data__.get(t)},G.prototype.has=function(t){return this.__data__.has(t)},G.prototype.set=function(t,e){var n=this.__data__;if(n instanceof u){var r=n.__data__;if(!B||r.length<199)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new W(r)}return n.set(t,e),this.size=n.size,this};const J=G,V=function(){try{var t=M(Object,"defineProperty");return t({},"",{}),t}catch(t){}}(),Y=function(t,e,n){"__proto__"==e&&V?V(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n},Z=function(t,e,n){(void 0!==n&&!o(t[e],n)||void 0===n&&!(e in t))&&Y(t,e,n)},K=function(t,e,n){for(var r=-1,o=Object(t),i=n(t),s=i.length;s--;){var a=i[++r];if(!1===e(o[a],a,o))break}return t};var Q=n&&!n.nodeType&&n,X=Q&&e&&!e.nodeType&&e,tt=X&&X.exports===Q?p.Buffer:void 0,et=tt?tt.allocUnsafe:void 0;const nt=p.Uint8Array,rt=function(t,e){var n=e?function(t){var e=new t.constructor(t.byteLength);return new nt(e).set(new nt(t)),e}(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)};var ot=Object.create;const it=function(){function t(){}return function(e){if(!E(e))return{};if(ot)return ot(e);t.prototype=e;var n=new t;return t.prototype=void 0,n}}(),st=function(t,e){return function(n){return t(e(n))}},at=st(Object.getPrototypeOf,Object);var ct=Object.prototype;const lt=function(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||ct)},ut=function(t){return null!=t&&"object"==typeof t},ft=function(t){return ut(t)&&"[object Arguments]"==_(t)};var ht=Object.prototype,pt=ht.hasOwnProperty,dt=ht.propertyIsEnumerable;const gt=ft(function(){return arguments}())?ft:function(t){return ut(t)&&pt.call(t,"callee")&&!dt.call(t,"callee")},mt=Array.isArray,yt=function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=9007199254740991},vt=function(t){return null!=t&&yt(t.length)&&!x(t)};var bt=n&&!n.nodeType&&n,wt=bt&&e&&!e.nodeType&&e,_t=wt&&wt.exports===bt?p.Buffer:void 0;const Et=(_t?_t.isBuffer:void 0)||function(){return!1};var xt=Function.prototype,Ct=Object.prototype,At=xt.toString,Ot=Ct.hasOwnProperty,St=At.call(Object),It={};It["[object Float32Array]"]=It["[object Float64Array]"]=It["[object Int8Array]"]=It["[object Int16Array]"]=It["[object Int32Array]"]=It["[object Uint8Array]"]=It["[object Uint8ClampedArray]"]=It["[object Uint16Array]"]=It["[object Uint32Array]"]=!0,It["[object Arguments]"]=It["[object Array]"]=It["[object ArrayBuffer]"]=It["[object Boolean]"]=It["[object DataView]"]=It["[object Date]"]=It["[object Error]"]=It["[object Function]"]=It["[object Map]"]=It["[object Number]"]=It["[object Object]"]=It["[object RegExp]"]=It["[object Set]"]=It["[object String]"]=It["[object WeakMap]"]=!1;var kt=n&&!n.nodeType&&n,Tt=kt&&e&&!e.nodeType&&e,jt=Tt&&Tt.exports===kt&&f.process,Lt=function(){try{return Tt&&Tt.require&&Tt.require("util").types||jt&&jt.binding&&jt.binding("util")}catch(t){}}(),Rt=Lt&&Lt.isTypedArray;const Ut=Rt?function(t){return function(e){return t(e)}}(Rt):function(t){return ut(t)&&yt(t.length)&&!!It[_(t)]},Ft=function(t,e){if(("constructor"!==e||"function"!=typeof t[e])&&"__proto__"!=e)return t[e]};var Mt=Object.prototype.hasOwnProperty;const Bt=function(t,e,n){var r=t[e];Mt.call(t,e)&&o(r,n)&&(void 0!==n||e in t)||Y(t,e,n)};var Nt=/^(?:0|[1-9]\d*)$/;const $t=function(t,e){var n=typeof t;return!!(e=null==e?9007199254740991:e)&&("number"==n||"symbol"!=n&&Nt.test(t))&&t>-1&&t%1==0&&t<e};var Pt=Object.prototype.hasOwnProperty;const Dt=function(t,e){var n=mt(t),r=!n&&gt(t),o=!n&&!r&&Et(t),i=!n&&!r&&!o&&Ut(t),s=n||r||o||i,a=s?function(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}(t.length,String):[],c=a.length;for(var l in t)!e&&!Pt.call(t,l)||s&&("length"==l||o&&("offset"==l||"parent"==l)||i&&("buffer"==l||"byteLength"==l||"byteOffset"==l)||$t(l,c))||a.push(l);return a};var zt=Object.prototype.hasOwnProperty;const qt=function(t){if(!E(t))return function(t){var e=[];if(null!=t)for(var n in Object(t))e.push(n);return e}(t);var e=lt(t),n=[];for(var r in t)("constructor"!=r||!e&&zt.call(t,r))&&n.push(r);return n},Ht=function(t){return vt(t)?Dt(t,!0):qt(t)},Wt=function(t){return function(t,e,n,r){var o=!n;n||(n={});for(var i=-1,s=e.length;++i<s;){var a=e[i],c=r?r(n[a],t[a],a,n,t):void 0;void 0===c&&(c=t[a]),o?Y(n,a,c):Bt(n,a,c)}return n}(t,Ht(t))},Gt=function(t,e,n,r,o,i,s){var a=Ft(t,n),c=Ft(e,n),l=s.get(c);if(l)Z(t,n,l);else{var u=i?i(a,c,n+"",t,e,s):void 0,f=void 0===u;if(f){var h=mt(c),p=!h&&Et(c),d=!h&&!p&&Ut(c);u=c,h||p||d?mt(a)?u=a:function(t){return ut(t)&&vt(t)}(a)?u=function(t,e){var n=-1,r=t.length;for(e||(e=Array(r));++n<r;)e[n]=t[n];return e}(a):p?(f=!1,u=function(t,e){if(e)return t.slice();var n=t.length,r=et?et(n):new t.constructor(n);return t.copy(r),r}(c,!0)):d?(f=!1,u=rt(c,!0)):u=[]:function(t){if(!ut(t)||"[object Object]"!=_(t))return!1;var e=at(t);if(null===e)return!0;var n=Ot.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&At.call(n)==St}(c)||gt(c)?(u=a,gt(a)?u=Wt(a):E(a)&&!x(a)||(u=function(t){return"function"!=typeof t.constructor||lt(t)?{}:it(at(t))}(c))):f=!1}f&&(s.set(c,u),o(u,c,r,i,s),s.delete(c)),Z(t,n,u)}},Jt=function t(e,n,r,o,i){e!==n&&K(n,(function(s,a){if(i||(i=new J),E(s))Gt(e,n,a,r,t,o,i);else{var c=o?o(Ft(e,a),s,a+"",e,n,i):void 0;void 0===c&&(c=s),Z(e,a,c)}}),Ht)},Vt=function(t){return t},Yt=function(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)};var Zt=Math.max;const Kt=function(t){return function(){return t}},Qt=V?function(t,e){return V(t,"toString",{configurable:!0,enumerable:!1,value:Kt(e),writable:!0})}:Vt;var Xt=Date.now;const te=function(t){var e=0,n=0;return function(){var r=Xt(),o=16-(r-n);if(n=r,o>0){if(++e>=800)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}(Qt),ee=function(t,e){return te(function(t,e,n){return e=Zt(void 0===e?t.length-1:e,0),function(){for(var r=arguments,o=-1,i=Zt(r.length-e,0),s=Array(i);++o<i;)s[o]=r[e+o];o=-1;for(var a=Array(e+1);++o<e;)a[o]=r[o];return a[e]=n(s),Yt(t,this,a)}}(t,e,Vt),t+"")},ne=function(t,e,n){if(!E(n))return!1;var r=typeof e;return!!("number"==r?vt(n)&&$t(e,n.length):"string"==r&&e in n)&&o(n[e],t)},re=function(t){return ee((function(e,n){var r=-1,o=n.length,i=o>1?n[o-1]:void 0,s=o>2?n[2]:void 0;for(i=t.length>3&&"function"==typeof i?(o--,i):void 0,s&&ne(n[0],n[1],s)&&(i=o<3?void 0:i,o=1),e=Object(e);++r<o;){var a=n[r];a&&t(e,a,r)}return e}))}((function(t,e,n){Jt(t,e,n)}));var oe=function(){return oe=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},oe.apply(this,arguments)};function ie(t){return t.toLowerCase()}Object.create,Object.create;var se=[/([a-z0-9])([A-Z])/g,/([A-Z])([A-Z][a-z])/g],ae=/[^A-Z0-9]+/gi;function ce(t,e,n){return e instanceof RegExp?t.replace(e,n):e.reduce((function(t,e){return t.replace(e,n)}),t)}var le=i(729),ue=i.n(le);function fe(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}const he="win32"===navigator.platform.toLowerCase()?r.win32:r.posix,pe=function(t,e){return void 0===e&&(e={}),function(t,e){return void 0===e&&(e={}),function(t,e){void 0===e&&(e={});for(var n=e.splitRegexp,r=void 0===n?se:n,o=e.stripRegexp,i=void 0===o?ae:o,s=e.transform,a=void 0===s?ie:s,c=e.delimiter,l=void 0===c?" ":c,u=ce(ce(t,r,"$1\0$2"),i,"\0"),f=0,h=u.length;"\0"===u.charAt(f);)f++;for(;"\0"===u.charAt(h-1);)h--;return u.slice(f,h).split("\0").map(a).join(l)}(t,oe({delimiter:"."},e))}(t,oe({delimiter:"_"},e))},de=re;class ge extends(ue()){constructor(t,e){super(),fe(this,"_tag",void 0),fe(this,"_opts",void 0),fe(this,"_logs",[]),this._tag=t,this._opts=e}write(t,e,n){var r;null!=e&&e.length&&!0===e[e.length-1]&&(n=!0,e.pop());const o=e.reduce(((t,e)=>(e&&e instanceof Error?t+=`${e.message} ${e.stack}`:t+=e.toString(),t)),`[${this._tag}][${(new Date).toLocaleTimeString()}] `);var i;this._logs.push([t,o]),(n||null!==(r=this._opts)&&void 0!==r&&r.console)&&(null===(i=console)||void 0===i||i["ERROR"===t?"error":"debug"](`${t}: ${o}`)),this.emit("change")}clear(){this._logs=[],this.emit("change")}info(...t){this.write("INFO",t)}error(...t){this.write("ERROR",t)}warn(...t){this.write("WARN",t)}setTag(t){this._tag=t}toJSON(){return this._logs}}function me(t,e){let n,r,o=!1;const i=e=>n=>{t&&clearTimeout(t),e(n),o=!0},s=new Promise(((o,s)=>{n=i(o),r=i(s),t&&(t=setTimeout((()=>r(new Error(`[deferred timeout] ${e}`))),t))}));return{created:Date.now(),setTag:t=>e=t,resolve:n,reject:r,promise:s,get settled(){return o}}}const ye=new Map;window.__injectedUIEffects=ye;var ve=i(227),be=i.n(ve);function we(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}const _e="application/x-postmate-v1+json";let Ee=0;const xe={handshake:1,"handshake-reply":1,call:1,emit:1,reply:1,request:1},Ce=(t,e)=>!("string"==typeof e&&t.origin!==e||!t.data||"object"==typeof t.data&&!("postmate"in t.data)||t.data.type!==_e||!xe[t.data.postmate]);class Ae{constructor(t){we(this,"parent",void 0),we(this,"frame",void 0),we(this,"child",void 0),we(this,"events",{}),we(this,"childOrigin",void 0),we(this,"listener",void 0),this.parent=t.parent,this.frame=t.frame,this.child=t.child,this.childOrigin=t.childOrigin,this.listener=t=>{if(!Ce(t,this.childOrigin))return!1;const{data:e,name:n}=((t||{}).data||{}).value||{};"emit"===t.data.postmate&&n in this.events&&this.events[n].forEach((t=>{t.call(this,e)}))},this.parent.addEventListener("message",this.listener,!1)}get(t,...e){return new Promise((n=>{const r=++Ee,o=t=>{t.data.uid===r&&"reply"===t.data.postmate&&(this.parent.removeEventListener("message",o,!1),n(t.data.value))};this.parent.addEventListener("message",o,!1),this.child.postMessage({postmate:"request",type:_e,property:t,args:e,uid:r},this.childOrigin)}))}call(t,e){this.child.postMessage({postmate:"call",type:_e,property:t,data:e},this.childOrigin)}on(t,e){this.events[t]||(this.events[t]=[]),this.events[t].push(e)}destroy(){window.removeEventListener("message",this.listener,!1),this.frame.parentNode.removeChild(this.frame)}}class Oe{constructor(t){we(this,"model",void 0),we(this,"parent",void 0),we(this,"parentOrigin",void 0),we(this,"child",void 0),this.model=t.model,this.parent=t.parent,this.parentOrigin=t.parentOrigin,this.child=t.child,this.child.addEventListener("message",(t=>{if(!Ce(t,this.parentOrigin))return;const{property:e,uid:n,data:r,args:o}=t.data;"call"!==t.data.postmate?((t,e,n)=>{const r="function"==typeof t[e]?t[e].apply(null,n):t[e];return Promise.resolve(r)})(this.model,e,o).then((r=>{t.source.postMessage({property:e,postmate:"reply",type:_e,uid:n,value:r},t.origin)})):e in this.model&&"function"==typeof this.model[e]&&this.model[e](r)}))}emit(t,e){this.parent.postMessage({postmate:"emit",type:_e,value:{name:t,data:e}},this.parentOrigin)}}class Se{constructor(t){we(this,"container",void 0),we(this,"parent",void 0),we(this,"frame",void 0),we(this,"child",void 0),we(this,"childOrigin",void 0),we(this,"url",void 0),we(this,"model",void 0),this.container=t.container,this.url=t.url,this.parent=window,this.frame=document.createElement("iframe"),t.id&&(this.frame.id=t.id),t.name&&(this.frame.name=t.name),this.frame.classList.add.apply(this.frame.classList,t.classListArray||[]),this.container.appendChild(this.frame),this.child=this.frame.contentWindow,this.model=t.model||{}}sendHandshake(t){const e=(t=>{const e=document.createElement("a");e.href=t;const n=e.protocol.length>4?e.protocol:window.location.protocol,r=e.host.length?"80"===e.port||"443"===e.port?e.hostname:e.host:window.location.host;return e.origin||`${n}//${r}`})(t=t||this.url);let n,r=0;return new Promise(((o,i)=>{const s=t=>!!Ce(t,e)&&("handshake-reply"===t.data.postmate?(clearInterval(n),this.parent.removeEventListener("message",s,!1),this.childOrigin=t.origin,o(new Ae(this))):i("Failed handshake"));this.parent.addEventListener("message",s,!1);const a=()=>{r++,this.child.postMessage({postmate:"handshake",type:_e,model:this.model},e),5===r&&clearInterval(n)};this.frame.addEventListener("load",(()=>{a(),n=setInterval(a,500)})),this.frame.src=t}))}destroy(){this.frame.parentNode.removeChild(this.frame)}}we(Se,"debug",!1),we(Se,"Model",void 0);class Ie{constructor(t){we(this,"child",void 0),we(this,"model",void 0),we(this,"parent",void 0),we(this,"parentOrigin",void 0),this.child=window,this.model=t,this.parent=this.child.parent}sendHandshakeReply(){return new Promise(((t,e)=>{const n=r=>{if(r.data.postmate){if("handshake"===r.data.postmate){this.child.removeEventListener("message",n,!1),r.source.postMessage({postmate:"handshake-reply",type:_e},r.origin),this.parentOrigin=r.origin;const e=r.data.model;return e&&Object.keys(e).forEach((t=>{this.model[t]=e[t]})),t(new Oe(this))}return e("Handshake Reply Failed")}};this.child.addEventListener("message",n,!1)}))}}function ke(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}const{importHTML:Te,createSandboxContainer:je}=window.QSandbox||{};function Le(t,e){return t.startsWith("http")?fetch(t,e):(t=t.replace("file://",""),new Promise((async(e,n)=>{try{const n=await window.apis.doAction(["readFile",t]);e({text:()=>n})}catch(t){console.error(t),n(t)}})))}class Re extends(ue()){constructor(t){super(),ke(this,"_pluginLocal",void 0),ke(this,"_frame",void 0),ke(this,"_root",void 0),ke(this,"_loaded",!1),ke(this,"_unmountFns",[]),this._pluginLocal=t,t._dispose((()=>{this._unmount()}))}async load(){const{name:t,entry:e}=this._pluginLocal.options;if(this.loaded||!e)return;const{template:n,execScripts:r}=await Te(e,{fetch:Le});this._mount(n,document.body);const o=je(t,{elementGetter:()=>{var t;return null===(t=this._root)||void 0===t?void 0:t.firstChild}}).instance.proxy;o.__shadow_mode__=!0,o.LSPluginLocal=this._pluginLocal,o.LSPluginShadow=this,o.LSPluginUser=o.logseq=new wr(this._pluginLocal.toJSON(),this._pluginLocal.caller);const i=await r(o,!0);this._unmountFns.push(i.unmount),this._loaded=!0}_mount(t,e){const n=this._frame=document.createElement("div");n.classList.add("lsp-shadow-sandbox"),n.id=this._pluginLocal.id,this._root=n.attachShadow({mode:"open"}),this._root.innerHTML=`<div>${t}</div>`,e.appendChild(n),this.emit("mounted")}_unmount(){for(const t of this._unmountFns)t&&t.call(null)}destroy(){var t,e;null===(t=this.frame)||void 0===t||null===(e=t.parentNode)||void 0===e||e.removeChild(this.frame)}get loaded(){return this._loaded}get document(){var t;return null===(t=this._root)||void 0===t?void 0:t.firstChild}get frame(){return this._frame}}function Ue(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}const Fe=be()("LSPlugin:caller"),Me="#await#response#",Be="#lspmsg#error#",Ne=t=>`#lspmsg#${t}`;class $e extends(ue()){constructor(t){super(),Ue(this,"_pluginLocal",void 0),Ue(this,"_connected",!1),Ue(this,"_parent",void 0),Ue(this,"_child",void 0),Ue(this,"_shadow",void 0),Ue(this,"_status",void 0),Ue(this,"_userModel",{}),Ue(this,"_call",void 0),Ue(this,"_callUserModel",void 0),Ue(this,"_debugTag",""),this._pluginLocal=t,t&&(this._debugTag=t.debugTag)}async connectToChild(){if(this._connected)return;const{shadow:t}=this._pluginLocal;t?await this._setupShadowSandbox():await this._setupIframeSandbox()}async connectToParent(t={}){if(this._connected)return;const e=this,n=null!=this._pluginLocal;let r=0,o=0;const i=new Map,s=me(6e4),a=this._extendUserModel({"#lspmsg#ready#":async t=>{a[Ne(null==t?void 0:t.pid)]=({type:t,payload:n})=>{Fe(`[host (_call) -> *user] ${this._debugTag}`,t,n),e.emit(t,n)},await s.resolve()},"#lspmsg#beforeunload#":async t=>{const n=me(1e4);e.emit("beforeunload",Object.assign({actor:n},t)),await n.promise},"#lspmsg#settings#":async({type:t,payload:n})=>{e.emit("settings:changed",n)},"#lspmsg#":async({ns:t,type:n,payload:r})=>{Fe(`[host (async) -> *user] ${this._debugTag} ns=${t} type=${n}`,r),t&&t.startsWith("hook")?e.emit(`${t}:${n}`,r):e.emit(n,r)},"#lspmsg#reply#":({_sync:t,result:e})=>{if(Fe(`[sync host -> *user] #${t}`,e),i.has(t)){const n=i.get(t);n&&(null!=e&&e.hasOwnProperty(Be)?n.reject(e[Be]):n.resolve(e),i.delete(t))}},...t});var c;if(n)return await s.promise,JSON.parse(JSON.stringify(null===(c=this._pluginLocal)||void 0===c?void 0:c.toJSON()));const l=new Ie(a).sendHandshakeReply();return this._status="pending",await l.then((t=>{this._child=t,this._connected=!0,this._call=async(e,n={},r)=>{if(r){const t=++o;i.set(t,r),n._sync=t,r.setTag(`async call #${t}`),Fe(`async call #${t}`)}return t.emit(Ne(a.baseInfo.id),{type:e,payload:n}),null==r?void 0:r.promise},this._callUserModel=async(t,e)=>{try{a[t](e)}catch(e){Fe(`[model method] #${t} not existed`)}},r=setInterval((()=>{if(i.size>100)for(const[t,e]of i)e.settled&&i.delete(t)}),18e5)})).finally((()=>{this._status=void 0})),await s.promise,a.baseInfo}async call(t,e={}){var n;return null===(n=this._call)||void 0===n?void 0:n.call(this,t,e)}async callAsync(t,e={}){var n;const r=me(1e4);return null===(n=this._call)||void 0===n?void 0:n.call(this,t,e,r)}async callUserModel(t,...e){var n;return null===(n=this._callUserModel)||void 0===n?void 0:n.apply(this,[t,...e])}async callUserModelAsync(t,...e){var n;return t=`${Me}${t}`,null===(n=this._callUserModel)||void 0===n?void 0:n.apply(this,[t,...e])}async _setupIframeSandbox(){const t=this._pluginLocal,e=t.id,n=`${e}_lsp_main`,r=new URL(t.options.entry);r.searchParams.set("__v__",t.options.version);const o=document.querySelector(`#${n}`);o&&o.parentElement.removeChild(o);const i=document.createElement("div");i.classList.add("lsp-iframe-sandbox-container"),i.id=n,i.dataset.pid=e;try{var s;const t=null===(s=await this._pluginLocal._loadLayoutsData())||void 0===s?void 0:s.$$0;if(t){i.dataset.inited_layout="true";let{width:e,height:n,left:r,top:o,vw:s,vh:a}=t;r=Math.max(r,0),r="number"==typeof s?`${Math.min(100*r/s,99)}%`:`${r}px`,o=Math.max(o,45),o="number"==typeof a?`${Math.min(100*o/a,99)}%`:`${o}px`,Object.assign(i.style,{width:e+"px",height:n+"px",left:r,top:o})}}catch(t){console.error("[Restore Layout Error]",t)}document.body.appendChild(i);const a=new Se({id:e+"_iframe",container:i,url:r.href,classListArray:["lsp-iframe-sandbox"],model:{baseInfo:JSON.parse(JSON.stringify(t.toJSON()))}});let c,l=a.sendHandshake();return this._status="pending",new Promise(((e,n)=>{c=setTimeout((()=>{n(new Error("handshake Timeout")),a.destroy()}),4e3),l.then((n=>{this._parent=n,this._connected=!0,this.emit("connected"),n.on(Ne(t.id),(({type:t,payload:e})=>{var n,r;Fe("[user -> *host] ",t,e),null===(n=this._pluginLocal)||void 0===n||n.emit(t,e||{}),null===(r=this._pluginLocal)||void 0===r||r.caller.emit(t,e||{})})),this._call=async(...e)=>{await n.call(Ne(t.id),{type:e[0],payload:Object.assign(e[1]||{},{$$pid:t.id})})},this._callUserModel=async(t,...e)=>{if(t.startsWith(Me))return await n.get(t.replace(Me,""),...e);n.call(t,null==e?void 0:e[0])},e(null)})).catch((t=>{n(t)})).finally((()=>{clearTimeout(c)}))})).catch((t=>{throw Fe("[iframe sandbox] error",t),t})).finally((()=>{this._status=void 0}))}async _setupShadowSandbox(){const t=this._pluginLocal,e=this._shadow=new Re(t);try{this._status="pending",await e.load(),this._connected=!0,this.emit("connected"),this._call=async(e,n={},r)=>{var o;return r&&(n.actor=r),null===(o=this._pluginLocal)||void 0===o||o.emit(e,Object.assign(n,{$$pid:t.id})),null==r?void 0:r.promise},this._callUserModel=async(...t)=>{var e;let n=t[0];null!==(e=n)&&void 0!==e&&e.startsWith(Me)&&(n=n.replace(Me,""));const r=t[1]||{},o=this._userModel[n];"function"==typeof o&&await o.call(null,r)}}catch(t){throw Fe("[shadow sandbox] error",t),t}finally{this._status=void 0}}_extendUserModel(t){return Object.assign(this._userModel,t)}_getSandboxIframeContainer(){var t;return null===(t=this._parent)||void 0===t?void 0:t.frame.parentNode}_getSandboxShadowContainer(){var t;return null===(t=this._shadow)||void 0===t?void 0:t.frame.parentNode}_getSandboxIframeRoot(){var t;return null===(t=this._parent)||void 0===t?void 0:t.frame}_getSandboxShadowRoot(){var t;return null===(t=this._shadow)||void 0===t?void 0:t.frame}set debugTag(t){this._debugTag=t}async destroy(){var t;let e=null;this._parent&&(e=this._getSandboxIframeContainer(),await this._parent.destroy()),this._shadow&&(e=this._getSandboxShadowContainer(),this._shadow.destroy()),null===(t=e)||void 0===t||t.parentNode.removeChild(e)}}function Pe(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}class De{constructor(t,e){Pe(this,"ctx",void 0),Pe(this,"opts",void 0),this.ctx=t,this.opts=e}get ctxId(){return this.ctx.baseInfo.id}setItem(t,e){var n;return this.ctx.caller.callAsync("api:call",{method:"write-plugin-storage-file",args:[this.ctxId,t,e,null===(n=this.opts)||void 0===n?void 0:n.assets]})}getItem(t){var e;return this.ctx.caller.callAsync("api:call",{method:"read-plugin-storage-file",args:[this.ctxId,t,null===(e=this.opts)||void 0===e?void 0:e.assets]})}removeItem(t){var e;return this.ctx.caller.call("api:call",{method:"unlink-plugin-storage-file",args:[this.ctxId,t,null===(e=this.opts)||void 0===e?void 0:e.assets]})}allKeys(){var t;return this.ctx.caller.callAsync("api:call",{method:"list-plugin-storage-files",args:[this.ctxId,null===(t=this.opts)||void 0===t?void 0:t.assets]})}clear(){var t;return this.ctx.caller.call("api:call",{method:"clear-plugin-storage-files",args:[this.ctxId,null===(t=this.opts)||void 0===t?void 0:t.assets]})}hasItem(t){var e;return this.ctx.caller.callAsync("api:call",{method:"exist-plugin-storage-file",args:[this.ctxId,t,null===(e=this.opts)||void 0===e?void 0:e.assets]})}}class ze{constructor(t){var e;e=void 0,"ctx"in this?Object.defineProperty(this,"ctx",{value:e,enumerable:!0,configurable:!0,writable:!0}):this.ctx=e,this.ctx=t}get React(){return this.ensureHostScope().React}get ReactDOM(){return this.ensureHostScope().ReactDOM}get pluginLocal(){return this.ensureHostScope().LSPluginCore.ensurePlugin(this.ctx.baseInfo.id)}invokeExperMethod(t,...e){var n,r;const o=this.ensureHostScope();return t=null===(n=pe(t))||void 0===n?void 0:n.toLowerCase(),null===(r=o.logseq.api["exper_"+t])||void 0===r?void 0:r.apply(o,e)}async loadScripts(...t){(t=t.map((t=>null!=t&&t.startsWith("http")?t:this.ctx.resolveResourceFullUrl(t)))).unshift(this.ctx.baseInfo.id),await this.invokeExperMethod("loadScripts",...t)}registerFencedCodeRenderer(t,e){return this.ensureHostScope().logseq.api.exper_register_fenced_code_renderer(this.ctx.baseInfo.id,t,e)}registerExtensionsEnhancer(t,e){const n=this.ensureHostScope();return"katex"===t&&n.katex&&e(n.katex).catch(console.error),n.logseq.api.exper_register_extensions_enhancer(this.ctx.baseInfo.id,t,e)}ensureHostScope(){if(window===top)throw new Error("Can not access host scope!");return top}}function qe(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}const He=t=>`task_callback_${t}`;class We{constructor(t,e,n={}){qe(this,"_client",void 0),qe(this,"_requestId",void 0),qe(this,"_requestOptions",void 0),qe(this,"_promise",void 0),qe(this,"_aborted",!1),this._client=t,this._requestId=e,this._requestOptions=n,this._promise=new Promise(((t,e)=>{if(!this._requestId)return e(null);this._client.once(He(this._requestId),(n=>{n&&n instanceof Error?e(n):t(n)}))}));const{success:r,fail:o,final:i}=this._requestOptions;this._promise.then((t=>{null==r||r(t)})).catch((t=>{null==o||o(t)})).finally((()=>{null==i||i()}))}abort(){this._requestOptions.abortable&&!this._aborted&&(this._client.ctx._execCallableAPI("http_request_abort",this._requestId),this._aborted=!0)}get promise(){return this._promise}get client(){return this._client}get requestId(){return this._requestId}}class Ge extends le.EventEmitter{constructor(t){super(),qe(this,"_ctx",void 0),this._ctx=t,this.ctx.caller.on("#lsp#request#callback",(t=>{const e=null==t?void 0:t.requestId;e&&this.emit(He(e),null==t?void 0:t.payload)}))}static createRequestTask(t,e,n){return new We(t,e,n)}async _request(t){const e=this.ctx.baseInfo.id,{success:n,fail:r,final:o,...i}=t,s=this.ctx.Experiments.invokeExperMethod("request",e,i),a=Ge.createRequestTask(this.ctx.Request,s,t);return i.abortable?a:a.promise}get ctx(){return this._ctx}}const Je=st(Object.keys,Object);var Ve=Object.prototype.hasOwnProperty;const Ye=function(t){return vt(t)?Dt(t):function(t){if(!lt(t))return Je(t);var e=[];for(var n in Object(t))Ve.call(t,n)&&"constructor"!=n&&e.push(n);return e}(t)};function Ze(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new W;++e<n;)this.add(t[e])}Ze.prototype.add=Ze.prototype.push=function(t){return this.__data__.set(t,"__lodash_hash_undefined__"),this},Ze.prototype.has=function(t){return this.__data__.has(t)};const Ke=Ze,Qe=function(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1},Xe=function(t,e){return t.has(e)},tn=function(t,e,n,r,o,i){var s=1&n,a=t.length,c=e.length;if(a!=c&&!(s&&c>a))return!1;var l=i.get(t),u=i.get(e);if(l&&u)return l==e&&u==t;var f=-1,h=!0,p=2&n?new Ke:void 0;for(i.set(t,e),i.set(e,t);++f<a;){var d=t[f],g=e[f];if(r)var m=s?r(g,d,f,e,t,i):r(d,g,f,t,e,i);if(void 0!==m){if(m)continue;h=!1;break}if(p){if(!Qe(e,(function(t,e){if(!Xe(p,e)&&(d===t||o(d,t,n,r,i)))return p.push(e)}))){h=!1;break}}else if(d!==g&&!o(d,g,n,r,i)){h=!1;break}}return i.delete(t),i.delete(e),h},en=function(t){var e=-1,n=Array(t.size);return t.forEach((function(t,r){n[++e]=[r,t]})),n},nn=function(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=t})),n};var rn=d?d.prototype:void 0,on=rn?rn.valueOf:void 0;const sn=function(t,e,n,r,i,s,a){switch(n){case"[object DataView]":if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case"[object ArrayBuffer]":return!(t.byteLength!=e.byteLength||!s(new nt(t),new nt(e)));case"[object Boolean]":case"[object Date]":case"[object Number]":return o(+t,+e);case"[object Error]":return t.name==e.name&&t.message==e.message;case"[object RegExp]":case"[object String]":return t==e+"";case"[object Map]":var c=en;case"[object Set]":var l=1&r;if(c||(c=nn),t.size!=e.size&&!l)return!1;var u=a.get(t);if(u)return u==e;r|=2,a.set(t,e);var f=tn(c(t),c(e),r,i,s,a);return a.delete(t),f;case"[object Symbol]":if(on)return on.call(t)==on.call(e)}return!1};var an=Object.prototype.propertyIsEnumerable,cn=Object.getOwnPropertySymbols;const ln=cn?function(t){return null==t?[]:(t=Object(t),function(t,e){for(var n=-1,r=null==t?0:t.length,o=0,i=[];++n<r;){var s=t[n];e(s,n,t)&&(i[o++]=s)}return i}(cn(t),(function(e){return an.call(t,e)})))}:function(){return[]},un=function(t){return function(t,e,n){var r=e(t);return mt(t)?r:function(t,e){for(var n=-1,r=e.length,o=t.length;++n<r;)t[o+n]=e[n];return t}(r,n(t))}(t,Ye,ln)};var fn=Object.prototype.hasOwnProperty;const hn=M(p,"DataView"),pn=M(p,"Promise"),dn=M(p,"Set"),gn=M(p,"WeakMap");var mn="[object Map]",yn="[object Promise]",vn="[object Set]",bn="[object WeakMap]",wn="[object DataView]",_n=I(hn),En=I(B),xn=I(pn),Cn=I(dn),An=I(gn),On=_;(hn&&On(new hn(new ArrayBuffer(1)))!=wn||B&&On(new B)!=mn||pn&&On(pn.resolve())!=yn||dn&&On(new dn)!=vn||gn&&On(new gn)!=bn)&&(On=function(t){var e=_(t),n="[object Object]"==e?t.constructor:void 0,r=n?I(n):"";if(r)switch(r){case _n:return wn;case En:return mn;case xn:return yn;case Cn:return vn;case An:return bn}return e});const Sn=On;var In="[object Arguments]",kn="[object Array]",Tn="[object Object]",jn=Object.prototype.hasOwnProperty;const Ln=function(t,e,n,r,o,i){var s=mt(t),a=mt(e),c=s?kn:Sn(t),l=a?kn:Sn(e),u=(c=c==In?Tn:c)==Tn,f=(l=l==In?Tn:l)==Tn,h=c==l;if(h&&Et(t)){if(!Et(e))return!1;s=!0,u=!1}if(h&&!u)return i||(i=new J),s||Ut(t)?tn(t,e,n,r,o,i):sn(t,e,c,n,r,o,i);if(!(1&n)){var p=u&&jn.call(t,"__wrapped__"),d=f&&jn.call(e,"__wrapped__");if(p||d){var g=p?t.value():t,m=d?e.value():e;return i||(i=new J),o(g,m,n,r,i)}}return!!h&&(i||(i=new J),function(t,e,n,r,o,i){var s=1&n,a=un(t),c=a.length;if(c!=un(e).length&&!s)return!1;for(var l=c;l--;){var u=a[l];if(!(s?u in e:fn.call(e,u)))return!1}var f=i.get(t),h=i.get(e);if(f&&h)return f==e&&h==t;var p=!0;i.set(t,e),i.set(e,t);for(var d=s;++l<c;){var g=t[u=a[l]],m=e[u];if(r)var y=s?r(m,g,u,e,t,i):r(g,m,u,t,e,i);if(!(void 0===y?g===m||o(g,m,n,r,i):y)){p=!1;break}d||(d="constructor"==u)}if(p&&!d){var v=t.constructor,b=e.constructor;v==b||!("constructor"in t)||!("constructor"in e)||"function"==typeof v&&v instanceof v&&"function"==typeof b&&b instanceof b||(p=!1)}return i.delete(t),i.delete(e),p}(t,e,n,r,o,i))},Rn=function t(e,n,r,o,i){return e===n||(null==e||null==n||!ut(e)&&!ut(n)?e!=e&&n!=n:Ln(e,n,r,o,t,i))},Un=function(t){return t==t&&!E(t)},Fn=function(t,e){return function(n){return null!=n&&n[t]===e&&(void 0!==e||t in Object(n))}},Mn=function(t){var e=function(t){for(var e=Ye(t),n=e.length;n--;){var r=e[n],o=t[r];e[n]=[r,o,Un(o)]}return e}(t);return 1==e.length&&e[0][2]?Fn(e[0][0],e[0][1]):function(n){return n===t||function(t,e,n,r){var o=n.length,i=o,s=!r;if(null==t)return!i;for(t=Object(t);o--;){var a=n[o];if(s&&a[2]?a[1]!==t[a[0]]:!(a[0]in t))return!1}for(;++o<i;){var c=(a=n[o])[0],l=t[c],u=a[1];if(s&&a[2]){if(void 0===l&&!(c in t))return!1}else{var f=new J;if(r)var h=r(l,u,c,t,e,f);if(!(void 0===h?Rn(u,l,3,r,f):h))return!1}}return!0}(n,t,e)}},Bn=function(t){return"symbol"==typeof t||ut(t)&&"[object Symbol]"==_(t)};var Nn=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,$n=/^\w*$/;const Pn=function(t,e){if(mt(t))return!1;var n=typeof t;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!Bn(t))||$n.test(t)||!Nn.test(t)||null!=e&&t in Object(e)};function Dn(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new TypeError("Expected a function");var n=function(){var r=arguments,o=e?e.apply(this,r):r[0],i=n.cache;if(i.has(o))return i.get(o);var s=t.apply(this,r);return n.cache=i.set(o,s)||i,s};return n.cache=new(Dn.Cache||W),n}Dn.Cache=W;const zn=Dn;var qn=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Hn=/\\(\\)?/g;const Wn=function(t){var e=zn((function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(qn,(function(t,n,r,o){e.push(r?o.replace(Hn,"$1"):n||t)})),e}),(function(t){return 500===n.size&&n.clear(),t})),n=e.cache;return e}();var Gn=d?d.prototype:void 0,Jn=Gn?Gn.toString:void 0;const Vn=function t(e){if("string"==typeof e)return e;if(mt(e))return function(t,e){for(var n=-1,r=null==t?0:t.length,o=Array(r);++n<r;)o[n]=e(t[n],n,t);return o}(e,t)+"";if(Bn(e))return Jn?Jn.call(e):"";var n=e+"";return"0"==n&&1/e==-1/0?"-0":n},Yn=function(t,e){return mt(t)?t:Pn(t,e)?[t]:Wn(function(t){return null==t?"":Vn(t)}(t))},Zn=function(t){if("string"==typeof t||Bn(t))return t;var e=t+"";return"0"==e&&1/t==-1/0?"-0":e},Kn=function(t,e){for(var n=0,r=(e=Yn(e,t)).length;null!=t&&n<r;)t=t[Zn(e[n++])];return n&&n==r?t:void 0},Qn=function(t,e){return null!=t&&e in Object(t)},Xn=function(t,e){return null!=t&&function(t,e,n){for(var r=-1,o=(e=Yn(e,t)).length,i=!1;++r<o;){var s=Zn(e[r]);if(!(i=null!=t&&n(t,s)))break;t=t[s]}return i||++r!=o?i:!!(o=null==t?0:t.length)&&yt(o)&&$t(s,o)&&(mt(t)||gt(t))}(t,e,Qn)},tr=function(t,e){return Pn(t)&&Un(e)?Fn(Zn(t),e):function(n){var r=function(t,e,n){var r=null==t?void 0:Kn(t,e);return void 0===r?n:r}(n,t);return void 0===r&&r===e?Xn(n,t):Rn(e,r,3)}},er=function(t){return Pn(t)?function(t){return function(e){return null==e?void 0:e[t]}}(Zn(t)):function(t){return function(e){return Kn(e,t)}}(t)},nr=function(t,e){var n={};return e=function(t){return"function"==typeof t?t:null==t?Vt:"object"==typeof t?mt(t)?tr(t[0],t[1]):Mn(t):er(t)}(e),function(t,e){t&&K(t,e,Ye)}(t,(function(t,r,o){Y(n,e(t,r,o),t)})),n};function rr(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}class or{constructor(t,e){rr(this,"ctx",void 0),rr(this,"serviceHooks",void 0),this.ctx=t,this.serviceHooks=e,t._execCallableAPI("register-search-service",t.baseInfo.id,e.name,e.options),Object.entries({query:{f:"onQuery",args:["graph","q",!0],reply:!0,transformOutput:t=>(mt(null==t?void 0:t.blocks)&&(t.blocks=t.blocks.map((t=>t&&nr(t,((t,e)=>`block/${e}`))))),t)},rebuildBlocksIndice:{f:"onIndiceInit",args:["graph","blocks"]},transactBlocks:{f:"onBlocksChanged",args:["graph","data"]},truncateBlocks:{f:"onIndiceReset",args:["graph"]},removeDb:{f:"onGraph",args:["graph"]}}).forEach((([n,r])=>{const o=(t=>`service:search:${t}:${e.name}`)(n);t.caller.on(o,(async n=>{if(x(null==e?void 0:e[r.f])){let i=null;try{i=await e[r.f].apply(e,(r.args||[]).map((t=>{if(n){if(!0===t)return n;if(n.hasOwnProperty(t)){const e=n[t];return delete n[t],e}}}))),r.transformOutput&&(i=r.transformOutput(i))}catch(t){console.error("[SearchService] ",t),i=t}finally{r.reply&&t.caller.call(`${o}:reply`,i)}}}))}))}}function ir(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}const sr=Symbol.for("proxy-continue"),ar=be()("LSPlugin:user"),cr=new ge("",{console:!0});function lr(t,e,n){var r;if("function"!=typeof n)return!1;const{key:o,label:i,desc:s,palette:a,keybinding:c,extras:l}=e,u=`SimpleCommandHook${o}${++dr}`;this.Editor["on"+u](n),null===(r=this.caller)||void 0===r||r.call("api:call",{method:"register-plugin-simple-command",args:[this.baseInfo.id,[{key:o,label:i,type:t,desc:s,keybinding:c,extras:l},["editor/hook",u]],a]})}function ur(t){var e;return!("string"!=typeof(e=t)||36!==e.length||!/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/gi.test(e))||(cr.error(`#${t} is not a valid UUID string.`),!1)}let fr=null,hr=new Map;const pr={async getInfo(t){return fr||(fr=await this._execCallableAPIAsync("get-app-info")),"string"==typeof t?fr[t]:fr},registerCommand:lr,registerSearchService(t){if(hr.has(t.name))throw new Error(`SearchService: #${t.name} has registered!`);hr.set(t.name,new or(this,t))},registerCommandPalette(t,e){const{key:n,label:r,keybinding:o}=t;return lr.call(this,"$palette$",{key:n,label:r,palette:!0,keybinding:o},e)},registerCommandShortcut(t,e){const{binding:n}=t,r="$shortcut$",o=r+pe(n);return lr.call(this,r,{key:o,palette:!1,keybinding:t},e)},registerUIItem(t,e){var n;const r=this.baseInfo.id;null===(n=this.caller)||void 0===n||n.call("api:call",{method:"register-plugin-ui-item",args:[r,t,e]})},registerPageMenuItem(t,e){if("function"!=typeof e)return!1;const n=t+"_"+this.baseInfo.id,r=t;lr.call(this,"page-menu-item",{key:n,label:r},e)},onBlockRendererSlotted(t,e){if(!ur(t))return;const n=this.baseInfo.id,r=`hook:editor:${pe(`slot:${t}`)}`;return this.caller.on(r,e),this.App._installPluginHook(n,r),()=>{this.caller.off(r,e),this.App._uninstallPluginHook(n,r)}},invokeExternalPlugin(t,...e){var n;if(!(t=null===(n=t)||void 0===n?void 0:n.trim()))return;let[r,o]=t.split(".");if(!["models","commands"].includes(null==o?void 0:o.toLowerCase()))throw new Error("Type only support '.models' or '.commands' currently.");const i=t.replace(`${r}.${o}.`,"");if(!r||!o||!i)throw new Error(`Illegal type of #${t} to invoke external plugin.`);return this._execCallableAPIAsync("invoke_external_plugin_cmd",r,o.toLowerCase(),i,e)},setFullScreen(t){const e=(...t)=>this._callWin("setFullScreen",...t);"toggle"===t?this._callWin("isFullScreen").then((t=>{t?e():e(!0)})):t?e(!0):e()}};let dr=0;const gr={newBlockUUID(){return this._execCallableAPIAsync("new_block_uuid")},registerSlashCommand(t,e){var n;ar("Register slash command #",this.baseInfo.id,t,e),"function"==typeof e&&(e=[["editor/clear-current-slash",!1],["editor/restore-saved-cursor"],["editor/hook",e]]),e=e.map((t=>{const[e,...n]=t;if("editor/hook"===e){let r=n[0],o=()=>{var t;null===(t=this.caller)||void 0===t||t.callUserModel(r)};"function"==typeof r&&(o=r);const i=`SlashCommandHook${e}${++dr}`;t[1]=i,this.Editor["on"+i](o)}return t})),null===(n=this.caller)||void 0===n||n.call("api:call",{method:"register-plugin-slash-command",args:[this.baseInfo.id,[t,e]]})},registerBlockContextMenuItem(t,e){if("function"!=typeof e)return!1;const n=t+"_"+this.baseInfo.id;lr.call(this,"block-context-menu-item",{key:n,label:t},e)},registerHighlightContextMenuItem(t,e,n){if("function"!=typeof e)return!1;const r=t+"_"+this.baseInfo.id;lr.call(this,"highlight-context-menu-item",{key:r,label:t,extras:n},e)},scrollToBlockInPage(t,e,n){const r="block-content-"+e;null!=n&&n.replaceState?this.App.replaceState("page",{name:t},{anchor:r}):this.App.pushState("page",{name:t},{anchor:r})}},mr={onBlockChanged(t,e){if(!ur(t))return;const n=this.baseInfo.id,r=`hook:db:${pe(`block:${t}`)}`,o=({block:n,txData:r,txMeta:o})=>{n.uuid===t&&e(n,r,o)};return this.caller.on(r,o),this.App._installPluginHook(n,r),()=>{this.caller.off(r,o),this.App._uninstallPluginHook(n,r)}},datascriptQuery(t,...e){return e.pop(),null!=e&&e.some((t=>"function"==typeof t))?this.Experiments.ensureHostScope().logseq.api.datascript_query(t,...e):this._execCallableAPIAsync("datascript_query",t,...e)}},yr={},vr={},br={makeSandboxStorage(){return new De(this,{assets:!0})}};class wr extends(ue()){constructor(t,e){super(),ir(this,"_baseInfo",void 0),ir(this,"_caller",void 0),ir(this,"_version","0.0.14"),ir(this,"_debugTag",""),ir(this,"_settingsSchema",void 0),ir(this,"_connected",!1),ir(this,"_ui",new Map),ir(this,"_mFileStorage",void 0),ir(this,"_mRequest",void 0),ir(this,"_mExperiments",void 0),ir(this,"_beforeunloadCallback",void 0),this._baseInfo=t,this._caller=e,e.on("sys:ui:visible",(t=>{null!=t&&t.toggle&&this.toggleMainUI()})),e.on("settings:changed",(t=>{const e=Object.assign({},this.settings),n=Object.assign(this._baseInfo.settings,t);this.emit("settings:changed",{...n},e)})),e.on("beforeunload",(async t=>{const{actor:n,...r}=t,o=this._beforeunloadCallback;try{o&&await o(r),null==n||n.resolve(null)}catch(t){console.debug(`${e.debugTag} [beforeunload] `,t),null==n||n.reject(t)}}))}async ready(t,e){if(!this._connected)try{var n;"function"==typeof t&&(e=t,t={});let r=await this._caller.connectToParent(t);this._connected=!0,r=de(this._baseInfo,r),null!==(n=r)&&void 0!==n&&n.id&&(this._debugTag=this._caller.debugTag=`#${r.id} [${r.name}]`,this.logger.setTag(this._debugTag)),this._settingsSchema&&(r.settings=function(t,e){const n=(e||[]).reduce(((t,e)=>("default"in e&&(t[e.key]=e.default),t)),{});return Object.assign(n,t)}(r.settings,this._settingsSchema),await this.useSettingsSchema(this._settingsSchema));try{await this._execCallableAPIAsync("setSDKMetadata",{version:this._version})}catch(t){console.warn(t)}e&&e.call(this,r)}catch(t){console.error(`${this._debugTag} [Ready Error]`,t)}}ensureConnected(){if(!this._connected)throw new Error("not connected")}beforeunload(t){"function"==typeof t&&(this._beforeunloadCallback=t)}provideModel(t){return this.caller._extendUserModel(t),this}provideTheme(t){return this.caller.call("provider:theme",t),this}provideStyle(t){return this.caller.call("provider:style",t),this}provideUI(t){return this.caller.call("provider:ui",t),this}useSettingsSchema(t){return this.connected&&this.caller.call("settings:schema",{schema:t,isSync:!0}),this._settingsSchema=t,this}updateSettings(t){this.caller.call("settings:update",t)}onSettingsChanged(t){const e="settings:changed";return this.on(e,t),()=>this.off(e,t)}showSettingsUI(){this.caller.call("settings:visible:changed",{visible:!0})}hideSettingsUI(){this.caller.call("settings:visible:changed",{visible:!1})}setMainUIAttrs(t){this.caller.call("main-ui:attrs",t)}setMainUIInlineStyle(t){this.caller.call("main-ui:style",t)}hideMainUI(t){const e={key:0,visible:!1,cursor:null==t?void 0:t.restoreEditingCursor};this.caller.call("main-ui:visible",e),this.emit("ui:visible:changed",e),this._ui.set(e.key,e)}showMainUI(t){const e={key:0,visible:!0,autoFocus:null==t?void 0:t.autoFocus};this.caller.call("main-ui:visible",e),this.emit("ui:visible:changed",e),this._ui.set(e.key,e)}toggleMainUI(){const t=this._ui.get(0);t&&t.visible?this.hideMainUI():this.showMainUI()}get version(){return this._version}get isMainUIVisible(){const t=this._ui.get(0);return Boolean(t&&t.visible)}get connected(){return this._connected}get baseInfo(){return this._baseInfo}get effect(){var t,e;return this&&((null===(t=this.baseInfo)||void 0===t?void 0:t.effect)||!(null!==(e=this.baseInfo)&&void 0!==e&&e.iir))}get logger(){return cr}get settings(){var t;return null===(t=this.baseInfo)||void 0===t?void 0:t.settings}get caller(){return this._caller}resolveResourceFullUrl(t){if(this.ensureConnected(),t)return t=t.replace(/^[.\\/]+/,""),function(t,...e){try{const n=new URL(t);if(!n.origin)throw new Error(null);const r=he.join(t.substr(n.origin.length),...e);return n.origin+r}catch(n){return he.join(t,...e)}}(this._baseInfo.lsr,t)}_makeUserProxy(t,e){const n=this,r=this.caller;return new Proxy(t,{get(t,o,i){const s=t[o];return function(...t){if(s){const r=s.apply(n,t.concat(e));if(r!==sr)return r}if(e){const i=o.toString().match(/^(once|off|on)/i);if(null!=i){const o=i[0].toLowerCase(),s=i.input.slice(o.length),a="off"===o,c=n.baseInfo.id,l=`hook:${e}:${pe(s)}`,u=t[0];r[o](l,u);const f=()=>{r.off(l,u),r.listenerCount(l)||n.App._uninstallPluginHook(c,l)};return a?void f():(n.App._installPluginHook(c,l),f)}}let i=o;return["git","ui","assets"].includes(e)&&(i=e+"_"+i),r.callAsync("api:call",{tag:e,method:i,args:t})}}})}_execCallableAPIAsync(t,...e){return this._caller.callAsync("api:call",{method:t,args:e})}_execCallableAPI(t,...e){this._caller.call("api:call",{method:t,args:e})}_callWin(...t){return this._execCallableAPIAsync("_callMainWin",...t)}get App(){return this._makeUserProxy(pr,"app")}get Editor(){return this._makeUserProxy(gr,"editor")}get DB(){return this._makeUserProxy(mr,"db")}get Git(){return this._makeUserProxy(yr,"git")}get UI(){return this._makeUserProxy(vr,"ui")}get Assets(){return this._makeUserProxy(br,"assets")}get FileStorage(){let t=this._mFileStorage;return t||(t=this._mFileStorage=new De(this)),t}get Request(){let t=this._mRequest;return t||(t=this._mRequest=new Ge(this)),t}get Experiments(){let t=this._mExperiments;return t||(t=this._mExperiments=new ze(this)),t}}function _r(t,e){return new wr(t,e)}if(null==window.__LSP__HOST__){const t=new $e(null);window.logseq=_r({},t)}})(),s})(),e.exports=r()})),r("cVm5l");
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */var o,i,s;i=function(t){var e,n,r=g(t),o=r[0],i=r[1],s=new f(function(t,e,n){return 3*(e+n)/4-n}(0,o,i)),a=0,c=i>0?o-4:o;for(n=0;n<c;n+=4)e=u[t.charCodeAt(n)]<<18|u[t.charCodeAt(n+1)]<<12|u[t.charCodeAt(n+2)]<<6|u[t.charCodeAt(n+3)],s[a++]=e>>16&255,s[a++]=e>>8&255,s[a++]=255&e;2===i&&(e=u[t.charCodeAt(n)]<<2|u[t.charCodeAt(n+1)]>>4,s[a++]=255&e);1===i&&(e=u[t.charCodeAt(n)]<<10|u[t.charCodeAt(n+1)]<<4|u[t.charCodeAt(n+2)]>>2,s[a++]=e>>8&255,s[a++]=255&e);return s},s=function(t){for(var e,n=t.length,r=n%3,o=[],i=16383,s=0,a=n-r;s<a;s+=i)o.push(m(t,s,s+i>a?a:s+i));1===r?(e=t[n-1],o.push(l[e>>2]+l[e<<4&63]+"==")):2===r&&(e=(t[n-2]<<8)+t[n-1],o.push(l[e>>10]+l[e>>4&63]+l[e<<2&63]+"="));return o.join("")}
/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */;for(var a,c,l=[],u=[],f="undefined"!=typeof Uint8Array?Uint8Array:Array,h="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",p=0,d=h.length;p<d;++p)l[p]=h[p],u[h.charCodeAt(p)]=p;function g(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=t.indexOf("=");return-1===n&&(n=e),[n,n===e?0:4-n%4]}function m(t,e,n){for(var r,o,i=[],s=e;s<n;s+=3)r=(t[s]<<16&16711680)+(t[s+1]<<8&65280)+(255&t[s+2]),i.push(l[(o=r)>>18&63]+l[o>>12&63]+l[o>>6&63]+l[63&o]);return i.join("")}u["-".charCodeAt(0)]=62,u["_".charCodeAt(0)]=63,a=function(t,e,n,r,o){var i,s,a=8*o-r-1,c=(1<<a)-1,l=c>>1,u=-7,f=n?o-1:0,h=n?-1:1,p=t[e+f];for(f+=h,i=p&(1<<-u)-1,p>>=-u,u+=a;u>0;i=256*i+t[e+f],f+=h,u-=8);for(s=i&(1<<-u)-1,i>>=-u,u+=r;u>0;s=256*s+t[e+f],f+=h,u-=8);if(0===i)i=1-l;else{if(i===c)return s?NaN:1/0*(p?-1:1);s+=Math.pow(2,r),i-=l}return(p?-1:1)*s*Math.pow(2,i-r)},c=function(t,e,n,r,o,i){var s,a,c,l=8*i-o-1,u=(1<<l)-1,f=u>>1,h=23===o?Math.pow(2,-24)-Math.pow(2,-77):0,p=r?0:i-1,d=r?1:-1,g=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,s=u):(s=Math.floor(Math.log(e)/Math.LN2),e*(c=Math.pow(2,-s))<1&&(s--,c*=2),(e+=s+f>=1?h/c:h*Math.pow(2,1-f))*c>=2&&(s++,c/=2),s+f>=u?(a=0,s=u):s+f>=1?(a=(e*c-1)*Math.pow(2,o),s+=f):(a=e*Math.pow(2,f-1)*Math.pow(2,o),s=0));o>=8;t[n+p]=255&a,p+=d,a/=256,o-=8);for(s=s<<o|a,l+=o;l>0;t[n+p]=255&s,p+=d,s/=256,l-=8);t[n+p-d]|=128*g};const y="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;o=w;const v=2147483647;function b(t){if(t>v)throw new RangeError('The value "'+t+'" is invalid for option "size"');const e=new Uint8Array(t);return Object.setPrototypeOf(e,w.prototype),e}function w(t,e,n){if("number"==typeof t){if("string"==typeof e)throw new TypeError('The "string" argument must be of type string. Received type number');return x(t)}return _(t,e,n)}function _(t,e,n){if("string"==typeof t)return function(t,e){"string"==typeof e&&""!==e||(e="utf8");if(!w.isEncoding(e))throw new TypeError("Unknown encoding: "+e);const n=0|S(t,e);let r=b(n);const o=r.write(t,e);o!==n&&(r=r.slice(0,o));return r}(t,e);if(ArrayBuffer.isView(t))return function(t){if(at(t,Uint8Array)){const e=new Uint8Array(t);return A(e.buffer,e.byteOffset,e.byteLength)}return C(t)}(t);if(null==t)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t);if(at(t,ArrayBuffer)||t&&at(t.buffer,ArrayBuffer))return A(t,e,n);if("undefined"!=typeof SharedArrayBuffer&&(at(t,SharedArrayBuffer)||t&&at(t.buffer,SharedArrayBuffer)))return A(t,e,n);if("number"==typeof t)throw new TypeError('The "value" argument must not be of type number. Received type number');const r=t.valueOf&&t.valueOf();if(null!=r&&r!==t)return w.from(r,e,n);const o=function(t){if(w.isBuffer(t)){const e=0|O(t.length),n=b(e);return 0===n.length||t.copy(n,0,0,e),n}if(void 0!==t.length)return"number"!=typeof t.length||ct(t.length)?b(0):C(t);if("Buffer"===t.type&&Array.isArray(t.data))return C(t.data)}(t);if(o)return o;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof t[Symbol.toPrimitive])return w.from(t[Symbol.toPrimitive]("string"),e,n);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t)}function E(t){if("number"!=typeof t)throw new TypeError('"size" argument must be of type number');if(t<0)throw new RangeError('The value "'+t+'" is invalid for option "size"')}function x(t){return E(t),b(t<0?0:0|O(t))}function C(t){const e=t.length<0?0:0|O(t.length),n=b(e);for(let r=0;r<e;r+=1)n[r]=255&t[r];return n}function A(t,e,n){if(e<0||t.byteLength<e)throw new RangeError('"offset" is outside of buffer bounds');if(t.byteLength<e+(n||0))throw new RangeError('"length" is outside of buffer bounds');let r;return r=void 0===e&&void 0===n?new Uint8Array(t):void 0===n?new Uint8Array(t,e):new Uint8Array(t,e,n),Object.setPrototypeOf(r,w.prototype),r}function O(t){if(t>=v)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+v.toString(16)+" bytes");return 0|t}function S(t,e){if(w.isBuffer(t))return t.length;if(ArrayBuffer.isView(t)||at(t,ArrayBuffer))return t.byteLength;if("string"!=typeof t)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof t);const n=t.length,r=arguments.length>2&&!0===arguments[2];if(!r&&0===n)return 0;let o=!1;for(;;)switch(e){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":return ot(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return it(t).length;default:if(o)return r?-1:ot(t).length;e=(""+e).toLowerCase(),o=!0}}function I(t,e,n){let r=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return z(this,e,n);case"utf8":case"utf-8":return N(this,e,n);case"ascii":return P(this,e,n);case"latin1":case"binary":return D(this,e,n);case"base64":return B(this,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return q(this,e,n);default:if(r)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),r=!0}}function k(t,e,n){const r=t[e];t[e]=t[n],t[n]=r}function T(t,e,n,r,o){if(0===t.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),ct(n=+n)&&(n=o?0:t.length-1),n<0&&(n=t.length+n),n>=t.length){if(o)return-1;n=t.length-1}else if(n<0){if(!o)return-1;n=0}if("string"==typeof e&&(e=w.from(e,r)),w.isBuffer(e))return 0===e.length?-1:j(t,e,n,r,o);if("number"==typeof e)return e&=255,"function"==typeof Uint8Array.prototype.indexOf?o?Uint8Array.prototype.indexOf.call(t,e,n):Uint8Array.prototype.lastIndexOf.call(t,e,n):j(t,[e],n,r,o);throw new TypeError("val must be string, number or Buffer")}function j(t,e,n,r,o){let i,s=1,a=t.length,c=e.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(t.length<2||e.length<2)return-1;s=2,a/=2,c/=2,n/=2}function l(t,e){return 1===s?t[e]:t.readUInt16BE(e*s)}if(o){let r=-1;for(i=n;i<a;i++)if(l(t,i)===l(e,-1===r?0:i-r)){if(-1===r&&(r=i),i-r+1===c)return r*s}else-1!==r&&(i-=i-r),r=-1}else for(n+c>a&&(n=a-c),i=n;i>=0;i--){let n=!0;for(let r=0;r<c;r++)if(l(t,i+r)!==l(e,r)){n=!1;break}if(n)return i}return-1}function L(t,e,n,r){n=Number(n)||0;const o=t.length-n;r?(r=Number(r))>o&&(r=o):r=o;const i=e.length;let s;for(r>i/2&&(r=i/2),s=0;s<r;++s){const r=parseInt(e.substr(2*s,2),16);if(ct(r))return s;t[n+s]=r}return s}function R(t,e,n,r){return st(ot(e,t.length-n),t,n,r)}function U(t,e,n,r){return st(function(t){const e=[];for(let n=0;n<t.length;++n)e.push(255&t.charCodeAt(n));return e}(e),t,n,r)}function F(t,e,n,r){return st(it(e),t,n,r)}function M(t,e,n,r){return st(function(t,e){let n,r,o;const i=[];for(let s=0;s<t.length&&!((e-=2)<0);++s)n=t.charCodeAt(s),r=n>>8,o=n%256,i.push(o),i.push(r);return i}(e,t.length-n),t,n,r)}function B(t,e,n){return 0===e&&n===t.length?s(t):s(t.slice(e,n))}function N(t,e,n){n=Math.min(t.length,n);const r=[];let o=e;for(;o<n;){const e=t[o];let i=null,s=e>239?4:e>223?3:e>191?2:1;if(o+s<=n){let n,r,a,c;switch(s){case 1:e<128&&(i=e);break;case 2:n=t[o+1],128==(192&n)&&(c=(31&e)<<6|63&n,c>127&&(i=c));break;case 3:n=t[o+1],r=t[o+2],128==(192&n)&&128==(192&r)&&(c=(15&e)<<12|(63&n)<<6|63&r,c>2047&&(c<55296||c>57343)&&(i=c));break;case 4:n=t[o+1],r=t[o+2],a=t[o+3],128==(192&n)&&128==(192&r)&&128==(192&a)&&(c=(15&e)<<18|(63&n)<<12|(63&r)<<6|63&a,c>65535&&c<1114112&&(i=c))}}null===i?(i=65533,s=1):i>65535&&(i-=65536,r.push(i>>>10&1023|55296),i=56320|1023&i),r.push(i),o+=s}return function(t){const e=t.length;if(e<=$)return String.fromCharCode.apply(String,t);let n="",r=0;for(;r<e;)n+=String.fromCharCode.apply(String,t.slice(r,r+=$));return n}(r)}w.TYPED_ARRAY_SUPPORT=function(){try{const t=new Uint8Array(1),e={foo:function(){return 42}};return Object.setPrototypeOf(e,Uint8Array.prototype),Object.setPrototypeOf(t,e),42===t.foo()}catch(t){return!1}}(),w.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(w.prototype,"parent",{enumerable:!0,get:function(){if(w.isBuffer(this))return this.buffer}}),Object.defineProperty(w.prototype,"offset",{enumerable:!0,get:function(){if(w.isBuffer(this))return this.byteOffset}}),w.poolSize=8192,w.from=function(t,e,n){return _(t,e,n)},Object.setPrototypeOf(w.prototype,Uint8Array.prototype),Object.setPrototypeOf(w,Uint8Array),w.alloc=function(t,e,n){return function(t,e,n){return E(t),t<=0?b(t):void 0!==e?"string"==typeof n?b(t).fill(e,n):b(t).fill(e):b(t)}(t,e,n)},w.allocUnsafe=function(t){return x(t)},w.allocUnsafeSlow=function(t){return x(t)},w.isBuffer=function(t){return null!=t&&!0===t._isBuffer&&t!==w.prototype},w.compare=function(t,e){if(at(t,Uint8Array)&&(t=w.from(t,t.offset,t.byteLength)),at(e,Uint8Array)&&(e=w.from(e,e.offset,e.byteLength)),!w.isBuffer(t)||!w.isBuffer(e))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(t===e)return 0;let n=t.length,r=e.length;for(let o=0,i=Math.min(n,r);o<i;++o)if(t[o]!==e[o]){n=t[o],r=e[o];break}return n<r?-1:r<n?1:0},w.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},w.concat=function(t,e){if(!Array.isArray(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return w.alloc(0);let n;if(void 0===e)for(e=0,n=0;n<t.length;++n)e+=t[n].length;const r=w.allocUnsafe(e);let o=0;for(n=0;n<t.length;++n){let e=t[n];if(at(e,Uint8Array))o+e.length>r.length?(w.isBuffer(e)||(e=w.from(e)),e.copy(r,o)):Uint8Array.prototype.set.call(r,e,o);else{if(!w.isBuffer(e))throw new TypeError('"list" argument must be an Array of Buffers');e.copy(r,o)}o+=e.length}return r},w.byteLength=S,w.prototype._isBuffer=!0,w.prototype.swap16=function(){const t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let e=0;e<t;e+=2)k(this,e,e+1);return this},w.prototype.swap32=function(){const t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let e=0;e<t;e+=4)k(this,e,e+3),k(this,e+1,e+2);return this},w.prototype.swap64=function(){const t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let e=0;e<t;e+=8)k(this,e,e+7),k(this,e+1,e+6),k(this,e+2,e+5),k(this,e+3,e+4);return this},w.prototype.toString=function(){const t=this.length;return 0===t?"":0===arguments.length?N(this,0,t):I.apply(this,arguments)},w.prototype.toLocaleString=w.prototype.toString,w.prototype.equals=function(t){if(!w.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===w.compare(this,t)},w.prototype.inspect=function(){let t="";return t=this.toString("hex",0,50).replace(/(.{2})/g,"$1 ").trim(),this.length>50&&(t+=" ... "),"<Buffer "+t+">"},y&&(w.prototype[y]=w.prototype.inspect),w.prototype.compare=function(t,e,n,r,o){if(at(t,Uint8Array)&&(t=w.from(t,t.offset,t.byteLength)),!w.isBuffer(t))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof t);if(void 0===e&&(e=0),void 0===n&&(n=t?t.length:0),void 0===r&&(r=0),void 0===o&&(o=this.length),e<0||n>t.length||r<0||o>this.length)throw new RangeError("out of range index");if(r>=o&&e>=n)return 0;if(r>=o)return-1;if(e>=n)return 1;if(this===t)return 0;let i=(o>>>=0)-(r>>>=0),s=(n>>>=0)-(e>>>=0);const a=Math.min(i,s),c=this.slice(r,o),l=t.slice(e,n);for(let t=0;t<a;++t)if(c[t]!==l[t]){i=c[t],s=l[t];break}return i<s?-1:s<i?1:0},w.prototype.includes=function(t,e,n){return-1!==this.indexOf(t,e,n)},w.prototype.indexOf=function(t,e,n){return T(this,t,e,n,!0)},w.prototype.lastIndexOf=function(t,e,n){return T(this,t,e,n,!1)},w.prototype.write=function(t,e,n,r){if(void 0===e)r="utf8",n=this.length,e=0;else if(void 0===n&&"string"==typeof e)r=e,n=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e>>>=0,isFinite(n)?(n>>>=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}const o=this.length-e;if((void 0===n||n>o)&&(n=o),t.length>0&&(n<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");let i=!1;for(;;)switch(r){case"hex":return L(this,t,e,n);case"utf8":case"utf-8":return R(this,t,e,n);case"ascii":case"latin1":case"binary":return U(this,t,e,n);case"base64":return F(this,t,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return M(this,t,e,n);default:if(i)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),i=!0}},w.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};const $=4096;function P(t,e,n){let r="";n=Math.min(t.length,n);for(let o=e;o<n;++o)r+=String.fromCharCode(127&t[o]);return r}function D(t,e,n){let r="";n=Math.min(t.length,n);for(let o=e;o<n;++o)r+=String.fromCharCode(t[o]);return r}function z(t,e,n){const r=t.length;(!e||e<0)&&(e=0),(!n||n<0||n>r)&&(n=r);let o="";for(let r=e;r<n;++r)o+=lt[t[r]];return o}function q(t,e,n){const r=t.slice(e,n);let o="";for(let t=0;t<r.length-1;t+=2)o+=String.fromCharCode(r[t]+256*r[t+1]);return o}function H(t,e,n){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>n)throw new RangeError("Trying to access beyond buffer length")}function W(t,e,n,r,o,i){if(!w.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>o||e<i)throw new RangeError('"value" argument is out of bounds');if(n+r>t.length)throw new RangeError("Index out of range")}function G(t,e,n,r,o){tt(e,r,o,t,n,7);let i=Number(e&BigInt(4294967295));t[n++]=i,i>>=8,t[n++]=i,i>>=8,t[n++]=i,i>>=8,t[n++]=i;let s=Number(e>>BigInt(32)&BigInt(4294967295));return t[n++]=s,s>>=8,t[n++]=s,s>>=8,t[n++]=s,s>>=8,t[n++]=s,n}function J(t,e,n,r,o){tt(e,r,o,t,n,7);let i=Number(e&BigInt(4294967295));t[n+7]=i,i>>=8,t[n+6]=i,i>>=8,t[n+5]=i,i>>=8,t[n+4]=i;let s=Number(e>>BigInt(32)&BigInt(4294967295));return t[n+3]=s,s>>=8,t[n+2]=s,s>>=8,t[n+1]=s,s>>=8,t[n]=s,n+8}function V(t,e,n,r,o,i){if(n+r>t.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function Y(t,e,n,r,o){return e=+e,n>>>=0,o||V(t,0,n,4),c(t,e,n,r,23,4),n+4}function Z(t,e,n,r,o){return e=+e,n>>>=0,o||V(t,0,n,8),c(t,e,n,r,52,8),n+8}w.prototype.slice=function(t,e){const n=this.length;(t=~~t)<0?(t+=n)<0&&(t=0):t>n&&(t=n),(e=void 0===e?n:~~e)<0?(e+=n)<0&&(e=0):e>n&&(e=n),e<t&&(e=t);const r=this.subarray(t,e);return Object.setPrototypeOf(r,w.prototype),r},w.prototype.readUintLE=w.prototype.readUIntLE=function(t,e,n){t>>>=0,e>>>=0,n||H(t,e,this.length);let r=this[t],o=1,i=0;for(;++i<e&&(o*=256);)r+=this[t+i]*o;return r},w.prototype.readUintBE=w.prototype.readUIntBE=function(t,e,n){t>>>=0,e>>>=0,n||H(t,e,this.length);let r=this[t+--e],o=1;for(;e>0&&(o*=256);)r+=this[t+--e]*o;return r},w.prototype.readUint8=w.prototype.readUInt8=function(t,e){return t>>>=0,e||H(t,1,this.length),this[t]},w.prototype.readUint16LE=w.prototype.readUInt16LE=function(t,e){return t>>>=0,e||H(t,2,this.length),this[t]|this[t+1]<<8},w.prototype.readUint16BE=w.prototype.readUInt16BE=function(t,e){return t>>>=0,e||H(t,2,this.length),this[t]<<8|this[t+1]},w.prototype.readUint32LE=w.prototype.readUInt32LE=function(t,e){return t>>>=0,e||H(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},w.prototype.readUint32BE=w.prototype.readUInt32BE=function(t,e){return t>>>=0,e||H(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},w.prototype.readBigUInt64LE=ut((function(t){et(t>>>=0,"offset");const e=this[t],n=this[t+7];void 0!==e&&void 0!==n||nt(t,this.length-8);const r=e+256*this[++t]+65536*this[++t]+this[++t]*2**24,o=this[++t]+256*this[++t]+65536*this[++t]+n*2**24;return BigInt(r)+(BigInt(o)<<BigInt(32))})),w.prototype.readBigUInt64BE=ut((function(t){et(t>>>=0,"offset");const e=this[t],n=this[t+7];void 0!==e&&void 0!==n||nt(t,this.length-8);const r=e*2**24+65536*this[++t]+256*this[++t]+this[++t],o=this[++t]*2**24+65536*this[++t]+256*this[++t]+n;return(BigInt(r)<<BigInt(32))+BigInt(o)})),w.prototype.readIntLE=function(t,e,n){t>>>=0,e>>>=0,n||H(t,e,this.length);let r=this[t],o=1,i=0;for(;++i<e&&(o*=256);)r+=this[t+i]*o;return o*=128,r>=o&&(r-=Math.pow(2,8*e)),r},w.prototype.readIntBE=function(t,e,n){t>>>=0,e>>>=0,n||H(t,e,this.length);let r=e,o=1,i=this[t+--r];for(;r>0&&(o*=256);)i+=this[t+--r]*o;return o*=128,i>=o&&(i-=Math.pow(2,8*e)),i},w.prototype.readInt8=function(t,e){return t>>>=0,e||H(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},w.prototype.readInt16LE=function(t,e){t>>>=0,e||H(t,2,this.length);const n=this[t]|this[t+1]<<8;return 32768&n?4294901760|n:n},w.prototype.readInt16BE=function(t,e){t>>>=0,e||H(t,2,this.length);const n=this[t+1]|this[t]<<8;return 32768&n?4294901760|n:n},w.prototype.readInt32LE=function(t,e){return t>>>=0,e||H(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},w.prototype.readInt32BE=function(t,e){return t>>>=0,e||H(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},w.prototype.readBigInt64LE=ut((function(t){et(t>>>=0,"offset");const e=this[t],n=this[t+7];void 0!==e&&void 0!==n||nt(t,this.length-8);const r=this[t+4]+256*this[t+5]+65536*this[t+6]+(n<<24);return(BigInt(r)<<BigInt(32))+BigInt(e+256*this[++t]+65536*this[++t]+this[++t]*2**24)})),w.prototype.readBigInt64BE=ut((function(t){et(t>>>=0,"offset");const e=this[t],n=this[t+7];void 0!==e&&void 0!==n||nt(t,this.length-8);const r=(e<<24)+65536*this[++t]+256*this[++t]+this[++t];return(BigInt(r)<<BigInt(32))+BigInt(this[++t]*2**24+65536*this[++t]+256*this[++t]+n)})),w.prototype.readFloatLE=function(t,e){return t>>>=0,e||H(t,4,this.length),a(this,t,!0,23,4)},w.prototype.readFloatBE=function(t,e){return t>>>=0,e||H(t,4,this.length),a(this,t,!1,23,4)},w.prototype.readDoubleLE=function(t,e){return t>>>=0,e||H(t,8,this.length),a(this,t,!0,52,8)},w.prototype.readDoubleBE=function(t,e){return t>>>=0,e||H(t,8,this.length),a(this,t,!1,52,8)},w.prototype.writeUintLE=w.prototype.writeUIntLE=function(t,e,n,r){if(t=+t,e>>>=0,n>>>=0,!r){W(this,t,e,n,Math.pow(2,8*n)-1,0)}let o=1,i=0;for(this[e]=255&t;++i<n&&(o*=256);)this[e+i]=t/o&255;return e+n},w.prototype.writeUintBE=w.prototype.writeUIntBE=function(t,e,n,r){if(t=+t,e>>>=0,n>>>=0,!r){W(this,t,e,n,Math.pow(2,8*n)-1,0)}let o=n-1,i=1;for(this[e+o]=255&t;--o>=0&&(i*=256);)this[e+o]=t/i&255;return e+n},w.prototype.writeUint8=w.prototype.writeUInt8=function(t,e,n){return t=+t,e>>>=0,n||W(this,t,e,1,255,0),this[e]=255&t,e+1},w.prototype.writeUint16LE=w.prototype.writeUInt16LE=function(t,e,n){return t=+t,e>>>=0,n||W(this,t,e,2,65535,0),this[e]=255&t,this[e+1]=t>>>8,e+2},w.prototype.writeUint16BE=w.prototype.writeUInt16BE=function(t,e,n){return t=+t,e>>>=0,n||W(this,t,e,2,65535,0),this[e]=t>>>8,this[e+1]=255&t,e+2},w.prototype.writeUint32LE=w.prototype.writeUInt32LE=function(t,e,n){return t=+t,e>>>=0,n||W(this,t,e,4,4294967295,0),this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t,e+4},w.prototype.writeUint32BE=w.prototype.writeUInt32BE=function(t,e,n){return t=+t,e>>>=0,n||W(this,t,e,4,4294967295,0),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},w.prototype.writeBigUInt64LE=ut((function(t,e=0){return G(this,t,e,BigInt(0),BigInt("0xffffffffffffffff"))})),w.prototype.writeBigUInt64BE=ut((function(t,e=0){return J(this,t,e,BigInt(0),BigInt("0xffffffffffffffff"))})),w.prototype.writeIntLE=function(t,e,n,r){if(t=+t,e>>>=0,!r){const r=Math.pow(2,8*n-1);W(this,t,e,n,r-1,-r)}let o=0,i=1,s=0;for(this[e]=255&t;++o<n&&(i*=256);)t<0&&0===s&&0!==this[e+o-1]&&(s=1),this[e+o]=(t/i>>0)-s&255;return e+n},w.prototype.writeIntBE=function(t,e,n,r){if(t=+t,e>>>=0,!r){const r=Math.pow(2,8*n-1);W(this,t,e,n,r-1,-r)}let o=n-1,i=1,s=0;for(this[e+o]=255&t;--o>=0&&(i*=256);)t<0&&0===s&&0!==this[e+o+1]&&(s=1),this[e+o]=(t/i>>0)-s&255;return e+n},w.prototype.writeInt8=function(t,e,n){return t=+t,e>>>=0,n||W(this,t,e,1,127,-128),t<0&&(t=255+t+1),this[e]=255&t,e+1},w.prototype.writeInt16LE=function(t,e,n){return t=+t,e>>>=0,n||W(this,t,e,2,32767,-32768),this[e]=255&t,this[e+1]=t>>>8,e+2},w.prototype.writeInt16BE=function(t,e,n){return t=+t,e>>>=0,n||W(this,t,e,2,32767,-32768),this[e]=t>>>8,this[e+1]=255&t,e+2},w.prototype.writeInt32LE=function(t,e,n){return t=+t,e>>>=0,n||W(this,t,e,4,2147483647,-2147483648),this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24,e+4},w.prototype.writeInt32BE=function(t,e,n){return t=+t,e>>>=0,n||W(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},w.prototype.writeBigInt64LE=ut((function(t,e=0){return G(this,t,e,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),w.prototype.writeBigInt64BE=ut((function(t,e=0){return J(this,t,e,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),w.prototype.writeFloatLE=function(t,e,n){return Y(this,t,e,!0,n)},w.prototype.writeFloatBE=function(t,e,n){return Y(this,t,e,!1,n)},w.prototype.writeDoubleLE=function(t,e,n){return Z(this,t,e,!0,n)},w.prototype.writeDoubleBE=function(t,e,n){return Z(this,t,e,!1,n)},w.prototype.copy=function(t,e,n,r){if(!w.isBuffer(t))throw new TypeError("argument should be a Buffer");if(n||(n=0),r||0===r||(r=this.length),e>=t.length&&(e=t.length),e||(e=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),t.length-e<r-n&&(r=t.length-e+n);const o=r-n;return this===t&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(e,n,r):Uint8Array.prototype.set.call(t,this.subarray(n,r),e),o},w.prototype.fill=function(t,e,n,r){if("string"==typeof t){if("string"==typeof e?(r=e,e=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!w.isEncoding(r))throw new TypeError("Unknown encoding: "+r);if(1===t.length){const e=t.charCodeAt(0);("utf8"===r&&e<128||"latin1"===r)&&(t=e)}}else"number"==typeof t?t&=255:"boolean"==typeof t&&(t=Number(t));if(e<0||this.length<e||this.length<n)throw new RangeError("Out of range index");if(n<=e)return this;let o;if(e>>>=0,n=void 0===n?this.length:n>>>0,t||(t=0),"number"==typeof t)for(o=e;o<n;++o)this[o]=t;else{const i=w.isBuffer(t)?t:w.from(t,r),s=i.length;if(0===s)throw new TypeError('The value "'+t+'" is invalid for argument "value"');for(o=0;o<n-e;++o)this[o+e]=i[o%s]}return this};const K={};function Q(t,e,n){K[t]=class extends n{constructor(){super(),Object.defineProperty(this,"message",{value:e.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${t}]`,this.stack,delete this.name}get code(){return t}set code(t){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:t,writable:!0})}toString(){return`${this.name} [${t}]: ${this.message}`}}}function X(t){let e="",n=t.length;const r="-"===t[0]?1:0;for(;n>=r+4;n-=3)e=`_${t.slice(n-3,n)}${e}`;return`${t.slice(0,n)}${e}`}function tt(t,e,n,r,o,i){if(t>n||t<e){const r="bigint"==typeof e?"n":"";let o;throw o=i>3?0===e||e===BigInt(0)?`>= 0${r} and < 2${r} ** ${8*(i+1)}${r}`:`>= -(2${r} ** ${8*(i+1)-1}${r}) and < 2 ** ${8*(i+1)-1}${r}`:`>= ${e}${r} and <= ${n}${r}`,new K.ERR_OUT_OF_RANGE("value",o,t)}!function(t,e,n){et(e,"offset"),void 0!==t[e]&&void 0!==t[e+n]||nt(e,t.length-(n+1))}(r,o,i)}function et(t,e){if("number"!=typeof t)throw new K.ERR_INVALID_ARG_TYPE(e,"number",t)}function nt(t,e,n){if(Math.floor(t)!==t)throw et(t,n),new K.ERR_OUT_OF_RANGE(n||"offset","an integer",t);if(e<0)throw new K.ERR_BUFFER_OUT_OF_BOUNDS;throw new K.ERR_OUT_OF_RANGE(n||"offset",`>= ${n?1:0} and <= ${e}`,t)}Q("ERR_BUFFER_OUT_OF_BOUNDS",(function(t){return t?`${t} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"}),RangeError),Q("ERR_INVALID_ARG_TYPE",(function(t,e){return`The "${t}" argument must be of type number. Received type ${typeof e}`}),TypeError),Q("ERR_OUT_OF_RANGE",(function(t,e,n){let r=`The value of "${t}" is out of range.`,o=n;return Number.isInteger(n)&&Math.abs(n)>2**32?o=X(String(n)):"bigint"==typeof n&&(o=String(n),(n>BigInt(2)**BigInt(32)||n<-(BigInt(2)**BigInt(32)))&&(o=X(o)),o+="n"),r+=` It must be ${e}. Received ${o}`,r}),RangeError);const rt=/[^+/0-9A-Za-z-_]/g;function ot(t,e){let n;e=e||1/0;const r=t.length;let o=null;const i=[];for(let s=0;s<r;++s){if(n=t.charCodeAt(s),n>55295&&n<57344){if(!o){if(n>56319){(e-=3)>-1&&i.push(239,191,189);continue}if(s+1===r){(e-=3)>-1&&i.push(239,191,189);continue}o=n;continue}if(n<56320){(e-=3)>-1&&i.push(239,191,189),o=n;continue}n=65536+(o-55296<<10|n-56320)}else o&&(e-=3)>-1&&i.push(239,191,189);if(o=null,n<128){if((e-=1)<0)break;i.push(n)}else if(n<2048){if((e-=2)<0)break;i.push(n>>6|192,63&n|128)}else if(n<65536){if((e-=3)<0)break;i.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;i.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return i}function it(t){return i(function(t){if((t=(t=t.split("=")[0]).trim().replace(rt,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function st(t,e,n,r){let o;for(o=0;o<r&&!(o+n>=e.length||o>=t.length);++o)e[o+n]=t[o];return o}function at(t,e){return t instanceof e||null!=t&&null!=t.constructor&&null!=t.constructor.name&&t.constructor.name===e.name}function ct(t){return t!=t}const lt=function(){const t="0123456789abcdef",e=new Array(256);for(let n=0;n<16;++n){const r=16*n;for(let o=0;o<16;++o)e[r+o]=t[n]+t[o]}return e}();function ut(t){return"undefined"==typeof BigInt?ft:t}function ft(){throw new Error("BigInt not supported")}var ht=o;const pt="function"==typeof btoa,dt="function"==typeof ht,gt=("function"==typeof TextDecoder&&new TextDecoder,"function"==typeof TextEncoder?new TextEncoder:void 0),mt=Array.prototype.slice.call("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="),yt=((t=>{let e={};mt.forEach(((t,n)=>e[t]=n))})(),String.fromCharCode.bind(String)),vt=("function"==typeof Uint8Array.from&&Uint8Array.from.bind(Uint8Array),t=>t.replace(/=/g,"").replace(/[+\/]/g,(t=>"+"==t?"-":"_"))),bt=t=>{let e,n,r,o,i="";const s=t.length%3;for(let s=0;s<t.length;){if((n=t.charCodeAt(s++))>255||(r=t.charCodeAt(s++))>255||(o=t.charCodeAt(s++))>255)throw new TypeError("invalid character found");e=n<<16|r<<8|o,i+=mt[e>>18&63]+mt[e>>12&63]+mt[e>>6&63]+mt[63&e]}return s?i.slice(0,s-3)+"===".substring(s):i},wt=pt?t=>btoa(t):dt?t=>ht.from(t,"binary").toString("base64"):bt,_t=dt?t=>ht.from(t).toString("base64"):t=>{let e=[];for(let n=0,r=t.length;n<r;n+=4096)e.push(yt.apply(null,t.subarray(n,n+4096)));return wt(e.join(""))},Et=t=>{if(t.length<2)return(e=t.charCodeAt(0))<128?t:e<2048?yt(192|e>>>6)+yt(128|63&e):yt(224|e>>>12&15)+yt(128|e>>>6&63)+yt(128|63&e);var e=65536+1024*(t.charCodeAt(0)-55296)+(t.charCodeAt(1)-56320);return yt(240|e>>>18&7)+yt(128|e>>>12&63)+yt(128|e>>>6&63)+yt(128|63&e)},xt=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,Ct=t=>t.replace(xt,Et),At=dt?t=>ht.from(t,"utf8").toString("base64"):gt?t=>_t(gt.encode(t)):t=>wt(Ct(t)),Ot=(t,e=!1)=>e?vt(At(t)):At(t),St=async(t,e,n,r)=>{await logseq.Editor.editBlock(e.uuid),await logseq.Editor.exitEditingMode();let o=(await logseq.Editor.getBlock(r)).content.match(/```mermaid(.|\n)*?```/gm)[0];if(logseq.settings.config){const t=`\n%%{init: {'theme': '${logseq.settings.config.theme}'}}%%`;o=o.slice(0,10)+t+o.slice(10)}o=o.replace("```mermaid","").replace("```",""),o=o.replace("\n"," ");const i=Ot(o,!0),s=async n=>{await logseq.Editor.updateBlock(e.uuid,`${n}\n{{renderer ${t}}}`)},a=new Image;a.onload=async()=>{const t=()=>{const{port:t}=logseq.settings;return t?`http://localhost:${t}`:"https://mermaid.ink"};if(logseq.settings.config){const{colour:e}=logseq.settings.config;e.startsWith("#")?s(`<img src="${t()}/img/${i}?bgColor=${e.substring(1)}" />`):e.startsWith("#")?s(`<img src="${t()}/img/${i}" />`):s(`<img src="${t()}/img/${i}?bgColor=!${e}" />`)}else n?n.startsWith("#")?s(`<img src="${t()}/img/${i}?bgColor=${n.substring(1)}" />`):n.startsWith("#")?s(`<img src="${t()}/img/${i}" />`):s(`<img src="${t()}/img/${i}?bgColor=!${n}" />`):s(`<img src="${t()}/img/${i}" />`)},a.onerror=()=>{s("<p>There is an error with your mermaid syntax. Please rectify and render again.</p>")},a.src=`https://mermaid.ink/img/${i}`};logseq.ready((()=>{console.log("logseq-mermaid-plugin loaded"),logseq.useSettingsSchema([{key:"port",type:"number",default:"",description:"If you are using a local mermaid.ink server, indicate the port number that mermaid.ink is running on. If you want to use https://mermaid.ink, then leave this field blank.",title:"Port number"}]),logseq.Editor.registerSlashCommand("Draw mermaid diagram",(async()=>{await logseq.Editor.insertAtEditingCursor(`{{renderer :mermaid_${Math.random().toString(36).replace(/[^a-z]+/g,"")}}}`);const t=await logseq.Editor.getCurrentBlock();await logseq.Editor.insertBlock(t.uuid,"```mermaid\n```",{sibling:!1,before:!1})})),logseq.App.onMacroRendererSlotted((async({slot:t,payload:e})=>{const[n,r]=e.arguments,o=n.split("_")[1]?.trim(),i=`mermaid_${o}_${t}`;if(!n.startsWith(":mermaid_"))return;const s=(await logseq.Editor.getBlock(e.uuid,{includeChildren:!0})).children[0].uuid;logseq.provideModel({async show(){St(n,e,r,s)}}),logseq.provideStyle("\n      .renderBtn {\n        border: 1px solid black;\n        border-radius: 8px;\n        padding: 3px;\n        font-size: 80%;\n        background-color: white;\n        color: black;\n      }\n\n      .renderBtn:hover {\n        background-color: black;\n        color: white;\n      }\n    "),logseq.provideUI({key:`${i}`,slot:t,reset:!0,template:'<button data-on-click="show" class="renderBtn">Render</button>'})}))})).catch(console.error);