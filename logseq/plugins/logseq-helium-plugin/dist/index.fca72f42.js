let e,t,n,r,o,i,a,s,l,c,u,d,h,p,f,g,m,y,v,b,w,_,k,x;var S="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},C={},E={},O=S.parcelRequirece2e;"use strict";null==O&&((O=function(e){if(e in C)return C[e].exports;if(e in E){var t=E[e];delete E[e];var n={id:e,exports:{}};return C[e]=n,t.call(n.exports,n,n.exports),n.exports}var r=Error("Cannot find module '"+e+"'");throw r.code="MODULE_NOT_FOUND",r}).register=function(e,t){E[e]=t},S.parcelRequirece2e=O),O.register("cVm5l",function(e,t){self,e.exports=(()=>{var n={227:(e,t,n)=>{let r;var o=n(155);t.formatArgs=function(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;let n="color: "+this.color;t.splice(1,0,n,"color: inherit");let r=0,o=0;t[0].replace(/%[a-zA-Z%]/g,e=>{"%%"!==e&&(r++,"%c"===e&&(o=r))}),t.splice(o,0,n)},t.save=function(e){try{e?t.storage.setItem("debug",e):t.storage.removeItem("debug")}catch(e){}},t.load=function(){let e;try{e=t.storage.getItem("debug")}catch(e){}return!e&&void 0!==o&&"env"in o&&(e=o.env.DEBUG),e},t.useColors=function(){return"undefined"!=typeof window&&!!window.process&&("renderer"===window.process.type||!!window.process.__nwjs)||!("undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&("undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))},t.storage=function(){try{return localStorage}catch(e){}}(),t.destroy=(r=!1,()=>{r||(r=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],t.log=console.debug||console.log||(()=>{}),e.exports=n(447)(t);let{formatters:i}=e.exports;i.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}},447:(e,t,n)=>{e.exports=function(e){function t(e){let n,o,i,a=null;function s(...e){if(!s.enabled)return;let r=Number(new Date),o=r-(n||r);s.diff=o,s.prev=n,s.curr=r,n=r,e[0]=t.coerce(e[0]),"string"!=typeof e[0]&&e.unshift("%O");let i=0;e[0]=e[0].replace(/%([a-zA-Z%])/g,(n,r)=>{if("%%"===n)return"%";i++;let o=t.formatters[r];if("function"==typeof o){let t=e[i];n=o.call(s,t),e.splice(i,1),i--}return n}),t.formatArgs.call(s,e),(s.log||t.log).apply(s,e)}return s.namespace=e,s.useColors=t.useColors(),s.color=t.selectColor(e),s.extend=r,s.destroy=t.destroy,Object.defineProperty(s,"enabled",{enumerable:!0,configurable:!1,get:()=>null!==a?a:(o!==t.namespaces&&(o=t.namespaces,i=t.enabled(e)),i),set:e=>{a=e}}),"function"==typeof t.init&&t.init(s),s}function r(e,n){let r=t(this.namespace+(void 0===n?":":n)+e);return r.log=this.log,r}function o(e){return e.toString().substring(2,e.toString().length-2).replace(/\.\*\?$/,"*")}return t.debug=t,t.default=t,t.coerce=function(e){return e instanceof Error?e.stack||e.message:e},t.disable=function(){let e=[...t.names.map(o),...t.skips.map(o).map(e=>"-"+e)].join(",");return t.enable(""),e},t.enable=function(e){let n;t.save(e),t.namespaces=e,t.names=[],t.skips=[];let r=("string"==typeof e?e:"").split(/[\s,]+/),o=r.length;for(n=0;n<o;n++)r[n]&&("-"===(e=r[n].replace(/\*/g,".*?"))[0]?t.skips.push(RegExp("^"+e.slice(1)+"$")):t.names.push(RegExp("^"+e+"$")))},t.enabled=function(e){let n,r;if("*"===e[e.length-1])return!0;for(n=0,r=t.skips.length;n<r;n++)if(t.skips[n].test(e))return!1;for(n=0,r=t.names.length;n<r;n++)if(t.names[n].test(e))return!0;return!1},t.humanize=n(824),t.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(e).forEach(n=>{t[n]=e[n]}),t.names=[],t.skips=[],t.formatters={},t.selectColor=function(e){let n=0;for(let t=0;t<e.length;t++)n=(n<<5)-n+e.charCodeAt(t)|0;return t.colors[Math.abs(n)%t.colors.length]},t.enable(t.load()),t}},856:function(e){e.exports=function(){"use strict";function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}function t(e,n){return(t=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,n)}function n(e,r,o){return(n=!function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}()?function(e,n,r){var o=[null];o.push.apply(o,n);var i=new(Function.bind.apply(e,o));return r&&t(i,r.prototype),i}:Reflect.construct).apply(null,arguments)}function r(e){return function(e){if(Array.isArray(e))return o(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(e,t):void 0}}(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var i,a=Object.hasOwnProperty,s=Object.setPrototypeOf,l=Object.isFrozen,c=Object.getPrototypeOf,u=Object.getOwnPropertyDescriptor,d=Object.freeze,h=Object.seal,p=Object.create,f="undefined"!=typeof Reflect&&Reflect,g=f.apply,m=f.construct;g||(g=function(e,t,n){return e.apply(t,n)}),d||(d=function(e){return e}),h||(h=function(e){return e}),m||(m=function(e,t){return n(e,r(t))});var y=O(Array.prototype.forEach),v=O(Array.prototype.pop),b=O(Array.prototype.push),w=O(String.prototype.toLowerCase),_=O(String.prototype.match),k=O(String.prototype.replace),x=O(String.prototype.indexOf),S=O(String.prototype.trim),C=O(RegExp.prototype.test),E=(i=TypeError,function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return m(i,t)});function O(e){return function(t){for(var n=arguments.length,r=Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];return g(e,t,r)}}function T(e,t){s&&s(e,null);for(var n=t.length;n--;){var r=t[n];if("string"==typeof r){var o=w(r);o!==r&&(l(t)||(t[n]=o),r=o)}e[r]=!0}return e}function A(e){var t,n=p(null);for(t in e)g(a,e,[t])&&(n[t]=e[t]);return n}function j(e,t){for(;null!==e;){var n=u(e,t);if(n){if(n.get)return O(n.get);if("function"==typeof n.value)return O(n.value)}e=c(e)}return function(e){return console.warn("fallback value for",e),null}}var I=d(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),M=d(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),F=d(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),L=d(["animate","color-profile","cursor","discard","fedropshadow","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),N=d(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover"]),R=d(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),D=d(["#text"]),P=d(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),$=d(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),U=d(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),z=d(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),q=h(/\{\{[\w\W]*|[\w\W]*\}\}/gm),B=h(/<%[\w\W]*|[\w\W]*%>/gm),H=h(/^data-[\-\w.\u00B7-\uFFFF]/),W=h(/^aria-[\-\w]+$/),G=h(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),K=h(/^(?:\w+script|data):/i),V=h(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),J=h(/^html$/i),Y=function(t,n){if("object"!==e(t)||"function"!=typeof t.createPolicy)return null;var r=null,o="data-tt-policy-suffix";n.currentScript&&n.currentScript.hasAttribute(o)&&(r=n.currentScript.getAttribute(o));var i="dompurify"+(r?"#"+r:"");try{return t.createPolicy(i,{createHTML:function(e){return e}})}catch(e){return console.warn("TrustedTypes policy "+i+" could not be created."),null}};return function t(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"undefined"==typeof window?null:window,o=function(e){return t(e)};if(o.version="2.3.8",o.removed=[],!n||!n.document||9!==n.document.nodeType)return o.isSupported=!1,o;var i=n.document,a=n.document,s=n.DocumentFragment,l=n.HTMLTemplateElement,c=n.Node,u=n.Element,h=n.NodeFilter,p=n.NamedNodeMap,f=void 0===p?n.NamedNodeMap||n.MozNamedAttrMap:p,g=n.HTMLFormElement,m=n.DOMParser,O=n.trustedTypes,Z=u.prototype,Q=j(Z,"cloneNode"),X=j(Z,"nextSibling"),ee=j(Z,"childNodes"),et=j(Z,"parentNode");if("function"==typeof l){var en=a.createElement("template");en.content&&en.content.ownerDocument&&(a=en.content.ownerDocument)}var er=Y(O,i),eo=er?er.createHTML(""):"",ei=a,ea=ei.implementation,es=ei.createNodeIterator,el=ei.createDocumentFragment,ec=ei.getElementsByTagName,eu=i.importNode,ed={};try{ed=A(a).documentMode?a.documentMode:{}}catch(e){}var eh={};o.isSupported="function"==typeof et&&ea&&void 0!==ea.createHTMLDocument&&9!==ed;var ep,ef,eg=G,em=null,ey=T({},[].concat(r(I),r(M),r(F),r(N),r(D))),ev=null,eb=T({},[].concat(r(P),r($),r(U),r(z))),ew=Object.seal(Object.create(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),e_=null,ek=null,ex=!0,eS=!0,eC=!1,eE=!1,eO=!1,eT=!1,eA=!1,ej=!1,eI=!1,eM=!1,eF=!0,eL=!0,eN=!1,eR={},eD=null,eP=T({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]),e$=null,eU=T({},["audio","video","img","source","image","track"]),ez=null,eq=T({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),eB="http://www.w3.org/1998/Math/MathML",eH="http://www.w3.org/2000/svg",eW="http://www.w3.org/1999/xhtml",eG=eW,eK=!1,eV=["application/xhtml+xml","text/html"],eJ=null,eY=a.createElement("form"),eZ=function(e){return e instanceof RegExp||e instanceof Function},eQ=function(t){eJ&&eJ===t||(t&&"object"===e(t)||(t={}),em="ALLOWED_TAGS"in(t=A(t))?T({},t.ALLOWED_TAGS):ey,ev="ALLOWED_ATTR"in t?T({},t.ALLOWED_ATTR):eb,ez="ADD_URI_SAFE_ATTR"in t?T(A(eq),t.ADD_URI_SAFE_ATTR):eq,e$="ADD_DATA_URI_TAGS"in t?T(A(eU),t.ADD_DATA_URI_TAGS):eU,eD="FORBID_CONTENTS"in t?T({},t.FORBID_CONTENTS):eP,e_="FORBID_TAGS"in t?T({},t.FORBID_TAGS):{},ek="FORBID_ATTR"in t?T({},t.FORBID_ATTR):{},eR="USE_PROFILES"in t&&t.USE_PROFILES,ex=!1!==t.ALLOW_ARIA_ATTR,eS=!1!==t.ALLOW_DATA_ATTR,eC=t.ALLOW_UNKNOWN_PROTOCOLS||!1,eE=t.SAFE_FOR_TEMPLATES||!1,eO=t.WHOLE_DOCUMENT||!1,ej=t.RETURN_DOM||!1,eI=t.RETURN_DOM_FRAGMENT||!1,eM=t.RETURN_TRUSTED_TYPE||!1,eA=t.FORCE_BODY||!1,eF=!1!==t.SANITIZE_DOM,eL=!1!==t.KEEP_CONTENT,eN=t.IN_PLACE||!1,eg=t.ALLOWED_URI_REGEXP||eg,eG=t.NAMESPACE||eW,t.CUSTOM_ELEMENT_HANDLING&&eZ(t.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(ew.tagNameCheck=t.CUSTOM_ELEMENT_HANDLING.tagNameCheck),t.CUSTOM_ELEMENT_HANDLING&&eZ(t.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(ew.attributeNameCheck=t.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),t.CUSTOM_ELEMENT_HANDLING&&"boolean"==typeof t.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements&&(ew.allowCustomizedBuiltInElements=t.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),ef="application/xhtml+xml"===(ep=ep=-1===eV.indexOf(t.PARSER_MEDIA_TYPE)?"text/html":t.PARSER_MEDIA_TYPE)?function(e){return e}:w,eE&&(eS=!1),eI&&(ej=!0),eR&&(em=T({},r(D)),ev=[],!0===eR.html&&(T(em,I),T(ev,P)),!0===eR.svg&&(T(em,M),T(ev,$),T(ev,z)),!0===eR.svgFilters&&(T(em,F),T(ev,$),T(ev,z)),!0===eR.mathMl&&(T(em,N),T(ev,U),T(ev,z))),t.ADD_TAGS&&(em===ey&&(em=A(em)),T(em,t.ADD_TAGS)),t.ADD_ATTR&&(ev===eb&&(ev=A(ev)),T(ev,t.ADD_ATTR)),t.ADD_URI_SAFE_ATTR&&T(ez,t.ADD_URI_SAFE_ATTR),t.FORBID_CONTENTS&&(eD===eP&&(eD=A(eD)),T(eD,t.FORBID_CONTENTS)),eL&&(em["#text"]=!0),eO&&T(em,["html","head","body"]),em.table&&(T(em,["tbody"]),delete e_.tbody),d&&d(t),eJ=t)},eX=T({},["mi","mo","mn","ms","mtext"]),e0=T({},["foreignobject","desc","title","annotation-xml"]),e1=T({},["title","style","font","a","script"]),e2=T({},M);T(e2,F),T(e2,L);var e3=T({},N);T(e3,R);var e4=function(e){var t=et(e);t&&t.tagName||(t={namespaceURI:eW,tagName:"template"});var n=w(e.tagName),r=w(t.tagName);return e.namespaceURI===eH?t.namespaceURI===eW?"svg"===n:t.namespaceURI===eB?"svg"===n&&("annotation-xml"===r||eX[r]):!!e2[n]:e.namespaceURI===eB?t.namespaceURI===eW?"math"===n:t.namespaceURI===eH?"math"===n&&e0[r]:!!e3[n]:e.namespaceURI===eW&&!(t.namespaceURI===eH&&!e0[r])&&!(t.namespaceURI===eB&&!eX[r])&&!e3[n]&&(e1[n]||!e2[n])},e5=function(e){b(o.removed,{element:e});try{e.parentNode.removeChild(e)}catch(t){try{e.outerHTML=eo}catch(t){e.remove()}}},e9=function(e,t){try{b(o.removed,{attribute:t.getAttributeNode(e),from:t})}catch(e){b(o.removed,{attribute:null,from:t})}if(t.removeAttribute(e),"is"===e&&!ev[e]){if(ej||eI)try{e5(t)}catch(e){}else try{t.setAttribute(e,"")}catch(e){}}},e6=function(e){if(eA)e="<remove></remove>"+e;else{var t,n,r=_(e,/^[\r\n\t ]+/);n=r&&r[0]}"application/xhtml+xml"===ep&&(e='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+e+"</body></html>");var o=er?er.createHTML(e):e;if(eG===eW)try{t=(new m).parseFromString(o,ep)}catch(e){}if(!t||!t.documentElement){t=ea.createDocument(eG,"template",null);try{t.documentElement.innerHTML=eK?"":o}catch(e){}}var i=t.body||t.documentElement;return e&&n&&i.insertBefore(a.createTextNode(n),i.childNodes[0]||null),eG===eW?ec.call(t,eO?"html":"body")[0]:eO?t.documentElement:i},e8=function(e){return es.call(e.ownerDocument||e,e,h.SHOW_ELEMENT|h.SHOW_COMMENT|h.SHOW_TEXT,null,!1)},e7=function(t){return"object"===e(c)?t instanceof c:t&&"object"===e(t)&&"number"==typeof t.nodeType&&"string"==typeof t.nodeName},te=function(e,t,n){eh[e]&&y(eh[e],function(e){e.call(o,t,n,eJ)})},tt=function(e){if(te("beforeSanitizeElements",e,null),e instanceof g&&("string"!=typeof e.nodeName||"string"!=typeof e.textContent||"function"!=typeof e.removeChild||!(e.attributes instanceof f)||"function"!=typeof e.removeAttribute||"function"!=typeof e.setAttribute||"string"!=typeof e.namespaceURI||"function"!=typeof e.insertBefore)||C(/[\u0080-\uFFFF]/,e.nodeName))return e5(e),!0;var t,n=ef(e.nodeName);if(te("uponSanitizeElement",e,{tagName:n,allowedTags:em}),e.hasChildNodes()&&!e7(e.firstElementChild)&&(!e7(e.content)||!e7(e.content.firstElementChild))&&C(/<[/\w]/g,e.innerHTML)&&C(/<[/\w]/g,e.textContent)||"select"===n&&C(/<template/i,e.innerHTML))return e5(e),!0;if(!em[n]||e_[n]){if(!e_[n]&&tr(n)&&(ew.tagNameCheck instanceof RegExp&&C(ew.tagNameCheck,n)||ew.tagNameCheck instanceof Function&&ew.tagNameCheck(n)))return!1;if(eL&&!eD[n]){var r=et(e)||e.parentNode,i=ee(e)||e.childNodes;if(i&&r)for(var a=i.length-1;a>=0;--a)r.insertBefore(Q(i[a],!0),X(e))}return e5(e),!0}return e instanceof u&&!e4(e)?(e5(e),!0):("noscript"===n||"noembed"===n)&&C(/<\/no(script|embed)/i,e.innerHTML)?(e5(e),!0):(eE&&3===e.nodeType&&(t=k(t=e.textContent,q," "),t=k(t,B," "),e.textContent!==t&&(b(o.removed,{element:e.cloneNode()}),e.textContent=t)),te("afterSanitizeElements",e,null),!1)},tn=function(e,t,n){if(eF&&("id"===t||"name"===t)&&(n in a||n in eY))return!1;if(eS&&!ek[t]&&C(H,t));else if(ex&&C(W,t));else if(!ev[t]||ek[t]){if(!(tr(e)&&(ew.tagNameCheck instanceof RegExp&&C(ew.tagNameCheck,e)||ew.tagNameCheck instanceof Function&&ew.tagNameCheck(e))&&(ew.attributeNameCheck instanceof RegExp&&C(ew.attributeNameCheck,t)||ew.attributeNameCheck instanceof Function&&ew.attributeNameCheck(t))||"is"===t&&ew.allowCustomizedBuiltInElements&&(ew.tagNameCheck instanceof RegExp&&C(ew.tagNameCheck,n)||ew.tagNameCheck instanceof Function&&ew.tagNameCheck(n))))return!1}else if(ez[t]);else if(C(eg,k(n,V,"")));else if("src"!==t&&"xlink:href"!==t&&"href"!==t||"script"===e||0!==x(n,"data:")||!e$[e]){if(eC&&!C(K,k(n,V,"")));else if(n)return!1}return!0},tr=function(e){return e.indexOf("-")>0},to=function(e){te("beforeSanitizeAttributes",e,null);var t,n,r,i,a=e.attributes;if(a){var s={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:ev};for(i=a.length;i--;){var l=t=a[i],c=l.name,u=l.namespaceURI;if(n="value"===c?t.value:S(t.value),r=ef(c),s.attrName=r,s.attrValue=n,s.keepAttr=!0,s.forceKeepAttr=void 0,te("uponSanitizeAttribute",e,s),n=s.attrValue,!s.forceKeepAttr&&(e9(c,e),s.keepAttr)){if(C(/\/>/i,n))e9(c,e);else if(eE&&(n=k(n,q," "),n=k(n,B," ")),tn(ef(e.nodeName),r,n))try{u?e.setAttributeNS(u,c,n):e.setAttribute(c,n),v(o.removed)}catch(e){}}}te("afterSanitizeAttributes",e,null)}},ti=function e(t){var n,r=e8(t);for(te("beforeSanitizeShadowDOM",t,null);n=r.nextNode();)te("uponSanitizeShadowNode",n,null),tt(n)||(n.content instanceof s&&e(n.content),to(n));te("afterSanitizeShadowDOM",t,null)};return o.sanitize=function(t,r){if((eK=!t)&&(t="<!-->"),"string"!=typeof t&&!e7(t)){if("function"!=typeof t.toString)throw E("toString is not a function");if("string"!=typeof(t=t.toString()))throw E("dirty is not a string, aborting")}if(!o.isSupported){if("object"===e(n.toStaticHTML)||"function"==typeof n.toStaticHTML){if("string"==typeof t)return n.toStaticHTML(t);if(e7(t))return n.toStaticHTML(t.outerHTML)}return t}if(eT||eQ(r),o.removed=[],"string"==typeof t&&(eN=!1),eN){if(t.nodeName){var a,l,u,d,h,p=ef(t.nodeName);if(!em[p]||e_[p])throw E("root node is forbidden and cannot be sanitized in-place")}}else if(t instanceof c)1===(l=(a=e6("<!---->")).ownerDocument.importNode(t,!0)).nodeType&&"BODY"===l.nodeName||"HTML"===l.nodeName?a=l:a.appendChild(l);else{if(!ej&&!eE&&!eO&&-1===t.indexOf("<"))return er&&eM?er.createHTML(t):t;if(!(a=e6(t)))return ej?null:eM?eo:""}a&&eA&&e5(a.firstChild);for(var f=e8(eN?t:a);u=f.nextNode();)3===u.nodeType&&u===d||tt(u)||(u.content instanceof s&&ti(u.content),to(u),d=u);if(d=null,eN)return t;if(ej){if(eI)for(h=el.call(a.ownerDocument);a.firstChild;)h.appendChild(a.firstChild);else h=a;return ev.shadowroot&&(h=eu.call(i,h,!0)),h}var g=eO?a.outerHTML:a.innerHTML;return eO&&em["!doctype"]&&a.ownerDocument&&a.ownerDocument.doctype&&a.ownerDocument.doctype.name&&C(J,a.ownerDocument.doctype.name)&&(g="<!DOCTYPE "+a.ownerDocument.doctype.name+">\n"+g),eE&&(g=k(g,q," "),g=k(g,B," ")),er&&eM?er.createHTML(g):g},o.setConfig=function(e){eQ(e),eT=!0},o.clearConfig=function(){eJ=null,eT=!1},o.isValidAttribute=function(e,t,n){return eJ||eQ({}),tn(ef(e),ef(t),n)},o.addHook=function(e,t){"function"==typeof t&&(eh[e]=eh[e]||[],b(eh[e],t))},o.removeHook=function(e){if(eh[e])return v(eh[e])},o.removeHooks=function(e){eh[e]&&(eh[e]=[])},o.removeAllHooks=function(){eh={}},o}()}()},729:e=>{"use strict";var t=Object.prototype.hasOwnProperty,n="~";function r(){}function o(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function i(e,t,r,i,a){if("function"!=typeof r)throw TypeError("The listener must be a function");var s=new o(r,i||e,a),l=n?n+t:t;return e._events[l]?e._events[l].fn?e._events[l]=[e._events[l],s]:e._events[l].push(s):(e._events[l]=s,e._eventsCount++),e}function a(e,t){0==--e._eventsCount?e._events=new r:delete e._events[t]}function s(){this._events=new r,this._eventsCount=0}Object.create&&(r.prototype=Object.create(null),(new r).__proto__||(n=!1)),s.prototype.eventNames=function(){var e,r,o=[];if(0===this._eventsCount)return o;for(r in e=this._events)t.call(e,r)&&o.push(n?r.slice(1):r);return Object.getOwnPropertySymbols?o.concat(Object.getOwnPropertySymbols(e)):o},s.prototype.listeners=function(e){var t=n?n+e:e,r=this._events[t];if(!r)return[];if(r.fn)return[r.fn];for(var o=0,i=r.length,a=Array(i);o<i;o++)a[o]=r[o].fn;return a},s.prototype.listenerCount=function(e){var t=n?n+e:e,r=this._events[t];return r?r.fn?1:r.length:0},s.prototype.emit=function(e,t,r,o,i,a){var s=n?n+e:e;if(!this._events[s])return!1;var l,c,u=this._events[s],d=arguments.length;if(u.fn){switch(u.once&&this.removeListener(e,u.fn,void 0,!0),d){case 1:return u.fn.call(u.context),!0;case 2:return u.fn.call(u.context,t),!0;case 3:return u.fn.call(u.context,t,r),!0;case 4:return u.fn.call(u.context,t,r,o),!0;case 5:return u.fn.call(u.context,t,r,o,i),!0;case 6:return u.fn.call(u.context,t,r,o,i,a),!0}for(c=1,l=Array(d-1);c<d;c++)l[c-1]=arguments[c];u.fn.apply(u.context,l)}else{var h,p=u.length;for(c=0;c<p;c++)switch(u[c].once&&this.removeListener(e,u[c].fn,void 0,!0),d){case 1:u[c].fn.call(u[c].context);break;case 2:u[c].fn.call(u[c].context,t);break;case 3:u[c].fn.call(u[c].context,t,r);break;case 4:u[c].fn.call(u[c].context,t,r,o);break;default:if(!l)for(h=1,l=Array(d-1);h<d;h++)l[h-1]=arguments[h];u[c].fn.apply(u[c].context,l)}}return!0},s.prototype.on=function(e,t,n){return i(this,e,t,n,!1)},s.prototype.once=function(e,t,n){return i(this,e,t,n,!0)},s.prototype.removeListener=function(e,t,r,o){var i=n?n+e:e;if(!this._events[i])return this;if(!t)return a(this,i),this;var s=this._events[i];if(s.fn)s.fn!==t||o&&!s.once||r&&s.context!==r||a(this,i);else{for(var l=0,c=[],u=s.length;l<u;l++)(s[l].fn!==t||o&&!s[l].once||r&&s[l].context!==r)&&c.push(s[l]);c.length?this._events[i]=1===c.length?c[0]:c:a(this,i)}return this},s.prototype.removeAllListeners=function(e){var t;return e?(t=n?n+e:e,this._events[t]&&a(this,t)):(this._events=new r,this._eventsCount=0),this},s.prototype.off=s.prototype.removeListener,s.prototype.addListener=s.prototype.on,s.prefixed=n,s.EventEmitter=s,e.exports=s},717:e=>{"function"==typeof Object.create?e.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:e.exports=function(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}},824:e=>{function t(e,t,n,r){return Math.round(e/n)+" "+r+(t>=1.5*n?"s":"")}e.exports=function(e,n){n=n||{};var r,o,i=typeof e;if("string"===i&&e.length>0)return function(e){if(!((e=String(e)).length>100)){var t=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(t){var n=parseFloat(t[1]);switch((t[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*n;case"weeks":case"week":case"w":return 6048e5*n;case"days":case"day":case"d":return 864e5*n;case"hours":case"hour":case"hrs":case"hr":case"h":return 36e5*n;case"minutes":case"minute":case"mins":case"min":case"m":return 6e4*n;case"seconds":case"second":case"secs":case"sec":case"s":return 1e3*n;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return n;default:return}}}}(e);if("number"===i&&isFinite(e))return n.long?(r=Math.abs(e))>=864e5?t(e,r,864e5,"day"):r>=36e5?t(e,r,36e5,"hour"):r>=6e4?t(e,r,6e4,"minute"):r>=1e3?t(e,r,1e3,"second"):e+" ms":(o=Math.abs(e))>=864e5?Math.round(e/864e5)+"d":o>=36e5?Math.round(e/36e5)+"h":o>=6e4?Math.round(e/6e4)+"m":o>=1e3?Math.round(e/1e3)+"s":e+"ms";throw Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},520:(e,t,n)=>{"use strict";var r=n(155),o="win32"===r.platform,i=n(539);function a(e,t){for(var n=[],r=0;r<e.length;r++){var o=e[r];o&&"."!==o&&(".."===o?n.length&&".."!==n[n.length-1]?n.pop():t&&n.push(".."):n.push(o))}return n}function s(e){for(var t=e.length-1,n=0;n<=t&&!e[n];n++);for(var r=t;r>=0&&!e[r];r--);return 0===n&&r===t?e:n>r?[]:e.slice(n,r+1)}var l=/^([a-zA-Z]:|[\\\/]{2}[^\\\/]+[\\\/]+[^\\\/]+)?([\\\/])?([\s\S]*?)$/,c=/^([\s\S]*?)((?:\.{1,2}|[^\\\/]+?|)(\.[^.\/\\]*|))(?:[\\\/]*)$/,u={};function d(e){var t=l.exec(e),n=(t[1]||"")+(t[2]||""),r=t[3]||"",o=c.exec(r);return[n,o[1],o[2],o[3]]}function h(e){var t=l.exec(e),n=t[1]||"",r=!!n&&":"!==n[1];return{device:n,isUnc:r,isAbsolute:r||!!t[2],tail:t[3]}}function p(e){return"\\\\"+e.replace(/^[\\\/]+/,"").replace(/[\\\/]+/g,"\\")}u.resolve=function(){for(var e,t="",n="",o=!1,s=arguments.length-1;s>=-1;s--){if(s>=0?e=arguments[s]:t?(e=r.env["="+t])&&e.substr(0,3).toLowerCase()===t.toLowerCase()+"\\"||(e=t+"\\"):e=r.cwd(),!i.isString(e))throw TypeError("Arguments to path.resolve must be strings");if(e){var l=h(e),c=l.device,u=l.isUnc,d=l.isAbsolute,f=l.tail;if((!c||!t||c.toLowerCase()===t.toLowerCase())&&(t||(t=c),o||(n=f+"\\"+n,o=d),t&&o))break}}return u&&(t=p(t)),t+(o?"\\":"")+(n=a(n.split(/[\\\/]+/),!o).join("\\"))||"."},u.normalize=function(e){var t=h(e),n=t.device,r=t.isUnc,o=t.isAbsolute,i=t.tail,s=/[\\\/]$/.test(i);return(i=a(i.split(/[\\\/]+/),!o).join("\\"))||o||(i="."),i&&s&&(i+="\\"),r&&(n=p(n)),n+(o?"\\":"")+i},u.isAbsolute=function(e){return h(e).isAbsolute},u.join=function(){for(var e=[],t=0;t<arguments.length;t++){var n=arguments[t];if(!i.isString(n))throw TypeError("Arguments to path.join must be strings");n&&e.push(n)}var r=e.join("\\");return/^[\\\/]{2}[^\\\/]/.test(e[0])||(r=r.replace(/^[\\\/]{2,}/,"\\")),u.normalize(r)},u.relative=function(e,t){e=u.resolve(e),t=u.resolve(t);for(var n=e.toLowerCase(),r=t.toLowerCase(),o=s(t.split("\\")),i=s(n.split("\\")),a=s(r.split("\\")),l=Math.min(i.length,a.length),c=l,d=0;d<l;d++)if(i[d]!==a[d]){c=d;break}if(0==c)return t;var h=[];for(d=c;d<i.length;d++)h.push("..");return(h=h.concat(o.slice(c))).join("\\")},u._makeLong=function(e){if(!i.isString(e))return e;if(!e)return"";var t=u.resolve(e);return/^[a-zA-Z]\:\\/.test(t)?"\\\\?\\"+t:/^\\\\[^?.]/.test(t)?"\\\\?\\UNC\\"+t.substring(2):e},u.dirname=function(e){var t=d(e),n=t[0],r=t[1];return n||r?(r&&(r=r.substr(0,r.length-1)),n+r):"."},u.basename=function(e,t){var n=d(e)[2];return t&&n.substr(-1*t.length)===t&&(n=n.substr(0,n.length-t.length)),n},u.extname=function(e){return d(e)[3]},u.format=function(e){if(!i.isObject(e))throw TypeError("Parameter 'pathObject' must be an object, not "+typeof e);var t=e.root||"";if(!i.isString(t))throw TypeError("'pathObject.root' must be a string or undefined, not "+typeof e.root);var n=e.dir,r=e.base||"";return n?n[n.length-1]===u.sep?n+r:n+u.sep+r:r},u.parse=function(e){if(!i.isString(e))throw TypeError("Parameter 'pathString' must be a string, not "+typeof e);var t=d(e);if(!t||4!==t.length)throw TypeError("Invalid path '"+e+"'");return{root:t[0],dir:t[0]+t[1].slice(0,-1),base:t[2],ext:t[3],name:t[2].slice(0,t[2].length-t[3].length)}},u.sep="\\",u.delimiter=";";var f=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,g={};function m(e){return f.exec(e).slice(1)}g.resolve=function(){for(var e="",t=!1,n=arguments.length-1;n>=-1&&!t;n--){var o=n>=0?arguments[n]:r.cwd();if(!i.isString(o))throw TypeError("Arguments to path.resolve must be strings");o&&(e=o+"/"+e,t="/"===o[0])}return(t?"/":"")+(e=a(e.split("/"),!t).join("/"))||"."},g.normalize=function(e){var t=g.isAbsolute(e),n=e&&"/"===e[e.length-1];return(e=a(e.split("/"),!t).join("/"))||t||(e="."),e&&n&&(e+="/"),(t?"/":"")+e},g.isAbsolute=function(e){return"/"===e.charAt(0)},g.join=function(){for(var e="",t=0;t<arguments.length;t++){var n=arguments[t];if(!i.isString(n))throw TypeError("Arguments to path.join must be strings");n&&(e+=e?"/"+n:n)}return g.normalize(e)},g.relative=function(e,t){e=g.resolve(e).substr(1),t=g.resolve(t).substr(1);for(var n=s(e.split("/")),r=s(t.split("/")),o=Math.min(n.length,r.length),i=o,a=0;a<o;a++)if(n[a]!==r[a]){i=a;break}var l=[];for(a=i;a<n.length;a++)l.push("..");return(l=l.concat(r.slice(i))).join("/")},g._makeLong=function(e){return e},g.dirname=function(e){var t=m(e),n=t[0],r=t[1];return n||r?(r&&(r=r.substr(0,r.length-1)),n+r):"."},g.basename=function(e,t){var n=m(e)[2];return t&&n.substr(-1*t.length)===t&&(n=n.substr(0,n.length-t.length)),n},g.extname=function(e){return m(e)[3]},g.format=function(e){if(!i.isObject(e))throw TypeError("Parameter 'pathObject' must be an object, not "+typeof e);var t=e.root||"";if(!i.isString(t))throw TypeError("'pathObject.root' must be a string or undefined, not "+typeof e.root);return(e.dir?e.dir+g.sep:"")+(e.base||"")},g.parse=function(e){if(!i.isString(e))throw TypeError("Parameter 'pathString' must be a string, not "+typeof e);var t=m(e);if(!t||4!==t.length)throw TypeError("Invalid path '"+e+"'");return t[1]=t[1]||"",t[2]=t[2]||"",t[3]=t[3]||"",{root:t[0],dir:t[0]+t[1].slice(0,-1),base:t[2],ext:t[3],name:t[2].slice(0,t[2].length-t[3].length)}},g.sep="/",g.delimiter=":",e.exports=o?u:g,e.exports.posix=g,e.exports.win32=u},155:e=>{var t,n,r=e.exports={};function o(){throw Error("setTimeout has not been defined")}function i(){throw Error("clearTimeout has not been defined")}function a(e){if(t===setTimeout)return setTimeout(e,0);if((t===o||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(n){try{return t.call(null,e,0)}catch(n){return t.call(this,e,0)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:o}catch(e){t=o}try{n="function"==typeof clearTimeout?clearTimeout:i}catch(e){n=i}}();var s,l=[],c=!1,u=-1;function d(){c&&s&&(c=!1,s.length?l=s.concat(l):u=-1,l.length&&h())}function h(){if(!c){var e=a(d);c=!0;for(var t=l.length;t;){for(s=l,l=[];++u<t;)s&&s[u].run();u=-1,t=l.length}s=null,c=!1,function(e){if(n===clearTimeout)return clearTimeout(e);if((n===i||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(e);try{n(e)}catch(t){try{return n.call(null,e)}catch(t){return n.call(this,e)}}}(e)}}function p(e,t){this.fun=e,this.array=t}function f(){}r.nextTick=function(e){var t=Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];l.push(new p(e,t)),1!==l.length||c||a(h)},p.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={},r.on=f,r.addListener=f,r.once=f,r.off=f,r.removeListener=f,r.removeAllListeners=f,r.emit=f,r.prependListener=f,r.prependOnceListener=f,r.listeners=function(e){return[]},r.binding=function(e){throw Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(e){throw Error("process.chdir is not supported")},r.umask=function(){return 0}},384:e=>{e.exports=function(e){return e&&"object"==typeof e&&"function"==typeof e.copy&&"function"==typeof e.fill&&"function"==typeof e.readUInt8}},539:(e,t,n)=>{var r=n(155),o=/%[sdj%]/g;t.format=function(e){if(!y(e)){for(var t=[],n=0;n<arguments.length;n++)t.push(s(arguments[n]));return t.join(" ")}n=1;for(var r=arguments,i=r.length,a=String(e).replace(o,function(e){if("%%"===e)return"%";if(n>=i)return e;switch(e){case"%s":return String(r[n++]);case"%d":return Number(r[n++]);case"%j":try{return JSON.stringify(r[n++])}catch(e){return"[Circular]"}default:return e}}),l=r[n];n<i;l=r[++n])g(l)||!w(l)?a+=" "+l:a+=" "+s(l);return a},t.deprecate=function(e,o){if(v(n.g.process))return function(){return t.deprecate(e,o).apply(this,arguments)};if(!0===r.noDeprecation)return e;var i=!1;return function(){if(!i){if(r.throwDeprecation)throw Error(o);r.traceDeprecation?console.trace(o):console.error(o),i=!0}return e.apply(this,arguments)}};var i,a={};function s(e,n){var r={seen:[],stylize:c};return arguments.length>=3&&(r.depth=arguments[2]),arguments.length>=4&&(r.colors=arguments[3]),f(n)?r.showHidden=n:n&&t._extend(r,n),v(r.showHidden)&&(r.showHidden=!1),v(r.depth)&&(r.depth=2),v(r.colors)&&(r.colors=!1),v(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=l),u(r,e,r.depth)}function l(e,t){var n=s.styles[t];return n?"\x1b["+s.colors[n][0]+"m"+e+"\x1b["+s.colors[n][1]+"m":e}function c(e,t){return e}function u(e,n,r){if(e.customInspect&&n&&x(n.inspect)&&n.inspect!==t.inspect&&(!n.constructor||n.constructor.prototype!==n)){var o,i,a=n.inspect(r,e);return y(a)||(a=u(e,a,r)),a}var s=function(e,t){if(v(t))return e.stylize("undefined","undefined");if(y(t)){var n="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(n,"string")}return m(t)?e.stylize(""+t,"number"):f(t)?e.stylize(""+t,"boolean"):g(t)?e.stylize("null","null"):void 0}(e,n);if(s)return s;var l=Object.keys(n),c=(S={},l.forEach(function(e,t){S[e]=!0}),S);if(e.showHidden&&(l=Object.getOwnPropertyNames(n)),k(n)&&(l.indexOf("message")>=0||l.indexOf("description")>=0))return d(n);if(0===l.length){if(x(n)){var w=n.name?": "+n.name:"";return e.stylize("[Function"+w+"]","special")}if(b(n))return e.stylize(RegExp.prototype.toString.call(n),"regexp");if(_(n))return e.stylize(Date.prototype.toString.call(n),"date");if(k(n))return d(n)}var S,C,E="",T=!1,A=["{","}"];return p(n)&&(T=!0,A=["[","]"]),x(n)&&(E=" [Function"+(n.name?": "+n.name:"")+"]"),b(n)&&(E=" "+RegExp.prototype.toString.call(n)),_(n)&&(E=" "+Date.prototype.toUTCString.call(n)),k(n)&&(E=" "+d(n)),0!==l.length||T&&0!=n.length?r<0?b(n)?e.stylize(RegExp.prototype.toString.call(n),"regexp"):e.stylize("[Object]","special"):(e.seen.push(n),C=T?function(e,t,n,r,o){for(var i=[],a=0,s=t.length;a<s;++a)O(t,String(a))?i.push(h(e,t,n,r,String(a),!0)):i.push("");return o.forEach(function(o){o.match(/^\d+$/)||i.push(h(e,t,n,r,o,!0))}),i}(e,n,r,c,l):l.map(function(t){return h(e,n,r,c,t,T)}),e.seen.pop(),o=E,i=A,C.reduce(function(e,t){return t.indexOf("\n"),e+t.replace(/\u001b\[\d\d?m/g,"").length+1},0)>60?i[0]+(""===o?"":o+"\n ")+" "+C.join(",\n  ")+" "+i[1]:i[0]+o+" "+C.join(", ")+" "+i[1]):A[0]+E+A[1]}function d(e){return"["+Error.prototype.toString.call(e)+"]"}function h(e,t,n,r,o,i){var a,s,l;if((l=Object.getOwnPropertyDescriptor(t,o)||{value:t[o]}).get?s=l.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):l.set&&(s=e.stylize("[Setter]","special")),O(r,o)||(a="["+o+"]"),s||(0>e.seen.indexOf(l.value)?(s=g(n)?u(e,l.value,null):u(e,l.value,n-1)).indexOf("\n")>-1&&(s=i?s.split("\n").map(function(e){return"  "+e}).join("\n").substr(2):"\n"+s.split("\n").map(function(e){return"   "+e}).join("\n")):s=e.stylize("[Circular]","special")),v(a)){if(i&&o.match(/^\d+$/))return s;(a=JSON.stringify(""+o)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(a=a.substr(1,a.length-2),a=e.stylize(a,"name")):(a=a.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),a=e.stylize(a,"string"))}return a+": "+s}function p(e){return Array.isArray(e)}function f(e){return"boolean"==typeof e}function g(e){return null===e}function m(e){return"number"==typeof e}function y(e){return"string"==typeof e}function v(e){return void 0===e}function b(e){return w(e)&&"[object RegExp]"===S(e)}function w(e){return"object"==typeof e&&null!==e}function _(e){return w(e)&&"[object Date]"===S(e)}function k(e){return w(e)&&("[object Error]"===S(e)||e instanceof Error)}function x(e){return"function"==typeof e}function S(e){return Object.prototype.toString.call(e)}function C(e){return e<10?"0"+e.toString(10):e.toString(10)}t.debuglog=function(e){if(v(i)&&(i=r.env.NODE_DEBUG||""),!a[e=e.toUpperCase()]){if(RegExp("\\b"+e+"\\b","i").test(i)){var n=r.pid;a[e]=function(){var r=t.format.apply(t,arguments);console.error("%s %d: %s",e,n,r)}}else a[e]=function(){}}return a[e]},t.inspect=s,s.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},s.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},t.isArray=p,t.isBoolean=f,t.isNull=g,t.isNullOrUndefined=function(e){return null==e},t.isNumber=m,t.isString=y,t.isSymbol=function(e){return"symbol"==typeof e},t.isUndefined=v,t.isRegExp=b,t.isObject=w,t.isDate=_,t.isError=k,t.isFunction=x,t.isPrimitive=function(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e},t.isBuffer=n(384);var E=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function O(e,t){return Object.prototype.hasOwnProperty.call(e,t)}t.log=function(){var e,n;console.log("%s - %s",(n=[C((e=new Date).getHours()),C(e.getMinutes()),C(e.getSeconds())].join(":"),[e.getDate(),E[e.getMonth()],n].join(" ")),t.format.apply(t,arguments))},t.inherits=n(717),t._extend=function(e,t){if(!t||!w(t))return e;for(var n=Object.keys(t),r=n.length;r--;)e[n[r]]=t[n[r]];return e}}},r={};function o(e){var t=r[e];if(void 0!==t)return t.exports;var i=r[e]={exports:{}};return n[e].call(i.exports,i,i.exports,o),i.exports}o.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return o.d(t,{a:t}),t},o.d=(e,t)=>{for(var n in t)o.o(t,n)&&!o.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},o.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||Function("return this")()}catch(e){if("object"==typeof window)return window}}(),o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),o.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var i={};return(()=>{"use strict";o.r(i),o.d(i,{LSPluginUser:()=>re,setupPluginUserInstance:()=>rt});var n,r,a,s,l,c,u,d=o(520);o(856);let h=function(e,t){return e===t||e!=e&&t!=t},p=function(e,t){for(var n=e.length;n--;)if(h(e[n][0],t))return n;return -1};var f=Array.prototype.splice;function g(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}g.prototype.clear=function(){this.__data__=[],this.size=0},g.prototype.delete=function(e){var t=this.__data__,n=p(t,e);return!(n<0)&&(n==t.length-1?t.pop():f.call(t,n,1),--this.size,!0)},g.prototype.get=function(e){var t=this.__data__,n=p(t,e);return n<0?void 0:t[n][1]},g.prototype.has=function(e){return p(this.__data__,e)>-1},g.prototype.set=function(e,t){var n=this.__data__,r=p(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this};let m="object"==typeof S&&S&&S.Object===Object&&S;var y="object"==typeof self&&self&&self.Object===Object&&self;let v=m||y||Function("return this")(),b=v.Symbol;var w=Object.prototype,_=w.hasOwnProperty,k=w.toString,x=b?b.toStringTag:void 0;let C=function(e){var t=_.call(e,x),n=e[x];try{e[x]=void 0;var r=!0}catch(e){}var o=k.call(e);return r&&(t?e[x]=n:delete e[x]),o};var E=Object.prototype.toString,O=b?b.toStringTag:void 0;let T=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":O&&O in Object(e)?C(e):E.call(e)},A=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)},j=function(e){if(!A(e))return!1;var t=T(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t},I=v["__core-js_shared__"];var M,F=(M=/[^.]+$/.exec(I&&I.keys&&I.keys.IE_PROTO||""))?"Symbol(src)_1."+M:"",L=Function.prototype.toString;let N=function(e){if(null!=e){try{return L.call(e)}catch(e){}try{return e+""}catch(e){}}return""};var R=/^\[object .+?Constructor\]$/,D=Object.prototype,P=Function.prototype.toString,$=D.hasOwnProperty,U=RegExp("^"+P.call($).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");let z=function(e,t){var n=null==e?void 0:e[t];return!(!A(n)||F&&F in n)&&(j(n)?U:R).test(N(n))?n:void 0},q=z(v,"Map"),B=z(Object,"create");var H=Object.prototype.hasOwnProperty,W=Object.prototype.hasOwnProperty;function G(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}G.prototype.clear=function(){this.__data__=B?B(null):{},this.size=0},G.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},G.prototype.get=function(e){var t=this.__data__;if(B){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return H.call(t,e)?t[e]:void 0},G.prototype.has=function(e){var t=this.__data__;return B?void 0!==t[e]:W.call(t,e)},G.prototype.set=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=B&&void 0===t?"__lodash_hash_undefined__":t,this};let K=function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e},V=function(e,t){var n=e.__data__;return K(t)?n["string"==typeof t?"string":"hash"]:n.map};function J(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Y(e){var t=this.__data__=new g(e);this.size=t.size}J.prototype.clear=function(){this.size=0,this.__data__={hash:new G,map:new(q||g),string:new G}},J.prototype.delete=function(e){var t=V(this,e).delete(e);return this.size-=t?1:0,t},J.prototype.get=function(e){return V(this,e).get(e)},J.prototype.has=function(e){return V(this,e).has(e)},J.prototype.set=function(e,t){var n=V(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this},Y.prototype.clear=function(){this.__data__=new g,this.size=0},Y.prototype.delete=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n},Y.prototype.get=function(e){return this.__data__.get(e)},Y.prototype.has=function(e){return this.__data__.has(e)},Y.prototype.set=function(e,t){var n=this.__data__;if(n instanceof g){var r=n.__data__;if(!q||r.length<199)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new J(r)}return n.set(e,t),this.size=n.size,this};let Z=function(){try{var e=z(Object,"defineProperty");return e({},"",{}),e}catch(e){}}(),Q=function(e,t,n){"__proto__"==t&&Z?Z(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n},X=function(e,t,n){(void 0===n||h(e[t],n))&&(void 0!==n||t in e)||Q(e,t,n)},ee=function(e,t,n){for(var r=-1,o=Object(e),i=n(e),a=i.length;a--;){var s=i[++r];if(!1===t(o[s],s,o))break}return e};var et=t&&!t.nodeType&&t,en=et&&e&&!e.nodeType&&e,er=en&&en.exports===et?v.Buffer:void 0,eo=er?er.allocUnsafe:void 0;let ei=function(e,t){if(t)return e.slice();var n=e.length,r=eo?eo(n):new e.constructor(n);return e.copy(r),r},ea=v.Uint8Array,es=function(e){var t=new e.constructor(e.byteLength);return new ea(t).set(new ea(e)),t},el=function(e,t){var n=t?es(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)},ec=function(e,t){var n=-1,r=e.length;for(t||(t=Array(r));++n<r;)t[n]=e[n];return t};var eu=Object.create;let ed=function(){function e(){}return function(t){if(!A(t))return{};if(eu)return eu(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}(),eh=function(e,t){return function(n){return e(t(n))}},ep=eh(Object.getPrototypeOf,Object);var ef=Object.prototype;let eg=function(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||ef)},em=function(e){return null!=e&&"object"==typeof e},ey=function(e){return em(e)&&"[object Arguments]"==T(e)};var ev=Object.prototype,eb=ev.hasOwnProperty,ew=ev.propertyIsEnumerable;let e_=ey(function(){return arguments}())?ey:function(e){return em(e)&&eb.call(e,"callee")&&!ew.call(e,"callee")},ek=Array.isArray,ex=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991},eS=function(e){return null!=e&&ex(e.length)&&!j(e)};var eC=t&&!t.nodeType&&t,eE=eC&&e&&!e.nodeType&&e,eO=eE&&eE.exports===eC?v.Buffer:void 0;let eT=(eO?eO.isBuffer:void 0)||function(){return!1};var eA=Object.prototype,ej=Function.prototype.toString,eI=eA.hasOwnProperty,eM=ej.call(Object);let eF=function(e){if(!em(e)||"[object Object]"!=T(e))return!1;var t=ep(e);if(null===t)return!0;var n=eI.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&ej.call(n)==eM};var eL={};eL["[object Float32Array]"]=eL["[object Float64Array]"]=eL["[object Int8Array]"]=eL["[object Int16Array]"]=eL["[object Int32Array]"]=eL["[object Uint8Array]"]=eL["[object Uint8ClampedArray]"]=eL["[object Uint16Array]"]=eL["[object Uint32Array]"]=!0,eL["[object Arguments]"]=eL["[object Array]"]=eL["[object ArrayBuffer]"]=eL["[object Boolean]"]=eL["[object DataView]"]=eL["[object Date]"]=eL["[object Error]"]=eL["[object Function]"]=eL["[object Map]"]=eL["[object Number]"]=eL["[object Object]"]=eL["[object RegExp]"]=eL["[object Set]"]=eL["[object String]"]=eL["[object WeakMap]"]=!1;var eN=t&&!t.nodeType&&t,eR=eN&&e&&!e.nodeType&&e,eD=eR&&eR.exports===eN&&m.process,eP=function(){try{return eR&&eR.require&&eR.require("util").types||eD&&eD.binding&&eD.binding("util")}catch(e){}}(),e$=eP&&eP.isTypedArray;let eU=e$?function(e){return e$(e)}:function(e){return em(e)&&ex(e.length)&&!!eL[T(e)]},ez=function(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]};var eq=Object.prototype.hasOwnProperty;let eB=function(e,t,n){var r=e[t];eq.call(e,t)&&h(r,n)&&(void 0!==n||t in e)||Q(e,t,n)},eH=function(e,t,n,r){var o=!n;n||(n={});for(var i=-1,a=t.length;++i<a;){var s=t[i],l=r?r(n[s],e[s],s,n,e):void 0;void 0===l&&(l=e[s]),o?Q(n,s,l):eB(n,s,l)}return n},eW=function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r};var eG=/^(?:0|[1-9]\d*)$/;let eK=function(e,t){var n=typeof e;return!!(t=null==t?9007199254740991:t)&&("number"==n||"symbol"!=n&&eG.test(e))&&e>-1&&e%1==0&&e<t};var eV=Object.prototype.hasOwnProperty;let eJ=function(e,t){var n=ek(e),r=!n&&e_(e),o=!n&&!r&&eT(e),i=!n&&!r&&!o&&eU(e),a=n||r||o||i,s=a?eW(e.length,String):[],l=s.length;for(var c in e)!t&&!eV.call(e,c)||a&&("length"==c||o&&("offset"==c||"parent"==c)||i&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||eK(c,l))||s.push(c);return s},eY=function(e){var t=[];if(null!=e)for(var n in Object(e))t.push(n);return t};var eZ=Object.prototype.hasOwnProperty;let eQ=function(e){if(!A(e))return eY(e);var t=eg(e),n=[];for(var r in e)("constructor"!=r||!t&&eZ.call(e,r))&&n.push(r);return n},eX=function(e){return eS(e)?eJ(e,!0):eQ(e)},e0=function(e,t,n,r,o,i,a){var s=ez(e,n),l=ez(t,n),c=a.get(l);if(c)X(e,n,c);else{var u=i?i(s,l,n+"",e,t,a):void 0,d=void 0===u;if(d){var h=ek(l),p=!h&&eT(l),f=!h&&!p&&eU(l);u=l,h||p||f?ek(s)?u=s:em(s)&&eS(s)?u=ec(s):p?(d=!1,u=ei(l,!0)):f?(d=!1,u=el(l,!0)):u=[]:eF(l)||e_(l)?(u=s,e_(s)?u=eH(s,eX(s)):A(s)&&!j(s)||(u="function"!=typeof l.constructor||eg(l)?{}:ed(ep(l)))):d=!1}d&&(a.set(l,u),o(u,l,r,i,a),a.delete(l)),X(e,n,u)}},e1=function e(t,n,r,o,i){t!==n&&ee(n,function(a,s){if(i||(i=new Y),A(a))e0(t,n,s,r,e,o,i);else{var l=o?o(ez(t,s),a,s+"",t,n,i):void 0;void 0===l&&(l=a),X(t,s,l)}},eX)},e2=function(e){return e},e3=function(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)};var e4=Math.max;let e5=Z?function(e,t){return Z(e,"toString",{configurable:!0,enumerable:!1,value:function(){return t},writable:!0})}:e2;var e9=Date.now;let e6=(a=0,s=0,function(){var e=e9(),t=16-(e-s);if(s=e,t>0){if(++a>=800)return arguments[0]}else a=0;return e5.apply(void 0,arguments)}),e8=function(e,t,n){if(!A(n))return!1;var r=typeof t;return!!("number"==r?eS(n)&&eK(t,n.length):"string"==r&&t in n)&&h(n[t],e)},e7=(l=function(e,t,n){e1(e,t,n)},e6((r=e4((r=void 0,(n=function(e,t){var n=-1,r=t.length,o=r>1?t[r-1]:void 0,i=r>2?t[2]:void 0;for(o=l.length>3&&"function"==typeof o?(r--,o):void 0,i&&e8(t[0],t[1],i)&&(o=r<3?void 0:o,r=1),e=Object(e);++n<r;){var a=t[n];a&&l(e,a,n,o)}return e}).length-1),0),function(){for(var e=arguments,t=-1,o=e4(e.length-r,0),i=Array(o);++t<o;)i[t]=e[r+t];t=-1;for(var a=Array(r+1);++t<r;)a[t]=e[t];return a[r]=e2(i),e3(n,this,a)}),n+""));var te=function(){return(te=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function tt(e){return e.toLowerCase()}var tn=[/([a-z0-9])([A-Z])/g,/([A-Z])([A-Z][a-z])/g],tr=/[^A-Z0-9]+/gi;function to(e,t,n){return t instanceof RegExp?e.replace(t,n):t.reduce(function(e,t){return e.replace(t,n)},e)}var ti=o(729),ta=o.n(ti);function ts(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}let tl="win32"===navigator.platform.toLowerCase()?d.win32:d.posix,tc=function(e,t){var n;return void 0===t&&(t={}),void 0===(n=te({delimiter:"_"},t))&&(n={}),function(e,t){void 0===t&&(t={});for(var n=t.splitRegexp,r=t.stripRegexp,o=t.transform,i=void 0===o?tt:o,a=t.delimiter,s=void 0===a?" ":a,l=to(to(e,void 0===n?tn:n,"$1\x00$2"),void 0===r?tr:r,"\x00"),c=0,u=l.length;"\x00"===l.charAt(c);)c++;for(;"\x00"===l.charAt(u-1);)u--;return l.slice(c,u).split("\x00").map(i).join(s)}(e,te({delimiter:"."},n))};class tu extends ta(){constructor(e,t){super(),ts(this,"_tag",void 0),ts(this,"_opts",void 0),ts(this,"_logs",[]),this._tag=e,this._opts=t}write(e,t,n){var r,o;null!=t&&t.length&&!0===t[t.length-1]&&(n=!0,t.pop());let i=t.reduce((e,t)=>(t&&t instanceof Error?e+=`${t.message} ${t.stack}`:e+=t.toString(),e),`[${this._tag}][${(new Date).toLocaleTimeString()}] `);this._logs.push([e,i]),(n||null!==(r=this._opts)&&void 0!==r&&r.console)&&(null===(o=console)||void 0===o||o["ERROR"===e?"error":"debug"](`${e}: ${i}`)),this.emit("change")}clear(){this._logs=[],this.emit("change")}info(...e){this.write("INFO",e)}error(...e){this.write("ERROR",e)}warn(...e){this.write("WARN",e)}setTag(e){this._tag=e}toJSON(){return this._logs}}function td(e,t){let n,r,o=!1,i=t=>n=>{e&&clearTimeout(e),t(n),o=!0},a=new Promise((o,a)=>{n=i(o),r=i(a),e&&(e=setTimeout(()=>r(Error(`[deferred timeout] ${t}`)),e))});return{created:Date.now(),setTag:e=>t=e,resolve:n,reject:r,promise:a,get settled(){return o}}}let th=new Map;window.__injectedUIEffects=th;var tp=o(227),tf=o.n(tp);function tg(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}let tm="application/x-postmate-v1+json",ty=0,tv={handshake:1,"handshake-reply":1,call:1,emit:1,reply:1,request:1},tb=(e,t)=>("string"!=typeof t||e.origin===t)&&!!e.data&&("object"!=typeof e.data||"postmate"in e.data)&&e.data.type===tm&&!!tv[e.data.postmate];class tw{constructor(e){tg(this,"parent",void 0),tg(this,"frame",void 0),tg(this,"child",void 0),tg(this,"events",{}),tg(this,"childOrigin",void 0),tg(this,"listener",void 0),this.parent=e.parent,this.frame=e.frame,this.child=e.child,this.childOrigin=e.childOrigin,this.listener=e=>{if(!tb(e,this.childOrigin))return!1;let{data:t,name:n}=((e||{}).data||{}).value||{};"emit"===e.data.postmate&&n in this.events&&this.events[n].forEach(e=>{e.call(this,t)})},this.parent.addEventListener("message",this.listener,!1)}get(e,...t){return new Promise(n=>{let r=++ty,o=e=>{e.data.uid===r&&"reply"===e.data.postmate&&(this.parent.removeEventListener("message",o,!1),n(e.data.value))};this.parent.addEventListener("message",o,!1),this.child.postMessage({postmate:"request",type:tm,property:e,args:t,uid:r},this.childOrigin)})}call(e,t){this.child.postMessage({postmate:"call",type:tm,property:e,data:t},this.childOrigin)}on(e,t){this.events[e]||(this.events[e]=[]),this.events[e].push(t)}destroy(){window.removeEventListener("message",this.listener,!1),this.frame.parentNode.removeChild(this.frame)}}class t_{constructor(e){tg(this,"model",void 0),tg(this,"parent",void 0),tg(this,"parentOrigin",void 0),tg(this,"child",void 0),this.model=e.model,this.parent=e.parent,this.parentOrigin=e.parentOrigin,this.child=e.child,this.child.addEventListener("message",e=>{if(!tb(e,this.parentOrigin))return;let{property:t,uid:n,data:r,args:o}=e.data;"call"!==e.data.postmate?((e,t,n)=>{let r="function"==typeof e[t]?e[t].apply(null,n):e[t];return Promise.resolve(r)})(this.model,t,o).then(r=>{e.source.postMessage({property:t,postmate:"reply",type:tm,uid:n,value:r},e.origin)}):t in this.model&&"function"==typeof this.model[t]&&this.model[t](r)})}emit(e,t){this.parent.postMessage({postmate:"emit",type:tm,value:{name:e,data:t}},this.parentOrigin)}}class tk{constructor(e){tg(this,"container",void 0),tg(this,"parent",void 0),tg(this,"frame",void 0),tg(this,"child",void 0),tg(this,"childOrigin",void 0),tg(this,"url",void 0),tg(this,"model",void 0),this.container=e.container,this.url=e.url,this.parent=window,this.frame=document.createElement("iframe"),e.id&&(this.frame.id=e.id),e.name&&(this.frame.name=e.name),this.frame.classList.add.apply(this.frame.classList,e.classListArray||[]),this.container.appendChild(this.frame),this.child=this.frame.contentWindow,this.model=e.model||{}}sendHandshake(e){let t=(e=>{let t=document.createElement("a");t.href=e;let n=t.protocol.length>4?t.protocol:window.location.protocol,r=t.host.length?"80"===t.port||"443"===t.port?t.hostname:t.host:window.location.host;return t.origin||`${n}//${r}`})(e=e||this.url),n,r=0;return new Promise((o,i)=>{let a=e=>!!tb(e,t)&&("handshake-reply"===e.data.postmate?(clearInterval(n),this.parent.removeEventListener("message",a,!1),this.childOrigin=e.origin,o(new tw(this))):i("Failed handshake"));this.parent.addEventListener("message",a,!1);let s=()=>{r++,this.child.postMessage({postmate:"handshake",type:tm,model:this.model},t),5===r&&clearInterval(n)};this.frame.addEventListener("load",()=>{s(),n=setInterval(s,500)}),this.frame.src=e})}destroy(){this.frame.parentNode.removeChild(this.frame)}}tg(tk,"debug",!1),tg(tk,"Model",void 0);class tx{constructor(e){tg(this,"child",void 0),tg(this,"model",void 0),tg(this,"parent",void 0),tg(this,"parentOrigin",void 0),this.child=window,this.model=e,this.parent=this.child.parent}sendHandshakeReply(){return new Promise((e,t)=>{let n=r=>{if(r.data.postmate){if("handshake"===r.data.postmate){this.child.removeEventListener("message",n,!1),r.source.postMessage({postmate:"handshake-reply",type:tm},r.origin),this.parentOrigin=r.origin;let t=r.data.model;return t&&Object.keys(t).forEach(e=>{this.model[e]=t[e]}),e(new t_(this))}return t("Handshake Reply Failed")}};this.child.addEventListener("message",n,!1)})}}function tS(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}let{importHTML:tC,createSandboxContainer:tE}=window.QSandbox||{};function tO(e,t){return e.startsWith("http")?fetch(e,t):(e=e.replace("file://",""),new Promise(async(t,n)=>{try{let n=await window.apis.doAction(["readFile",e]);t({text:()=>n})}catch(e){console.error(e),n(e)}}))}class tT extends ta(){constructor(e){super(),tS(this,"_pluginLocal",void 0),tS(this,"_frame",void 0),tS(this,"_root",void 0),tS(this,"_loaded",!1),tS(this,"_unmountFns",[]),this._pluginLocal=e,e._dispose(()=>{this._unmount()})}async load(){let{name:e,entry:t}=this._pluginLocal.options;if(this.loaded||!t)return;let{template:n,execScripts:r}=await tC(t,{fetch:tO});this._mount(n,document.body);let o=tE(e,{elementGetter:()=>{var e;return null===(e=this._root)||void 0===e?void 0:e.firstChild}}).instance.proxy;o.__shadow_mode__=!0,o.LSPluginLocal=this._pluginLocal,o.LSPluginShadow=this,o.LSPluginUser=o.logseq=new re(this._pluginLocal.toJSON(),this._pluginLocal.caller);let i=await r(o,!0);this._unmountFns.push(i.unmount),this._loaded=!0}_mount(e,t){let n=this._frame=document.createElement("div");n.classList.add("lsp-shadow-sandbox"),n.id=this._pluginLocal.id,this._root=n.attachShadow({mode:"open"}),this._root.innerHTML=`<div>${e}</div>`,t.appendChild(n),this.emit("mounted")}_unmount(){for(let e of this._unmountFns)e&&e.call(null)}destroy(){var e,t;null===(e=this.frame)||void 0===e||null===(t=e.parentNode)||void 0===t||t.removeChild(this.frame)}get loaded(){return this._loaded}get document(){var e;return null===(e=this._root)||void 0===e?void 0:e.firstChild}get frame(){return this._frame}}function tA(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}let tj=tf()("LSPlugin:caller"),tI="#await#response#",tM="#lspmsg#error#",tF=e=>`#lspmsg#${e}`;class tL extends ta(){constructor(e){super(),tA(this,"_pluginLocal",void 0),tA(this,"_connected",!1),tA(this,"_parent",void 0),tA(this,"_child",void 0),tA(this,"_shadow",void 0),tA(this,"_status",void 0),tA(this,"_userModel",{}),tA(this,"_call",void 0),tA(this,"_callUserModel",void 0),tA(this,"_debugTag",""),this._pluginLocal=e,e&&(this._debugTag=e.debugTag)}async connectToChild(){if(this._connected)return;let{shadow:e}=this._pluginLocal;e?await this._setupShadowSandbox():await this._setupIframeSandbox()}async connectToParent(e={}){var t;if(this._connected)return;let n=this,r=null!=this._pluginLocal,o=0,i=new Map,a=td(6e4),s=this._extendUserModel({"#lspmsg#ready#":async e=>{s[tF(null==e?void 0:e.pid)]=({type:e,payload:t})=>{tj(`[host (_call) -> *user] ${this._debugTag}`,e,t),n.emit(e,t)},await a.resolve()},"#lspmsg#beforeunload#":async e=>{let t=td(1e4);n.emit("beforeunload",Object.assign({actor:t},e)),await t.promise},"#lspmsg#settings#":async({type:e,payload:t})=>{n.emit("settings:changed",t)},"#lspmsg#":async({ns:e,type:t,payload:r})=>{tj(`[host (async) -> *user] ${this._debugTag} ns=${e} type=${t}`,r),e&&e.startsWith("hook")?n.emit(`${e}:${t}`,r):n.emit(t,r)},"#lspmsg#reply#":({_sync:e,result:t})=>{if(tj(`[sync host -> *user] #${e}`,t),i.has(e)){let n=i.get(e);n&&(null!=t&&t.hasOwnProperty(tM)?n.reject(t[tM]):n.resolve(t),i.delete(e))}},...e});if(r)return await a.promise,JSON.parse(JSON.stringify(null===(t=this._pluginLocal)||void 0===t?void 0:t.toJSON()));let l=new tx(s).sendHandshakeReply();return this._status="pending",await l.then(e=>{this._child=e,this._connected=!0,this._call=async(t,n={},r)=>{if(r){let e=++o;i.set(e,r),n._sync=e,r.setTag(`async call #${e}`),tj(`async call #${e}`)}return e.emit(tF(s.baseInfo.id),{type:t,payload:n}),null==r?void 0:r.promise},this._callUserModel=async(e,t)=>{try{s[e](t)}catch(t){tj(`[model method] #${e} not existed`)}},setInterval(()=>{if(i.size>100)for(let[e,t]of i)t.settled&&i.delete(e)},18e5)}).finally(()=>{this._status=void 0}),await a.promise,s.baseInfo}async call(e,t={}){var n;return null===(n=this._call)||void 0===n?void 0:n.call(this,e,t)}async callAsync(e,t={}){var n;let r=td(1e4);return null===(n=this._call)||void 0===n?void 0:n.call(this,e,t,r)}async callUserModel(e,...t){var n;return null===(n=this._callUserModel)||void 0===n?void 0:n.apply(this,[e,...t])}async callUserModelAsync(e,...t){var n;return e=`${tI}${e}`,null===(n=this._callUserModel)||void 0===n?void 0:n.apply(this,[e,...t])}async _setupIframeSandbox(){let e=this._pluginLocal,t=e.id,n=`${t}_lsp_main`,r=new URL(e.options.entry);r.searchParams.set("__v__",e.options.version);let o=document.querySelector(`#${n}`);o&&o.parentElement.removeChild(o);let i=document.createElement("div");i.classList.add("lsp-iframe-sandbox-container"),i.id=n,i.dataset.pid=t;try{var a;let e=null===(a=await this._pluginLocal._loadLayoutsData())||void 0===a?void 0:a.$$0;if(e){i.dataset.inited_layout="true";let{width:t,height:n,left:r,top:o,vw:a,vh:s}=e;r=Math.max(r,0),r="number"==typeof a?`${Math.min(100*r/a,99)}%`:`${r}px`,o=Math.max(o,45),o="number"==typeof s?`${Math.min(100*o/s,99)}%`:`${o}px`,Object.assign(i.style,{width:t+"px",height:n+"px",left:r,top:o})}}catch(e){console.error("[Restore Layout Error]",e)}document.body.appendChild(i);let s=new tk({id:t+"_iframe",container:i,url:r.href,classListArray:["lsp-iframe-sandbox"],model:{baseInfo:JSON.parse(JSON.stringify(e.toJSON()))}}),l,c=s.sendHandshake();return this._status="pending",new Promise((t,n)=>{l=setTimeout(()=>{n(Error("handshake Timeout")),s.destroy()},4e3),c.then(n=>{this._parent=n,this._connected=!0,this.emit("connected"),n.on(tF(e.id),({type:e,payload:t})=>{var n,r;tj("[user -> *host] ",e,t),null===(n=this._pluginLocal)||void 0===n||n.emit(e,t||{}),null===(r=this._pluginLocal)||void 0===r||r.caller.emit(e,t||{})}),this._call=async(...t)=>{await n.call(tF(e.id),{type:t[0],payload:Object.assign(t[1]||{},{$$pid:e.id})})},this._callUserModel=async(e,...t)=>{if(e.startsWith(tI))return await n.get(e.replace(tI,""),...t);n.call(e,null==t?void 0:t[0])},t(null)}).catch(e=>{n(e)}).finally(()=>{clearTimeout(l)})}).catch(e=>{throw tj("[iframe sandbox] error",e),e}).finally(()=>{this._status=void 0})}async _setupShadowSandbox(){let e=this._pluginLocal,t=this._shadow=new tT(e);try{this._status="pending",await t.load(),this._connected=!0,this.emit("connected"),this._call=async(t,n={},r)=>{var o;return r&&(n.actor=r),null===(o=this._pluginLocal)||void 0===o||o.emit(t,Object.assign(n,{$$pid:e.id})),null==r?void 0:r.promise},this._callUserModel=async(...e)=>{var t;let n=e[0];null!==(t=n)&&void 0!==t&&t.startsWith(tI)&&(n=n.replace(tI,""));let r=e[1]||{},o=this._userModel[n];"function"==typeof o&&await o.call(null,r)}}catch(e){throw tj("[shadow sandbox] error",e),e}finally{this._status=void 0}}_extendUserModel(e){return Object.assign(this._userModel,e)}_getSandboxIframeContainer(){var e;return null===(e=this._parent)||void 0===e?void 0:e.frame.parentNode}_getSandboxShadowContainer(){var e;return null===(e=this._shadow)||void 0===e?void 0:e.frame.parentNode}_getSandboxIframeRoot(){var e;return null===(e=this._parent)||void 0===e?void 0:e.frame}_getSandboxShadowRoot(){var e;return null===(e=this._shadow)||void 0===e?void 0:e.frame}set debugTag(e){this._debugTag=e}async destroy(){var e;let t=null;this._parent&&(t=this._getSandboxIframeContainer(),await this._parent.destroy()),this._shadow&&(t=this._getSandboxShadowContainer(),this._shadow.destroy()),null===(e=t)||void 0===e||e.parentNode.removeChild(t)}}function tN(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class tR{constructor(e,t){tN(this,"ctx",void 0),tN(this,"opts",void 0),this.ctx=e,this.opts=t}get ctxId(){return this.ctx.baseInfo.id}setItem(e,t){var n;return this.ctx.caller.callAsync("api:call",{method:"write-plugin-storage-file",args:[this.ctxId,e,t,null===(n=this.opts)||void 0===n?void 0:n.assets]})}getItem(e){var t;return this.ctx.caller.callAsync("api:call",{method:"read-plugin-storage-file",args:[this.ctxId,e,null===(t=this.opts)||void 0===t?void 0:t.assets]})}removeItem(e){var t;return this.ctx.caller.call("api:call",{method:"unlink-plugin-storage-file",args:[this.ctxId,e,null===(t=this.opts)||void 0===t?void 0:t.assets]})}allKeys(){var e;return this.ctx.caller.callAsync("api:call",{method:"list-plugin-storage-files",args:[this.ctxId,null===(e=this.opts)||void 0===e?void 0:e.assets]})}clear(){var e;return this.ctx.caller.call("api:call",{method:"clear-plugin-storage-files",args:[this.ctxId,null===(e=this.opts)||void 0===e?void 0:e.assets]})}hasItem(e){var t;return this.ctx.caller.callAsync("api:call",{method:"exist-plugin-storage-file",args:[this.ctxId,e,null===(t=this.opts)||void 0===t?void 0:t.assets]})}}class tD{constructor(e){var t;t=void 0,"ctx"in this?Object.defineProperty(this,"ctx",{value:t,enumerable:!0,configurable:!0,writable:!0}):this.ctx=t,this.ctx=e}get React(){return this.ensureHostScope().React}get ReactDOM(){return this.ensureHostScope().ReactDOM}get pluginLocal(){return this.ensureHostScope().LSPluginCore.ensurePlugin(this.ctx.baseInfo.id)}invokeExperMethod(e,...t){var n,r;let o=this.ensureHostScope();return e=null===(n=tc(e))||void 0===n?void 0:n.toLowerCase(),null===(r=o.logseq.api["exper_"+e])||void 0===r?void 0:r.apply(o,t)}async loadScripts(...e){(e=e.map(e=>null!=e&&e.startsWith("http")?e:this.ctx.resolveResourceFullUrl(e))).unshift(this.ctx.baseInfo.id),await this.invokeExperMethod("loadScripts",...e)}registerFencedCodeRenderer(e,t){return this.ensureHostScope().logseq.api.exper_register_fenced_code_renderer(this.ctx.baseInfo.id,e,t)}registerExtensionsEnhancer(e,t){let n=this.ensureHostScope();return"katex"===e&&n.katex&&t(n.katex).catch(console.error),n.logseq.api.exper_register_extensions_enhancer(this.ctx.baseInfo.id,e,t)}ensureHostScope(){if(window===top)throw Error("Can not access host scope!");return top}}function tP(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}let t$=e=>`task_callback_${e}`;class tU{constructor(e,t,n={}){tP(this,"_client",void 0),tP(this,"_requestId",void 0),tP(this,"_requestOptions",void 0),tP(this,"_promise",void 0),tP(this,"_aborted",!1),this._client=e,this._requestId=t,this._requestOptions=n,this._promise=new Promise((e,t)=>{if(!this._requestId)return t(null);this._client.once(t$(this._requestId),n=>{n&&n instanceof Error?t(n):e(n)})});let{success:r,fail:o,final:i}=this._requestOptions;this._promise.then(e=>{null==r||r(e)}).catch(e=>{null==o||o(e)}).finally(()=>{null==i||i()})}abort(){this._requestOptions.abortable&&!this._aborted&&(this._client.ctx._execCallableAPI("http_request_abort",this._requestId),this._aborted=!0)}get promise(){return this._promise}get client(){return this._client}get requestId(){return this._requestId}}class tz extends ti.EventEmitter{constructor(e){super(),tP(this,"_ctx",void 0),this._ctx=e,this.ctx.caller.on("#lsp#request#callback",e=>{let t=null==e?void 0:e.requestId;t&&this.emit(t$(t),null==e?void 0:e.payload)})}static createRequestTask(e,t,n){return new tU(e,t,n)}async _request(e){let t=this.ctx.baseInfo.id,{success:n,fail:r,final:o,...i}=e,a=this.ctx.Experiments.invokeExperMethod("request",t,i),s=tz.createRequestTask(this.ctx.Request,a,e);return i.abortable?s:s.promise}get ctx(){return this._ctx}}let tq=eh(Object.keys,Object);var tB=Object.prototype.hasOwnProperty;let tH=function(e){if(!eg(e))return tq(e);var t=[];for(var n in Object(e))tB.call(e,n)&&"constructor"!=n&&t.push(n);return t},tW=function(e){return eS(e)?eJ(e):tH(e)};function tG(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new J;++t<n;)this.add(e[t])}tG.prototype.add=tG.prototype.push=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this},tG.prototype.has=function(e){return this.__data__.has(e)};let tK=function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1},tV=function(e,t,n,r,o,i){var a=1&n,s=e.length,l=t.length;if(s!=l&&!(a&&l>s))return!1;var c=i.get(e),u=i.get(t);if(c&&u)return c==t&&u==e;var d=-1,h=!0,p=2&n?new tG:void 0;for(i.set(e,t),i.set(t,e);++d<s;){var f=e[d],g=t[d];if(r)var m=a?r(g,f,d,t,e,i):r(f,g,d,e,t,i);if(void 0!==m){if(m)continue;h=!1;break}if(p){if(!tK(t,function(e,t){if(!p.has(t)&&(f===e||o(f,e,n,r,i)))return p.push(t)})){h=!1;break}}else if(f!==g&&!o(f,g,n,r,i)){h=!1;break}}return i.delete(e),i.delete(t),h},tJ=function(e){var t=-1,n=Array(e.size);return e.forEach(function(e,r){n[++t]=[r,e]}),n},tY=function(e){var t=-1,n=Array(e.size);return e.forEach(function(e){n[++t]=e}),n};var tZ=b?b.prototype:void 0,tQ=tZ?tZ.valueOf:void 0;let tX=function(e,t,n,r,o,i,a){switch(n){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)break;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=t.byteLength||!i(new ea(e),new ea(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return h(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var s=tJ;case"[object Set]":var l=1&r;if(s||(s=tY),e.size!=t.size&&!l)break;var c=a.get(e);if(c)return c==t;r|=2,a.set(e,t);var u=tV(s(e),s(t),r,o,i,a);return a.delete(e),u;case"[object Symbol]":if(tQ)return tQ.call(e)==tQ.call(t)}return!1},t0=function(e,t){for(var n=-1,r=t.length,o=e.length;++n<r;)e[o+n]=t[n];return e},t1=function(e,t,n){var r=t(e);return ek(e)?r:t0(r,n(e))},t2=function(e,t){for(var n=-1,r=null==e?0:e.length,o=0,i=[];++n<r;){var a=e[n];t(a,n,e)&&(i[o++]=a)}return i};var t3=Object.prototype.propertyIsEnumerable,t4=Object.getOwnPropertySymbols;let t5=t4?function(e){return null==e?[]:t2(t4(e=Object(e)),function(t){return t3.call(e,t)})}:function(){return[]},t9=function(e){return t1(e,tW,t5)};var t6=Object.prototype.hasOwnProperty;let t8=function(e,t,n,r,o,i){var a=1&n,s=t9(e),l=s.length;if(l!=t9(t).length&&!a)return!1;for(var c=l;c--;){var u=s[c];if(!(a?u in t:t6.call(t,u)))return!1}var d=i.get(e),h=i.get(t);if(d&&h)return d==t&&h==e;var p=!0;i.set(e,t),i.set(t,e);for(var f=a;++c<l;){var g=e[u=s[c]],m=t[u];if(r)var y=a?r(m,g,u,t,e,i):r(g,m,u,e,t,i);if(!(void 0===y?g===m||o(g,m,n,r,i):y)){p=!1;break}f||(f="constructor"==u)}if(p&&!f){var v=e.constructor,b=t.constructor;v==b||!("constructor"in e)||!("constructor"in t)||"function"==typeof v&&v instanceof v&&"function"==typeof b&&b instanceof b||(p=!1)}return i.delete(e),i.delete(t),p},t7=z(v,"DataView"),ne=z(v,"Promise"),nt=z(v,"Set"),nn=z(v,"WeakMap");var nr="[object Map]",no="[object Promise]",ni="[object Set]",na="[object WeakMap]",ns="[object DataView]",nl=N(t7),nc=N(q),nu=N(ne),nd=N(nt),nh=N(nn),np=T;(t7&&np(new t7(new ArrayBuffer(1)))!=ns||q&&np(new q)!=nr||ne&&np(ne.resolve())!=no||nt&&np(new nt)!=ni||nn&&np(new nn)!=na)&&(np=function(e){var t=T(e),n="[object Object]"==t?e.constructor:void 0,r=n?N(n):"";if(r)switch(r){case nl:return ns;case nc:return nr;case nu:return no;case nd:return ni;case nh:return na}return t});let nf=np;var ng="[object Arguments]",nm="[object Array]",ny="[object Object]",nv=Object.prototype.hasOwnProperty;let nb=function(e,t,n,r,o,i){var a=ek(e),s=ek(t),l=a?nm:nf(e),c=s?nm:nf(t),u=(l=l==ng?ny:l)==ny,d=(c=c==ng?ny:c)==ny,h=l==c;if(h&&eT(e)){if(!eT(t))return!1;a=!0,u=!1}if(h&&!u)return i||(i=new Y),a||eU(e)?tV(e,t,n,r,o,i):tX(e,t,l,n,r,o,i);if(!(1&n)){var p=u&&nv.call(e,"__wrapped__"),f=d&&nv.call(t,"__wrapped__");if(p||f){var g=p?e.value():e,m=f?t.value():t;return i||(i=new Y),o(g,m,n,r,i)}}return!!h&&(i||(i=new Y),t8(e,t,n,r,o,i))},nw=function e(t,n,r,o,i){return t===n||(null!=t&&null!=n&&(em(t)||em(n))?nb(t,n,r,o,e,i):t!=t&&n!=n)},n_=function(e,t,n,r){var o=n.length,i=o,a=!r;if(null==e)return!i;for(e=Object(e);o--;){var s=n[o];if(a&&s[2]?s[1]!==e[s[0]]:!(s[0]in e))return!1}for(;++o<i;){var l=(s=n[o])[0],c=e[l],u=s[1];if(a&&s[2]){if(void 0===c&&!(l in e))return!1}else{var d=new Y;if(r)var h=r(c,u,l,e,t,d);if(!(void 0===h?nw(u,c,3,r,d):h))return!1}}return!0},nk=function(e){return e==e&&!A(e)},nx=function(e){for(var t=tW(e),n=t.length;n--;){var r=t[n],o=e[r];t[n]=[r,o,nk(o)]}return t},nS=function(e,t){return function(n){return null!=n&&n[e]===t&&(void 0!==t||e in Object(n))}},nC=function(e){var t=nx(e);return 1==t.length&&t[0][2]?nS(t[0][0],t[0][1]):function(n){return n===e||n_(n,e,t)}},nE=function(e){return"symbol"==typeof e||em(e)&&"[object Symbol]"==T(e)};var nO=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,nT=/^\w*$/;let nA=function(e,t){if(ek(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!nE(e))||nT.test(e)||!nO.test(e)||null!=t&&e in Object(t)};function nj(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw TypeError("Expected a function");var n=function(){var r=arguments,o=t?t.apply(this,r):r[0],i=n.cache;if(i.has(o))return i.get(o);var a=e.apply(this,r);return n.cache=i.set(o,a)||i,a};return n.cache=new(nj.Cache||J),n}nj.Cache=J;var nI=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,nM=/\\(\\)?/g;let nF=(u=(c=nj(function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(nI,function(e,n,r,o){t.push(r?o.replace(nM,"$1"):n||e)}),t},function(e){return 500===u.size&&u.clear(),e})).cache,c),nL=function(e,t){for(var n=-1,r=null==e?0:e.length,o=Array(r);++n<r;)o[n]=t(e[n],n,e);return o};var nN=b?b.prototype:void 0,nR=nN?nN.toString:void 0;let nD=function e(t){if("string"==typeof t)return t;if(ek(t))return nL(t,e)+"";if(nE(t))return nR?nR.call(t):"";var n=t+"";return"0"==n&&1/t==-1/0?"-0":n},nP=function(e,t){return ek(e)?e:nA(e,t)?[e]:nF(null==e?"":nD(e))},n$=function(e){if("string"==typeof e||nE(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t},nU=function(e,t){for(var n=0,r=(t=nP(t,e)).length;null!=e&&n<r;)e=e[n$(t[n++])];return n&&n==r?e:void 0},nz=function(e,t,n){var r=null==e?void 0:nU(e,t);return void 0===r?n:r},nq=function(e,t){return null!=e&&t in Object(e)},nB=function(e,t,n){for(var r=-1,o=(t=nP(t,e)).length,i=!1;++r<o;){var a=n$(t[r]);if(!(i=null!=e&&n(e,a)))break;e=e[a]}return i||++r!=o?i:!!(o=null==e?0:e.length)&&ex(o)&&eK(a,o)&&(ek(e)||e_(e))},nH=function(e){var t;return nA(e)?(t=n$(e),function(e){return null==e?void 0:e[t]}):function(t){return nU(t,e)}},nW=function(e){var t,n;return"function"==typeof e?e:null==e?e2:"object"==typeof e?ek(e)?(t=e[0],n=e[1],nA(t)&&nk(n)?nS(n$(t),n):function(e){var r=nz(e,t);return void 0===r&&r===n?null!=e&&nB(e,t,nq):nw(n,r,3)}):nC(e):nH(e)},nG=function(e,t){var n={};return t=nW(t,3),e&&ee(e,function(e,r,o){Q(n,t(e,r,o),e)},tW),n};function nK(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class nV{constructor(e,t){nK(this,"ctx",void 0),nK(this,"serviceHooks",void 0),this.ctx=e,this.serviceHooks=t,e._execCallableAPI("register-search-service",e.baseInfo.id,t.name,t.options),Object.entries({query:{f:"onQuery",args:["graph","q",!0],reply:!0,transformOutput:e=>(ek(null==e?void 0:e.blocks)&&(e.blocks=e.blocks.map(e=>e&&nG(e,(e,t)=>`block/${t}`))),e)},rebuildBlocksIndice:{f:"onIndiceInit",args:["graph","blocks"]},transactBlocks:{f:"onBlocksChanged",args:["graph","data"]},truncateBlocks:{f:"onIndiceReset",args:["graph"]},removeDb:{f:"onGraph",args:["graph"]}}).forEach(([n,r])=>{let o=`service:search:${n}:${t.name}`;e.caller.on(o,async n=>{if(j(null==t?void 0:t[r.f])){let i=null;try{i=await t[r.f].apply(t,(r.args||[]).map(e=>{if(n){if(!0===e)return n;if(n.hasOwnProperty(e)){let t=n[e];return delete n[e],t}}})),r.transformOutput&&(i=r.transformOutput(i))}catch(e){console.error("[SearchService] ",e),i=e}finally{r.reply&&e.caller.call(`${o}:reply`,i)}}})})}}function nJ(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}let nY=Symbol.for("proxy-continue"),nZ=tf()("LSPlugin:user"),nQ=new tu("",{console:!0});function nX(e,t,n){var r;if("function"!=typeof n)return!1;let{key:o,label:i,desc:a,palette:s,keybinding:l,extras:c}=t,u=`SimpleCommandHook${o}${++n4}`;this.Editor["on"+u](n),null===(r=this.caller)||void 0===r||r.call("api:call",{method:"register-plugin-simple-command",args:[this.baseInfo.id,[{key:o,label:i,type:e,desc:a,keybinding:l,extras:c},["editor/hook",u]],s]})}function n0(e){return!("string"!=typeof e||36!==e.length||!/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/gi.test(e))||(nQ.error(`#${e} is not a valid UUID string.`),!1)}let n1=null,n2=new Map,n3={async getInfo(e){return n1||(n1=await this._execCallableAPIAsync("get-app-info")),"string"==typeof e?n1[e]:n1},registerCommand:nX,registerSearchService(e){if(n2.has(e.name))throw Error(`SearchService: #${e.name} has registered!`);n2.set(e.name,new nV(this,e))},registerCommandPalette(e,t){let{key:n,label:r,keybinding:o}=e;return nX.call(this,"$palette$",{key:n,label:r,palette:!0,keybinding:o},t)},registerCommandShortcut(e,t){let{binding:n}=e,r="$shortcut$",o=r+tc(n);return nX.call(this,r,{key:o,palette:!1,keybinding:e},t)},registerUIItem(e,t){var n;let r=this.baseInfo.id;null===(n=this.caller)||void 0===n||n.call("api:call",{method:"register-plugin-ui-item",args:[r,e,t]})},registerPageMenuItem(e,t){if("function"!=typeof t)return!1;let n=e+"_"+this.baseInfo.id;nX.call(this,"page-menu-item",{key:n,label:e},t)},onBlockRendererSlotted(e,t){if(!n0(e))return;let n=this.baseInfo.id,r=`hook:editor:${tc(`slot:${e}`)}`;return this.caller.on(r,t),this.App._installPluginHook(n,r),()=>{this.caller.off(r,t),this.App._uninstallPluginHook(n,r)}},invokeExternalPlugin(e,...t){var n;if(!(e=null===(n=e)||void 0===n?void 0:n.trim()))return;let[r,o]=e.split(".");if(!["models","commands"].includes(null==o?void 0:o.toLowerCase()))throw Error("Type only support '.models' or '.commands' currently.");let i=e.replace(`${r}.${o}.`,"");if(!r||!o||!i)throw Error(`Illegal type of #${e} to invoke external plugin.`);return this._execCallableAPIAsync("invoke_external_plugin_cmd",r,o.toLowerCase(),i,t)},setFullScreen(e){let t=(...e)=>this._callWin("setFullScreen",...e);"toggle"===e?this._callWin("isFullScreen").then(e=>{e?t():t(!0)}):e?t(!0):t()}},n4=0,n5={newBlockUUID(){return this._execCallableAPIAsync("new_block_uuid")},registerSlashCommand(e,t){var n;nZ("Register slash command #",this.baseInfo.id,e,t),"function"==typeof t&&(t=[["editor/clear-current-slash",!1],["editor/restore-saved-cursor"],["editor/hook",t]]),t=t.map(e=>{let[t,...n]=e;if("editor/hook"===t){let r=n[0],o=()=>{var e;null===(e=this.caller)||void 0===e||e.callUserModel(r)};"function"==typeof r&&(o=r);let i=`SlashCommandHook${t}${++n4}`;e[1]=i,this.Editor["on"+i](o)}return e}),null===(n=this.caller)||void 0===n||n.call("api:call",{method:"register-plugin-slash-command",args:[this.baseInfo.id,[e,t]]})},registerBlockContextMenuItem(e,t){if("function"!=typeof t)return!1;let n=e+"_"+this.baseInfo.id;nX.call(this,"block-context-menu-item",{key:n,label:e},t)},registerHighlightContextMenuItem(e,t,n){if("function"!=typeof t)return!1;let r=e+"_"+this.baseInfo.id;nX.call(this,"highlight-context-menu-item",{key:r,label:e,extras:n},t)},scrollToBlockInPage(e,t,n){let r="block-content-"+t;null!=n&&n.replaceState?this.App.replaceState("page",{name:e},{anchor:r}):this.App.pushState("page",{name:e},{anchor:r})}},n9={onBlockChanged(e,t){if(!n0(e))return;let n=this.baseInfo.id,r=`hook:db:${tc(`block:${e}`)}`,o=({block:n,txData:r,txMeta:o})=>{n.uuid===e&&t(n,r,o)};return this.caller.on(r,o),this.App._installPluginHook(n,r),()=>{this.caller.off(r,o),this.App._uninstallPluginHook(n,r)}},datascriptQuery(e,...t){return(t.pop(),null!=t&&t.some(e=>"function"==typeof e))?this.Experiments.ensureHostScope().logseq.api.datascript_query(e,...t):this._execCallableAPIAsync("datascript_query",e,...t)}},n6={},n8={},n7={makeSandboxStorage(){return new tR(this,{assets:!0})}};class re extends ta(){constructor(e,t){super(),nJ(this,"_baseInfo",void 0),nJ(this,"_caller",void 0),nJ(this,"_version","0.0.15"),nJ(this,"_debugTag",""),nJ(this,"_settingsSchema",void 0),nJ(this,"_connected",!1),nJ(this,"_ui",new Map),nJ(this,"_mFileStorage",void 0),nJ(this,"_mRequest",void 0),nJ(this,"_mExperiments",void 0),nJ(this,"_beforeunloadCallback",void 0),this._baseInfo=e,this._caller=t,t.on("sys:ui:visible",e=>{null!=e&&e.toggle&&this.toggleMainUI()}),t.on("settings:changed",e=>{let t=Object.assign({},this.settings),n=Object.assign(this._baseInfo.settings,e);this.emit("settings:changed",{...n},t)}),t.on("beforeunload",async e=>{let{actor:n,...r}=e,o=this._beforeunloadCallback;try{o&&await o(r),null==n||n.resolve(null)}catch(e){console.debug(`${t.debugTag} [beforeunload] `,e),null==n||n.reject(e)}})}async ready(e,t){if(!this._connected)try{var n;"function"==typeof e&&(t=e,e={});let r=await this._caller.connectToParent(e);this._connected=!0,r=e7(this._baseInfo,r),null!==(n=r)&&void 0!==n&&n.id&&(this._debugTag=this._caller.debugTag=`#${r.id} [${r.name}]`,this.logger.setTag(this._debugTag)),this._settingsSchema&&(r.settings=function(e,t){let n=(t||[]).reduce((e,t)=>("default"in t&&(e[t.key]=t.default),e),{});return Object.assign(n,e)}(r.settings,this._settingsSchema),await this.useSettingsSchema(this._settingsSchema));try{await this._execCallableAPIAsync("setSDKMetadata",{version:this._version})}catch(e){console.warn(e)}t&&t.call(this,r)}catch(e){console.error(`${this._debugTag} [Ready Error]`,e)}}ensureConnected(){if(!this._connected)throw Error("not connected")}beforeunload(e){"function"==typeof e&&(this._beforeunloadCallback=e)}provideModel(e){return this.caller._extendUserModel(e),this}provideTheme(e){return this.caller.call("provider:theme",e),this}provideStyle(e){return this.caller.call("provider:style",e),this}provideUI(e){return this.caller.call("provider:ui",e),this}useSettingsSchema(e){return this.connected&&this.caller.call("settings:schema",{schema:e,isSync:!0}),this._settingsSchema=e,this}updateSettings(e){this.caller.call("settings:update",e)}onSettingsChanged(e){let t="settings:changed";return this.on(t,e),()=>this.off(t,e)}showSettingsUI(){this.caller.call("settings:visible:changed",{visible:!0})}hideSettingsUI(){this.caller.call("settings:visible:changed",{visible:!1})}setMainUIAttrs(e){this.caller.call("main-ui:attrs",e)}setMainUIInlineStyle(e){this.caller.call("main-ui:style",e)}hideMainUI(e){let t={key:0,visible:!1,cursor:null==e?void 0:e.restoreEditingCursor};this.caller.call("main-ui:visible",t),this.emit("ui:visible:changed",t),this._ui.set(t.key,t)}showMainUI(e){let t={key:0,visible:!0,autoFocus:null==e?void 0:e.autoFocus};this.caller.call("main-ui:visible",t),this.emit("ui:visible:changed",t),this._ui.set(t.key,t)}toggleMainUI(){let e=this._ui.get(0);e&&e.visible?this.hideMainUI():this.showMainUI()}get version(){return this._version}get isMainUIVisible(){let e=this._ui.get(0);return!!(e&&e.visible)}get connected(){return this._connected}get baseInfo(){return this._baseInfo}get effect(){var e,t;return this&&((null===(e=this.baseInfo)||void 0===e?void 0:e.effect)||!(null!==(t=this.baseInfo)&&void 0!==t&&t.iir))}get logger(){return nQ}get settings(){var e;return null===(e=this.baseInfo)||void 0===e?void 0:e.settings}get caller(){return this._caller}resolveResourceFullUrl(e){if(this.ensureConnected(),e)return e=e.replace(/^[.\\/]+/,""),function(e,...t){try{let n=new URL(e);if(!n.origin)throw Error(null);let r=tl.join(e.substr(n.origin.length),...t);return n.origin+r}catch(n){return tl.join(e,...t)}}(this._baseInfo.lsr,e)}_makeUserProxy(e,t){let n=this,r=this.caller;return new Proxy(e,{get(e,o,i){let a=e[o];return function(...e){if(a){let r=a.apply(n,e.concat(t));if(r!==nY)return r}if(t){let i=o.toString().match(/^(once|off|on)/i);if(null!=i){let o=i[0].toLowerCase(),a=i.input.slice(o.length),s=n.baseInfo.id,l=`hook:${t}:${tc(a)}`,c=e[0],u=e[1];r[o](l,c);let d=()=>{r.off(l,c),r.listenerCount(l)||n.App._uninstallPluginHook(s,l)};return"off"===o?void d():(n.App._installPluginHook(s,l,u),d)}}let i=o;return["git","ui","assets"].includes(t)&&(i=t+"_"+i),r.callAsync("api:call",{tag:t,method:i,args:e})}}})}_execCallableAPIAsync(e,...t){return this._caller.callAsync("api:call",{method:e,args:t})}_execCallableAPI(e,...t){this._caller.call("api:call",{method:e,args:t})}_callWin(...e){return this._execCallableAPIAsync("_callMainWin",...e)}get App(){return this._makeUserProxy(n3,"app")}get Editor(){return this._makeUserProxy(n5,"editor")}get DB(){return this._makeUserProxy(n9,"db")}get Git(){return this._makeUserProxy(n6,"git")}get UI(){return this._makeUserProxy(n8,"ui")}get Assets(){return this._makeUserProxy(n7,"assets")}get FileStorage(){let e=this._mFileStorage;return e||(e=this._mFileStorage=new tR(this)),e}get Request(){let e=this._mRequest;return e||(e=this._mRequest=new tz(this)),e}get Experiments(){let e=this._mExperiments;return e||(e=this._mExperiments=new tD(this)),e}}function rt(e,t){return new re(e,t)}if(null==window.__LSP__HOST__){let e=new tL(null);window.logseq=rt({},e)}})(),i})()}),O("cVm5l");var T={};Object.defineProperty(T,"__esModule",{value:!0}),T.DEFAULT_CLEAR_TIMEOUT=T.DEFAULT_SET_TIMEOUT=T.DEFAULT_NOW_FN=T.DEFAULT_AGGRESSION=T.DEFAULT_THRESHOLD_MS=void 0,T.setDriftless=z,T.clearDriftless=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.customClearTimeout;(void 0===n?D:n)(P[e])},T.setDriftlessTimeout=function(e,t){for(var n=arguments.length,r=Array(n>2?n-2:0),o=2;o<n;o++)r[o-2]=arguments[o];var i=q(e);return z({atMs:N()+t,fn:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return i.call.apply(i,[this].concat(M(t),r))}})},T.setDriftlessInterval=function(e,t){for(var n=arguments.length,r=Array(n>2?n-2:0),o=2;o<n;o++)r[o-2]=arguments[o];var i=q(e),a=void 0,s={atMs:N()+t,fn:function(){s.atMs+=t,U(a,s);for(var e=arguments.length,n=Array(e),o=0;o<e;o++)n[o]=arguments[o];return i.call.apply(i,[this].concat(M(n),r))}};return a=z(s)};var A=S.performance||{},j=function(){for(var e=["now","webkitNow","msNow","mozNow","oNow"];e.length;){var t=e.shift();if(t in A)return A[t].bind(A)}var n=Date.now||function(){return+new Date},r=(A.timing||{}).navigationStart||n();return function(){return n()-r}}();j.performanceNow=A.now,j.noConflict=function(){A.now=j.performanceNow},j.conflict=function(){A.now=j},j.conflict();var I=function(e){return e&&e.__esModule?e:{default:e}}(j);function M(e){if(!Array.isArray(e))return Array.from(e);for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}var F=T.DEFAULT_THRESHOLD_MS=1,L=T.DEFAULT_AGGRESSION=1.1,N=T.DEFAULT_NOW_FN=function(){return I.default.apply(void 0,arguments)},R=T.DEFAULT_SET_TIMEOUT=function(){return setTimeout.apply(void 0,arguments)},D=T.DEFAULT_CLEAR_TIMEOUT=function(){return clearTimeout.apply(void 0,arguments)},P={},$=0;function U(e,t){var n=this,r=arguments,o=t.atMs,i=t.fn,a=t.thresholdMs,s=t.aggression,l=t.customNow,c=t.customSetTimeout,u=void 0===c?R:c,d=o-(void 0===l?N:l)(),h=d>(void 0===a?F:a)?u(function(){U.apply(n,r)},d/(void 0===s?L:s)):u(function(){i()},0);P[e]=h}function z(){return z.setDriftlessSpyable.apply(z,arguments)}function q(e){return"function"==typeof e?e:Function(e)}z.setDriftlessSpyable=function(e){var t=$;return $+=1,U(t,e),t},logseq.useSettingsSchema([{key:"Note",title:"Note: Insert NA where you do NOT want to assign a keyboard shortcut",type:"heading"},{key:"VideoPosition",title:"Edit the top position of the floated video",description:"Default: -2em. To move the video lower, insert a more positive number (e.g. -1em). To move the video higher, insert a more negative number (e.g. -3em)",type:"string",default:"-2em"},{key:"IconTopPosition",title:"Edit the top position of the balloon icon next to the floated video",description:"Default: 1em. To move the balloon icon lower, insert a more positive number (e.g. 2em). To move the balloon icon higher, insert a more negative number (e.g. 0em)",type:"string",default:"1em"},{key:"IconLeftPosition",title:"Edit the left position of the balloon icon next to the floated video",description:"Default: 0.25em. To move the balloon icon farther from the video (more right), insert a more positive number (e.g. 1em). To move the balloon icon closer to the video (more left), insert a more negative number (e.g. -1em)",type:"string",default:"0.25em"},{key:"KeyboardShortcut_Helium",title:"Keyboard shortcut to start/stop floating the video",description:"This is the keyboard shortcut to start/stop the video from floating (default: ctrl+shift+h).",type:"string",default:"ctrl+shift+h"},{key:"KeyboardShortcut_PlayPause",title:"Keyboard shortcut to play/pause the video",description:"This is the keyboard shortcut to play/pause the video (default: mod+alt+k - Mac: cmd+alt+k | Windows: ctrl+alt+k)",type:"string",default:"mod+alt+k"},{key:"KeyboardShortcut_SkipForward",title:"Keyboard shortcut to skip forward in videos",description:"This is the keyboard shortcut to skip forward in videos (default: mod+alt+l - Mac: cmd+alt+l | Windows: ctrl+alt+l)",type:"string",default:"mod+alt+l"},{key:"KeyboardShortcut_SkipBackward",title:"Keyboard shortcut to skip backward in videos",description:"This is the keyboard shortcut to skip backward in videos (default: mod+alt+j - Mac: cmd+alt+j | Windows: ctrl+alt+j)",type:"string",default:"mod+alt+j"},{key:"SkipDuration",title:"Skip forward/backward X seconds in videos",description:"Skip forward (fast forward) or backwards (rewind) a certain number of seconds in videos (default: 10)",type:"number",default:10},{key:"PlaybackSpeedIncrement",title:"Increase/decrease playback speed increment for videos",description:"This is the custom playback speed increment for videos (default: 0.25)",type:"number",default:.25},{key:"DefaultPlaybackSpeed",title:"Default playback speed for videos",description:"This is the playback speed for videos (default: 1; min: 0.25, max: 2)",type:"number",default:1}]);const B='div[id^="ls-block"]';let H=!0,W=!0,G=!0;function K(n){let o=logseq.settings.VideoPosition,d=logseq.settings.IconTopPosition,p=logseq.settings.IconLeftPosition;e=n.uuid,r=(t=parent.document.querySelector(`${B}[id$="${e}`)).getBoundingClientRect().width,logseq.Editor.getBlock(e).then(n=>{let r=n.content;l=r.match(/({{youtube [\s\S]*?}})/gm)||r.match(/({{vimeo [\s\S]*?}})/gm),a=r.match(/({{video [\s\S]*?}})/gm),u=t.querySelector("video"),a?((s=t.querySelector("iframe"))&&""==s.id&&(s.id=`helium-videoEmbed-${e}`),i=s.id):!a&&u?(u&&""==u.id&&(u.id=`helium-localVideo-${e}`),i=u.id,u.addEventListener("click",Z)):!a&&l?((c=t.querySelector("iframe"))&&""==c.id&&(c.id=`helium-videoEmbed-${e}`),i=c.id,logseq.UI.showMsg(`Please use the {{video URL}} macro moving foward.
Info about the macro can be found here: https://github.com/logseq/logseq/pull/5396`,"error")):(H=!1,console.log("logseq-helium-plugin - ERROR: start float")),H&&(logseq.provideUI({key:"helium",path:`${B}[id$="${e}"] > .flex.flex-row.pr-2`,template:`
        <ul style="position:absolute; list-style-type:none; margin-top:${d}; margin-left:${p}; background:var(--ls-primary-background-color)">
          <li>
            <a class="helium" data-helium-id="${e}" data-on-click="stop_float">
              <svg width="4em" height="4em" viewBox="0 0 72 72" id="emoji" version="1.1" xmlns="http://www.w3.org/2000/svg">
                <g id="color">
                  <polygon fill="#D22F27" points="33.9763,42.6906 34.0061,49.1497 34.0359,55.6089 28.1166,51.8019 22.1972,47.995 28.0868,45.3428"/>
                  <circle cx="45" cy="27" r="23.0003" fill="#EA5A47"/>
                  <path fill="#D22F27" d="M60.8265,10.549c-1.3409-1.3409-2.8082-2.477-4.3606-3.4175c5.3598,8.8471,4.2238,20.5254-3.4175,28.1667 s-19.3196,8.7774-28.1667,3.4175c0.9405,1.5525,2.0767,3.0197,3.4175,4.3606c8.9822,8.9822,23.5452,8.9822,32.5273,0 C69.8087,34.0942,69.8087,19.5312,60.8265,10.549z"/>
                </g>
                <g id="hair"/>
                <g id="skin"/>
                <g id="skin-shadow"/>
                <g id="line">
                  <polyline fill="none" stroke="#000000" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" stroke-width="2.1216" points="34,47.2098 34.01,49.1498 34.04,55.6098 28.12,51.7998 22.2,47.9998 28.09,45.3398 30.04,44.4598"/>
                  <circle cx="45" cy="27" r="23.0003" fill="none" stroke="#000000" stroke-miterlimit="10" stroke-width="2"/>
                  <path fill="none" stroke="#000000" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" stroke-width="2" d="M17.7253,65.09c0.5048,0.0395,1.0254-0.0002,1.547-0.1285c2.7035-0.6648,4.41-3.458,3.8116-6.2388"/>
                  <path fill="none" stroke="#000000" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" stroke-width="2" d="M23.1406,58.907c-0.1631-0.4794-0.2535-0.9936-0.2582-1.5307c-0.0246-2.7839,2.2596-5.1284,5.102-5.2364"/>
                </g>
              </svg>
            </a>
          </li>
          <li class="helium-controls" style="margin-left:1.775em;">
            <a class="button" data-on-click="toggle_controls">
              <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-dimensions" width="24" height="24" viewBox="0 0 24 24" stroke-width="1.5" stroke="var(--ls-primary-text-color)" fill="none" stroke-linecap="round" stroke-linejoin="round">
                <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
                <path d="M3 5h11" />
                <path d="M12 7l2 -2l-2 -2" />
                <path d="M5 3l-2 2l2 2" />
                <path d="M19 10v11" />
                <path d="M17 19l2 2l2 -2" />
                <path d="M21 12l-2 -2l-2 2" />
                <rect x="3" y="10" width="11" height="11" rx="2" />
              </svg>
            </a>
          </li>
          <div id="controls-container" style="display:none; margin-left:0.05em;">
            <ul style="display:flex; list-style-type:none; margin: 0 0 0 0.2em;">
              <li class="helium-controls icon" title="Decrease video height">
                <a class="button" data-on-click="decrease_video_height">
                  <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-minus" width="18" height="18" viewBox="0 0 24 24" stroke-width="2.5" stroke="var(--ls-primary-text-color)" fill="none" stroke-linecap="round" stroke-linejoin="round">
                    <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
                    <line x1="5" y1="12" x2="19" y2="12" />
                  </svg>
                </a>
              </li>
              <li class="helium-controls letter" style="margin: 0 0.375em;">H</li>
              <li class="helium-controls icon" title="Increase video height">
                <a class="button" data-on-click="increase_video_height">
                  <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-plus" width="18" height="18" viewBox="0 0 24 24" stroke-width="2.5" stroke="var(--ls-primary-text-color)" fill="none" stroke-linecap="round" stroke-linejoin="round">
                    <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
                    <line x1="12" y1="5" x2="12" y2="19" />
                    <line x1="5" y1="12" x2="19" y2="12" />
                  </svg>
                </a>
              </li>
            </ul>
            <ul style="display:flex; list-style-type:none; margin: 0 0 0 0.2em;">
              <li class="helium-controls icon" title="Decrease video width">
                <a class="button" data-on-click="decrease_video_width">
                  <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-minus" width="18" height="18" viewBox="0 0 24 24" stroke-width="2.5" stroke="var(--ls-primary-text-color)" fill="none" stroke-linecap="round" stroke-linejoin="round">
                    <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
                    <line x1="5" y1="12" x2="19" y2="12" />
                  </svg>
                </a>
              </li>
              <li class="helium-controls letter" style="margin: 0 0.25em;">W</li>
              <li class="helium-controls icon" title="Increase video width">
                <a class="button" data-on-click="increase_video_width">
                  <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-plus" width="18" height="18" viewBox="0 0 24 24" stroke-width="2.5" stroke="var(--ls-primary-text-color)" fill="none" stroke-linecap="round" stroke-linejoin="round">
                    <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
                    <line x1="12" y1="5" x2="12" y2="19" />
                    <line x1="5" y1="12" x2="19" y2="12" />
                  </svg>
                </a>
              </li>
            </ul>
            <ul style="display:flex; list-style-type:none; margin: 0 0 0 0.2em;">
              <li class="helium-controls icon" title="Decrease video height and width">
                <a class="button" data-on-click="decrease_video_height_width">
                  <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-minus" width="18" height="18" viewBox="0 0 24 24" stroke-width="2.5" stroke="var(--ls-primary-text-color)" fill="none" stroke-linecap="round" stroke-linejoin="round">
                    <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
                    <line x1="5" y1="12" x2="19" y2="12" />
                  </svg>
                </a>
              </li>
              <li class="helium-controls letter" style="margin: 0.15em;">
                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-aspect-ratio" width="20" height="20" viewBox="0 0 24 24" stroke-width="2" stroke="var(--ls-primary-text-color)" fill="none" stroke-linecap="round" stroke-linejoin="round">
                  <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
                  <rect x="3" y="5" width="18" height="14" rx="2" />
                  <path d="M7 12v-3h3" />
                  <path d="M17 12v3h-3" />
                </svg>
              </li>
              <li class="helium-controls icon" title="Increase video height and width">
                <a class="button" data-on-click="increase_video_height_width">
                  <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-plus" width="18" height="18" viewBox="0 0 24 24" stroke-width="2.5" stroke="var(--ls-primary-text-color)" fill="none" stroke-linecap="round" stroke-linejoin="round">
                    <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
                    <line x1="12" y1="5" x2="12" y2="19" />
                    <line x1="5" y1="12" x2="19" y2="12" />
                  </svg>
                </a>
              </li>
            </ul>
          </div>
          <li class="helium-controls" style="margin-left:1.65em;">
            <a class="button" data-on-click="toggle_playback_speed">
              <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-gauge" width="22" height="22" viewBox="0 0 24 24" stroke-width="2" stroke="var(--ls-primary-text-color)" fill="none" stroke-linecap="round" stroke-linejoin="round">
                <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
                <circle cx="12" cy="12" r="9" />
                <circle cx="12" cy="12" r="1" />
                <line x1="13.41" y1="10.59" x2="16" y2="8" />
                <path d="M7 12a5 5 0 0 1 5 -5" />
              </svg>
            </a>
          </li>
          <div id="playback-speed-container" style="display:none; margin-left: -0.65em;">
            <ul style="display:flex; list-style-type:none; margin: 0 0 0 0.2em;">
              <li class="helium-controls icon" title="Decrease playback speed">
                <a class="button" data-on-click="decrease_playback_speed">
                  <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-minus" width="18" height="18" viewBox="0 0 24 24" stroke-width="2.5" stroke="var(--ls-primary-text-color)" fill="none" stroke-linecap="round" stroke-linejoin="round">
                    <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
                    <line x1="5" y1="12" x2="19" y2="12" />
                  </svg>
                </a>
              </li>
              <li class="helium-controls number" id="playback-speed" style="margin: 0.1em 0.375em; width:42px; font-size:0.9em; font-weight:500;">1.00x</li>
              <li class="helium-controls icon" title="Increase playback speed">
                <a class="button" data-on-click="increase_playback_speed">
                  <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-plus" width="18" height="18" viewBox="0 0 24 24" stroke-width="2.5" stroke="var(--ls-primary-text-color)" fill="none" stroke-linecap="round" stroke-linejoin="round">
                    <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
                    <line x1="12" y1="5" x2="12" y2="19" />
                    <line x1="5" y1="12" x2="19" y2="12" />
                  </svg>
                </a>
              </li>
            </ul>
          </div>
          <ul id="helium-media-controls" style="list-style-type:none; margin: 0;">
            <li class="helium-controls icon" style="margin-left:0.05em;">
              <a class="button" data-on-click="skip_backward">
                <svg id="skip-backward" xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-player-track-prev" width="20" height="20" viewBox="0 0 24 24" stroke-width="2" stroke="var(--ls-primary-text-color)" fill="none" stroke-linecap="round" stroke-linejoin="round">
                  <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
                  <path d="M21 5v14l-8 -7z" />
                  <path d="M10 5v14l-8 -7z" />
                </svg>
              </a>
            </li>
            <li class="helium-controls" id="helium-controls-play-pause" style="margin-left: -0.05em;">
              <a class="button" id="helium-play-pause-button" data-on-click="play_pause">
              </a>
            </li>
            <li class="helium-controls icon">
              <a class="button" data-on-click="skip_forward">
                <svg id="skip-forward" style="margin-left: 0.1em;" xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-player-track-next" width="20" height="20" viewBox="0 0 24 24" stroke-width="2" stroke="var(--ls-primary-text-color)" fill="none" stroke-linecap="round" stroke-linejoin="round">
                  <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
                  <path d="M3 5v14l8 -7z" />
                  <path d="M14 5v14l8 -7z" />
                </svg>
              </a>
            </li>
          </ul>
        </ul>
        `}),logseq.provideStyle(`
        ${B}[id$="${e}"] > .flex.flex-row.pr-2, ${B}[id$="${e}"] {
          position: sticky;
          top: ${o};
          z-index: 5;
          background: var(--ls-primary-background-color);
        }
        .helium-controls {
          width: fit-content;
          margin-top: 0;
        }
        .helium-controls.letter, .helium-controls.number {
          color: var(--ls-primary-text-color);
          opacity: 0.6;
          cursor: default;
        }
        a.button {
          display: flex;
          align-items: center;
          padding: 0.25em;
        }
      `),i.includes("helium-videoEmbed")?logseq.provideStyle(`
          #helium-media-controls {
            display: none;
          }
        `):(logseq.provideStyle(`
          #helium-media-controls {
            display: flex;
          }
        `),(0,T.setDriftlessTimeout)(()=>{i.includes("youtube-player")?((h=parent.window.YT.get(i)).setPlaybackRate(parseInt(logseq.settings.DefaultPlaybackSpeed)),2==h.getPlayerState()||5==h.getPlayerState()?Q():1==h.getPlayerState()&&(X(),G=!0)):i.includes("helium-localVideo")&&((h=parent.document.getElementById(`${i}`)).playbackRate=parseInt(logseq.settings.DefaultPlaybackSpeed),h.paused?Q():(X(),G=!0))},10)))}),W=!1,G=!1}function V(t){u&&u.removeEventListener("click",Z);let n=void 0==t.uuid?t.dataset.heliumId:t.uuid,r=parent.document.getElementById("logseq-helium-plugin--helium"),o=parent.document.getElementById("helium--logseq-helium-plugin");logseq.provideStyle(`
    ${B}[id$="${n}"] > .flex.flex-row.pr-2, ${B}[id$="${e}"] {
      position: relative;
      top: 0;
      background: none;
      z-index: 0;
    }
  `),o?o.remove():r?r.remove():console.log("logseq-helium-plugin: Can't find balloon's block uuid"),W=!0}function J(){function a(){g=f.getBoundingClientRect().height+32,f.style.height=`${g}px`}function s(){m=f.getBoundingClientRect().height-32,f.style.height=`${m}px`}function l(){y=f.getBoundingClientRect().width+32,f.style.width=`${y}px`,n=t.getBoundingClientRect().width+32,t.style.width=`${n}px`,(o=parent.document.querySelector(`${B}[id$="${e}"] > .block-children-container.flex`))&&(o.style.width=`${r}px`)}function c(){v=f.getBoundingClientRect().width-32,f.style.width=`${v}px`,(n=t.getBoundingClientRect().width)>r?(n-=32,t.style.width=`${n}px`):t.style.width=`${r}px`}f=parent.document.getElementById(i),"increase height"==p?a():"decrease height"==p?s():"increase width"==p?l():"decrease width"==p?c():"increase height and width"==p?(a(),l()):"decrease height and width"==p&&(s(),c())}function Y(){i.includes("youtube-player")?(h=parent.window.YT.get(i),G?h.pauseVideo():h.playVideo()):i.includes("helium-localVideo")&&(h=parent.document.getElementById(`${i}`),G?h.pause():h.play()),G?(Q(),G=!1):(X(),G=!0)}function Z(){(h=parent.document.getElementById(`${i}`)).paused?X():Q()}function Q(){parent.document.getElementById("helium-controls-play-pause").style.marginTop="0.05em",parent.document.getElementById("helium-play-pause-button").innerHTML=`<svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-player-play" width="18" height="18" viewBox="0 0 24 24" stroke-width="2" stroke="var(--ls-primary-text-color)" fill="var(--ls-primary-text-color)" stroke-linecap="round" stroke-linejoin="round">
    <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
    <path d="M7 4v16l13 -8z" />
  </svg>`}function X(){parent.document.getElementById("helium-controls-play-pause").style.marginTop="0em",parent.document.getElementById("helium-play-pause-button").innerHTML=`<svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-player-pause" width="18" height="18" viewBox="0 0 24 24" stroke-width="1.5" stroke="var(--ls-primary-text-color)" fill="var(--ls-primary-text-color)" stroke-linecap="round" stroke-linejoin="round">
    <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
    <rect x="6" y="5" width="4" height="16" rx="1" />
    <rect x="16" y="5" width="4" height="16" rx="1" />
  </svg>`}function ee(){w=parseInt(logseq.settings.SkipDuration),logseq.onSettingsChanged(e=>{w=parseInt(e.SkipDuration)}),"forward"==b?(parent.document.getElementById("skip-forward").style.fill="var(--ls-primary-text-color)",(0,T.setDriftlessTimeout)(()=>{parent.document.getElementById("skip-forward").style.fill="none"},250),i.includes("youtube-player")?((d=parent.window.YT.get(i)).seekTo(d.getCurrentTime()+w),5==d.getPlayerState()&&X()):i.includes("helium-localVideo")&&(parent.document.getElementById(`${i}`).currentTime+=w)):"backward"==b?(parent.document.getElementById("skip-backward").style.fill="var(--ls-primary-text-color)",(0,T.setDriftlessTimeout)(()=>{parent.document.getElementById("skip-backward").style.fill="none"},250),i.includes("youtube-player")?(d=parent.window.YT.get(i)).seekTo(d.getCurrentTime()-w):i.includes("helium-localVideo")&&(parent.document.getElementById(`${i}`).currentTime-=w)):console.log("logseq-helium-plugin - ERROR: skip controls")}function et(){x=parseFloat(logseq.settings.PlaybackSpeedIncrement),logseq.onSettingsChanged(e=>{x=parseFloat(e.SkipDuration)}),"increase"==_?i.includes("youtube-player")?(k=(d=parent.window.YT.get(i)).getPlaybackRate()+x,(0,T.setDriftlessTimeout)(()=>{d.setPlaybackRate(k)},50)):i.includes("helium-localVideo")&&(parent.document.getElementById(`${i}`).playbackRate+=x,k=parent.document.getElementById(`${i}`).playbackRate):"decrease"==_&&(i.includes("youtube-player")?d.getPlaybackRate()>0&&(k=(d=parent.window.YT.get(i)).getPlaybackRate()-x,d.setPlaybackRate(k)):i.includes("helium-localVideo")&&parent.document.getElementById(`${i}`).playbackRate>0&&(parent.document.getElementById(`${i}`).playbackRate-=x,k=parent.document.getElementById(`${i}`).playbackRate)),k>0&&(parent.document.getElementById("playback-speed").textContent=`${k.toFixed(2)}x`)}const en=async()=>{console.log("logseq-helium-plugin loaded"),logseq.provideModel({stop_float(e){V(e)},toggle_controls(){let e=parent.document.getElementById("controls-container");e.style.display="none"===e.style.display?"block":"none"},increase_video_height(){p="increase height",J()},decrease_video_height(){p="decrease height",J()},increase_video_width(){p="increase width",J()},decrease_video_width(){p="decrease width",J()},increase_video_height_width(){p="increase height and width",J()},decrease_video_height_width(){p="decrease height and width",J()},toggle_playback_speed(){let e=parent.document.getElementById("playback-speed-container");e.style.display="none"===e.style.display?"block":"none"},increase_playback_speed(e){_="increase",et(e)},decrease_playback_speed(){_="decrease",et()},play_pause(){Y()},skip_forward(){b="forward",ee()},skip_backward(){b="backward",ee()}}),"NA"!=logseq.settings.KeyboardShortcut_Helium&&logseq.App.registerCommandPalette({key:"helium-keyboard-shortcut",label:"Start/stop floating video",keybinding:{binding:logseq.settings.KeyboardShortcut_Helium,mode:"global"}},async()=>{W?logseq.Editor.checkEditing().then(e=>{e?(logseq.Editor.getBlock(e).then(e=>{K(e)}),logseq.Editor.exitEditingMode()):logseq.UI.showMsg("No video was selected to float","warning")}):logseq.Editor.getBlock(e).then(e=>{V(e)})}),"NA"!=logseq.settings.KeyboardShortcut_PlayPause&&logseq.App.registerCommandPalette({key:"helium-play-pause",label:"Play/pause the video",keybinding:{binding:logseq.settings.KeyboardShortcut_PlayPause,mode:"global"}},async()=>{Y()}),"NA"!=logseq.settings.KeyboardShortcut_SkipForward&&logseq.App.registerCommandPalette({key:"helium-skip-controls-FF",label:"Fast forward the video",keybinding:{binding:logseq.settings.KeyboardShortcut_SkipForward,mode:"global"}},async()=>{logseq.Editor.exitEditingMode(!0),b="forward",ee()}),"NA"!=logseq.settings.KeyboardShortcut_SkipBackward&&logseq.App.registerCommandPalette({key:"helium-skip-controls-R",label:"Rewind the video",keybinding:{binding:logseq.settings.KeyboardShortcut_SkipBackward,mode:"global"}},async()=>{logseq.Editor.exitEditingMode(!0),b="backward",ee()}),logseq.Editor.registerSlashCommand("\uD83C\uDF88 Start float",async e=>{K(e)}),logseq.Editor.registerSlashCommand("❌ Stop float",async e=>{V(e)}),logseq.Editor.registerBlockContextMenuItem("\uD83C\uDF88 Start float",async e=>{K(e)}),logseq.Editor.registerBlockContextMenuItem("❌ Stop float",async e=>{V(e)})};logseq.ready(en).catch(console.error);